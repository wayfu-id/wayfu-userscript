// ==UserScript==
// @name         WayFu - Easy Follow Up
// @description  WhatsApp Easy Follow Up.
// @date         2023-06-07
// @copyright    2018, Rizal Nurhidayat (https://github.com/rzlnhd)
// @license      CC BY-NC-ND 4.0; https://creativecommons.org/licenses/by-nc-nd/4.0/
// @icon         https://wayfu.id/v4/assets/wayfu-icon.webp
// @homepage     https://wayfu.id/
// @supportURL   https://wayfu.id/
// @version      4.4.4
// @author       Rizal Nurhidayat (https://github.com/rzlnhd)
// @match        https://web.whatsapp.com/*
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_xmlhttpRequest
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_log
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @grant        GM_info
// @grant        GM_notification
// @connect      wayfu.id
// @updateURL    https://wayfu.id/v4/update.meta.js
// @downloadURL  https://wayfu.id/v4/wayfu-install.user.js
// @resource ico https://wayfu.id/v4/assets/wayfu-icon.webp
// @resource pnl https://wayfu.id/v4/assets/wayfu-view.html
// @resource clr https://wayfu.id/v4/assets/wayfu-colors.json
// @resource css https://wayfu.id/v4/assets/wayfu-style.min.css
// ==/UserScript==

var __webpack_modules__={162:function(e,t,n){var r;void 0===(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,n,i){var o=s.URL||s.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?t(e,n,i):a(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),n);else if(r(e))t(e,n,s);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){a(i)}))}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var h=s.URL||s.webkitURL,m=h.createObjectURL(e);a?a.location=m:location.href=m,a=null,setTimeout((function(){h.revokeObjectURL(m)}),4e4)}});s.saveAs=o.saveAs=o,e.exports=o}.apply(t,[]))||(e.exports=r)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__={};(()=>{"use strict";class e extends Array{get isEmpty(){return this.length<=0}get nonEmptyValue(){return this.filter((e=>!!e))}changeIndex(e,t){if(t>=this.length){let e=t-this.length+1;for(;e--;)this.push(void 0)}return this.splice(t,0,this.splice(e,1)[0]),this}countValue(e){let t=0;return this.forEach((n=>{t+=n===e?1:0})),t}isOnArray(e){return this.some((t=>e===t))}static split(t,n){let r=t.split(n);return new e(...r)}}const t=new class{constructor(){}getElement(e,t,n){let[r,a]=((e,t)=>"boolean"==typeof e?[null,e]:e?[this.getElement(e),t??!1]:[null,!1])(t,n);return"string"==typeof e?(e=e.trim(),r=r&&r instanceof HTMLElement?r:document,a?r.querySelectorAll(e):r.querySelector(e)):e instanceof HTMLElement||e instanceof NodeList?e:void 0}getParents(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});let n=[],r=this.getElement(e);for(;r&&r!==document;r=r.parentNode)t?r.matches(t)&&n.push(r):n.push(r);return n}createElement(e){let t,n,r;for(const a in e)if(e.hasOwnProperty(a))switch(a){case"tag":n=document.createElement(e[a]);break;case"text":r="innerText"in document?"innerText":"textContent",n[r]=e[a];break;case"html":n.innerHTML=e[a];break;case"classid":if("array"==typeof e[a])for(let t of e[a])n.classList.add(t);else"string"==typeof e[a]&&(n.className=e[a]);break;case"append":t=this.getElement(e[a]),t.appendChild(n);break;case"prepend":t=this.getElement(e[a]),t.childNodes.length&&t.insertBefore(n,t.childNodes[0]),t.appendChild(n);break;case"before":t=this.getElement(e[a]),t.parentNode.insertBefore(n,t);break;case"after":t=this.getElement(e[a]),t.parentNode.insertBefore(n,t.nextSibling);break;case"replace":t=this.getElement(e[a]),t.parentNode.replaceChild(n,t);break;case"event":for(const t in e.event)e.event.hasOwnProperty(t)&&this.onEvent(n,t,e.event[t]);break;case"callback":e[a](n);break;default:n.setAttribute(a,e[a])}return n}createElements(e,t){let n=t?t instanceof window.HTMLElement?t:"object"==typeof t&&null!=t.tag?this.createElement(t):null:"string"==typeof t?this.getElement(t):null;if(Array.isArray(e))for(let t of e)("object"==typeof t||t.tag)&&(n&&(t.append=n),this.createElement(t));return n||this}createListElement(e,t="ol",n={}){let r=this.createElement(Object.assign({tag:t},n));return Array.isArray(e)&&e.forEach((e=>{if("object"==typeof e){let n=this.createElement({tag:"li",html:e.title,append:r});Array.isArray(e.content)&&this.createListElement(e.content,t||"ol",{append:n})}else"string"==typeof e&&this.createElement({tag:"li",html:e,append:r})})),r}createSelectElement(e,t,n){const{id:r,classid:a}=e,s=this.createElement({tag:"select",id:r,classid:a});if(s.append(...(e=>e.map((e=>this.createElement({tag:"option",value:e,text:e}))))(t)),n)for(let e in n)this.onEvent(s,e,n[e]);return s}createCheckElement(e,t){const{id:n,classid:r}=e,a=this.createElement({tag:"input",type:"checkbox",id:n,name:n,classid:r});if(t)for(let e in t)this.onEvent(a,e,t[e]);return a}createLabelElement(e){const{id:t,classid:n,text:r}=e;return this.createElement({tag:"label",for:t,classid:n,text:r})}createSVGElement(e,t={}){const n=(e,t)=>{let n=document.createElementNS("http://www.w3.org/2000/svg",e),r=e=>`-${e.toLocaleLowerCase()}`;for(let e in t){let a="viewBox"===e?e:e.replace(/[A-Z]/g,r);n.setAttributeNS(null,a,t[e])}return n},r=n("svg",t);return(Array.isArray(e)?e:[e]).forEach((e=>{const{type:t,data:a}=e;r.appendChild(n(t,a))})),r}setElementStyle(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"zIndex":e.style.zIndex=t[n];break;case"margin":e.style.margin=t[n];break;case"padding":e.style.padding=t[n];break;case"display":e.style.display=t[n];break;default:e.style[n]=t[n]}return this}setElementsStyle(e,t){return Array.isArray(e)?e.forEach((e=>{this.setElementStyle(e.elm,e.props)})):"string"==typeof e&&this.getElement(e,!0).forEach((e=>{this.setElementStyle(e,t)})),this}setElement(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);let r;if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"text":r="innerText"in document?"innerText":"textContent",e[r]=t[n];break;case"html":e.innerHTML=t[n];break;case"class":e.className=t[n];break;case"addClass":e.classList.add(t[n]);break;case"removeClass":e.classList.remove(t[n]);break;case"toggleClass":e.classList.toggle(t[n]);break;case"disabled":e.disabled=t[n];break;case"value":e.value=t[n];break;case"dispatch":e.dispatchEvent(t[n]);break;case"readonly":case"readOnly":e.readOnly=t[n];break;default:e.setAttribute(n,t[n])}return this}setElements(e=[]){return Array.isArray(e)&&e.forEach((e=>{this.setElement(e.elm,e.props)})),this}hasElement(e,t=10){return new Promise((n=>{let r=setInterval((()=>{let a=this.getElement(e);a&&(n(a),clearInterval(r)),(t-=!1)&&(n(!1),clearInterval(r))}),1e3)}))}insertElement(e,t){return this.getElement(t||"body").appendChild(this.getElement(e)),this}removeElement(e,t){return this.getElement(t||"body").removeChild(this.getElement(e)),t||this}onEvent(e,t,n,r=!1){let a=this.getElement(e);return window.addEventListener&&(a||window).addEventListener(t,n,r),this}eventFire(e,t,n,r={bubbles:!0,composed:!0}){return this.setElement(e,{text:n||"",dispatch:t?new InputEvent(t,r):new MouseEvent("mousedown",r)}),this}addStyle(e,t={}){const n={tag:"style",html:e,append:"head"};return this.createElement(Object.assign({},n,t)),this}};class n extends Date{addDays(e){let t=new n(this.valueOf());return t.setDate(t.getDate()+e),t}addMonths(e){let t=new n(this.valueOf());return t.setMonth(t.getMonth()+Number(e)),t}}const r={forVersion:/^\d+(?:(?:\.|-)\d+[A-Za-z]?)*$/,getVersion:/(?:@version\s*(\d+(?:(?:\.|-)\d+[A-Za-z]?)*))/,phonePattern:/^(?:[\+\d]?[\- \d]{10,})(?:\s|$)/,phoneValue:/^[0\+]*(?:(\d{9,})|([\d]{1,3}(?:[\- ]?[\d]{2,})+))(\s|$)/,datePattern:/\d{1,4}[\/|-|:]\d{1,2}[\/|-|:]\d{2,4}/,formatedDate:/^\d{4}[\/|-|:]\d{1,2}[\/|-|:]\d{1,2}$/,forFilename:/(?!\s*$)\s*(?:(gagal|error)|(?:\(?([0-9]*)\)?)|([^_]*))(?:_|\s|$)/g,xlsxFileCheck:/^app.*\/vnd\.open[^\.]*(?:[^]*\.sheet)$/},a={downloadBtnSvg:{type:"path",data:{fill:"currentColor",d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"}},checksSvg:{type:"polyline",data:{points:"1 1 5 5 9 1"}},groupDownloadBtnSvg:[{type:"path",data:{fill:"currentColor",d:"M18.948 11.112C18.511 7.67 15.563 5 12.004 5c-2.756 0-5.15 1.611-6.243 4.15-2.148.642-3.757 2.67-3.757 4.85 0 2.757 2.243 5 5 5h1v-2h-1c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.757 2.673-3.016l.581-.102.192-.558C8.153 8.273 9.898 7 12.004 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-2v2h2c2.206 0 4-1.794 4-4a4.008 4.008 0 0 0-3.056-3.888z"}},{type:"path",data:{fill:"currentColor",d:"M13.004 14v-4h-2v4h-3l4 5 4-5z"}}],wayFuSvg:[{type:"path",data:{class:"fill0",d:"M84 3c1,0 2,1 3,1 7,3 13,8 19,13 5,5 10,12 13,19 3,7 4,15 4,23 0,6 0,11 -2,16 -1,5 -3,10 -5,14l8 31 -32 -8c-4,3 -9,4 -14,6 -4,1 -9,1 -14,1l0 0c-6,0 -11,0 -16,-2l2 -5c1,1 2,1 3,1 3,1 7,1 11,1 2,0 4,0 6,0 3,-1 5,-1 7,-2 2,0 4,-1 7,-2 2,-1 4,-1 6,-3l1 -1 3 1 22 6 -6 -22 0 -2 1 -2c1,-2 2,-4 3,-7 1,-2 2,-4 2,-6 1,-3 1,-5 2,-7 0,-3 0,-5 0,-8 0,-3 0,-7 -1,-11 -1,-3 -2,-6 -3,-10l0 0c-2,-3 -3,-6 -5,-9 -2,-3 -4,-6 -7,-8 -2,-3 -5,-5 -8,-7 -3,-2 -6,-3 -9,-5l0 0c-1,0 -1,0 -1,0l0 -6zm-29 68c-1,-2 -3,-3 -4,-5 -3,-3 -6,-6 -9,-10 -17,-20 4,-40 20,-51 -6,1 -12,2 -19,5 -13,4 -25,14 -30,30 -1,1 -1,1 -1,2 -4,16 -3,29 2,39 5,13 15,22 22,26l19 -36zm7 -1c-5,-5 -10,-10 -16,-17 -20,-25 33,-51 33,-51 -15,-5 -61,-1 -72,38 -13,45 20,70 31,74l24 -44z"}},{type:"path",data:{class:"fill1",d:"M93 126l-1 0c0,0 0,0 0,1 -5,1 -9,1 -14,1l0 0c-5,0 -10,-1 -15,-2l1 0 0 0c5,0 10,0 14,-2 5,-1 10,-3 14,-5l12 3c-3,2 -7,3 -11,4l0 0zm-14 -116l0 -4c0,0 -2,1 -6,3 -11,7 -34,22 -31,38 2,-19 37,-37 37,-37z"}},{type:"path",data:{class:"fill2",fillRule:"nonzero",d:"M62 84l0 -8 -24 44c-9,-2 -32,-19 -34,-50 -2,35 25,55 34,58l24 -44z"}}]},s=[{element:"#wayfuPanel .menus",type:"click",event:"tabMenu"},{element:"#wayfuPanel textarea",type:"input",event:"updateText"},{element:"#_mode",type:"click",event:"textPreview"},{element:"#useImage",type:"click",event:"useImage"},{element:"#getFile",type:"change",event:"loadData"},{element:"#imgFile",type:"change",event:"imagePreview"},{element:"#_deleteImg",type:"click",event:"imagePreview"},{element:"#wayfuToggle",type:"click",event:"toggleApp"},{element:"._input input[type='range']",type:"input",event:"inputRange"},{element:"._input input[type='checkbox']",type:"change",event:"inputChecks"},{element:"._input select",type:"change",event:"inputSelects"},{element:"#_blast",type:"click",event:"runTasks"},{element:"div#app",type:"click",event:"checkChat"}],i={send:"#main span[data-testid^='send']",input:"#main div[contenteditable='true']",linkElm:"#wayfuPanel span#_api-link a",errModal:"#app div[data-testid$='popup'] div[role^='dialog']",chatMessage:"#main div.message-out"},o={year:"numeric",month:"long",day:"numeric"},l=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"WebClasses",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chat&&e.default.active?e.default:null},{id:"WebClasses2",conditions:e=>e.default&&"object"==typeof e.default&&e.default.menu&&e.default.active?e.default:null},{id:"WebClasses3",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chatHeader?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments?e.default:null},{id:"Debug",conditions:e=>e.Debug?e.Debug:null}],c=e=>"string"==typeof e?!isNaN(e)&&!isNaN(parseFloat(e)):"number"==typeof e,u=e=>new Promise((t=>{try{t(JSON.parse(e))}catch(e){t(null)}})),h=e=>{var t;return"string"==typeof e&&(e=c(e)?Number(e):"string"!=typeof(t=e)||"Invalid Date"===new Date(t).toString()||isNaN(new Date(t))?e:new n(e)),e},m=(e,t=!1)=>{let n=[];return e.split(" ").forEach((e=>{n.push(p(e))})),t?n.join(" "):n[0]},p=e=>(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1),f=(e,t=!0)=>new Date(e).toLocaleDateString("id-ID",Object.assign({},o,{weekday:t?"long":void 0}));class d{setProperties(e,t=!0){e=this.intoObject(e,t);for(let t in e)this.hasOwnProperty(t)&&(this[t]=e[t]);return this}serialize(e){if("object"==typeof e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURI(e[n]));return t.join("&")}return e.toString?e.toString():e}intoObject(e,t=!0){let n={};if(!e)return n;if("string"==typeof e?n=JSON.parse(e):Array.isArray(e)?e.forEach(((e,t)=>n[t]=e)):"object"==typeof e&&(n=e),0!==Object.keys(n).length)for(const e in n)n[e]=t?h(n[e]):n[e];return n}findObjectValue(e,t,n=2){if(!n)return null;let r=(t=t||this)[e];if(r)return r;n-=1;for(let a of Object.keys(t))t[a]&&"object"==typeof t[a]&&(r=this.findObjectValue(e,t[a],n));return r}}class g extends d{constructor(){super()}get appInfo(){return this.getInfo("script")}get managerName(){return"object"!=typeof GM_info?"function"==typeof GM_getMetadata?"Scriptish":"undefined"!=typeof GM_setValue&&"undefined"==typeof GM_getResourceText&&"undefined"==typeof GM_getResourceURL&&"undefined"==typeof GM_openInTab&&"undefined"==typeof GM_setClipboard?"NinjaKit":"Native":void 0!==GM_info.uuid?"Greasemonkey":void 0!==GM_info.scriptHandler?"Tampermonkey":void 0}getInfo(e=""){return GM_info?""===e?GM_info:this.findObjectValue(e,GM_info):null}getResource(e,t="text"){return"undefined"!=typeof GM_getResourceText&&"text"===t?GM_getResourceText(e):"undefined"!=typeof GM_getResourceURL&&"url"===t?GM_getResourceURL(e):void 0}deleteValue(e){if("undefined"!=typeof GM_deleteValue){const t=GM_listValues();for(const n of t)e&&e===n&&GM_deleteValue(n)}}setValue(e,t){"undefined"!=typeof GM_setValue&&GM_setValue(e,t)}getValue(e,t=null){if("undefined"!=typeof GM_listValues&&"undefined"!=typeof GM_getValue){const n=GM_listValues();if(0!==n.length&&n.some((t=>e===t)))return GM_getValue(e,t)}return t}request(e){e.url=e.url||this.appInfo.homepage,e.method=e.method||"GET",e.headers=e.headers||{},e.timeout=e.timeout||2e4,(e.data||"POST"==e.method)&&(e.method="POST",e.data=this.serialize(e.data||{}),e.headers=Object.assign({},e.headers,{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"}));const t=e.onload,n=e.onerror,r=e.ontimeout,a=e.onabort;e.onload=function(e){t(e)},e.onerror=function(e){console.log(`request error: ${e.error||"unknown error"}`),n(e)},e.ontimeout=function(e){console.log(`request error: ${e.error||"timed out"}`),r(e)},e.onabort=function(e){console.log(`request error: ${e.error||"aborted"}`),a(e)},"undefined"!=typeof GM_xmlhttpRequest?GM_xmlhttpRequest(e):console.log("XHR not Allowed!")}}const w=new class{constructor(){this.contens=0,this.element=t.createElement({tag:"div",id:"wayfu-modal",classid:"wfu-modal",role:"alert"})}construct(e,n="",r=!1){return new Promise((a=>{let s=`wfu-content-${this.contens+=1}`,i=t.createElement({tag:"div",classid:"wfu-modal-container",id:s});if(n&&t.createElement({tag:"h2",text:n,append:i}),e&&(e instanceof window.HTMLElement?t.insertElement(e,i):"string"==typeof e?t.createElement({tag:"p",html:e,append:i}):"object"==typeof e&&t.createElement(Object.assign({tag:"p",append:i},e))),r){let e=t.createElement({tag:"ul",classid:"wfu-buttons",append:i}),n=[{tag:"a",classid:"wfu-btn-ok",text:"Ya",event:{click:e=>{this.closed(e),a(!0)}}},{tag:"a",classid:"wfu-modal-close",text:"Tidak",event:{click:e=>{this.closed(e),a(!1)}}}];for(let r of n){let n=t.createElement({tag:"li",append:e});t.createElement(Object.assign({},r,{append:n}))}}else t.createElement({tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace wfu-modal-close",append:i,event:{click:this.closed}});t.onEvent(window,"click",this.closed).insertElement(i,this.element),this.show()}))}async alert(e,t=""){return await this.construct(e,t)}async confirm(e,t=""){return await this.construct(e,t,!0)}progressPanel(e,n=null){if(e){let e=`wfu-content-${this.contens+=1}`,r=t.createElement({tag:"div",classid:"wfu-modal-container progress-panel",id:e}),a=[{tag:"h2",text:"Pesanmu sedang dikirim"},{tag:"div",html:"<div class='waBar'></div>",classid:"waProgress"},{tag:"p",html:"Mengirim pesan ke <span class='curPhone'></span> (<span class='curNumb'></span>)"},{tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace",event:{click:n}}];r=t.createElements(a,r),t.insertElement(r,"#wayfu-modal"),this.show()}else{let e=t.getElement(".wfu-modal-container.progress-panel"),n=t.getElement(".wfu-modal-container",!0),r=t.getElement("#wayfu-modal");e&&t.removeElement(e,r),r&&0===n.length&&r.classList.remove("is-visible")}}show(){t.getElement("#wayfu-modal")||t.insertElement(this.element),t.getElement("#wayfu-modal").classList.add("is-visible")}closed(e){const n=e.target,r=t.getElement("#wayfu-modal"),a=t.getParents(n,".wfu-modal-container"),s=n.classList.contains("wfu-btn-ok");if(r&&(s||n.classList.contains("wfu-modal-close"))){0!==a.length&&t.removeElement(a[0],r);const e=t.getElement(".wfu-modal-container",!0);r&&0===e.length&&r.classList.remove("is-visible")}}};class v extends g{constructor(){super(),this.default={themeColor:"var(--butterbar-connection-background)",debug:!1,hasImage:!1,imageFile:null,useImage:!1,activeTab:0,targetBp:100,maxQueue:500,dateFormat:"auto",openPanel:!0,useCaption:"caption",userType:"umum",splitter:",",monthIndex:0,isFormat:!1,alert:!0,queueLimit:1e3,bpLimit:300,exportType:"csv",fileType:"csv"}}init(){const e=this.getValue("wayfu-options"),t=Object.assign({},this.default,this.intoObject(e));return Object.assign(v.prototype,this.default),this.setOptions(t).colorList()}setOptions(e){if(e!=={}){e=this.intoObject(e);for(let t in e)this.setOption(t,e[t])}return this}setOption(e,t){return t=h(t),(this.hasOwnProperty(e)||this.default.hasOwnProperty(e))&&(this[e]=t),this.fillList().save()}fillList(){return Object.entries(this).forEach((e=>{const[n,r]=e,a=t.getElement(`#${n}`);a&&("checkbox"==a.type?a.checked=r:a.value=r)})),t.getElement("._input input[type='range']",!0).forEach((e=>{t.setElements([{elm:e,props:{max:"maxQueue"==e.id?this.queueLimit:this.bpLimit}},{elm:t.getElement("output",e.parentElement),props:{text:e.value}}])})),"oriflame"===this.userType&&t.setElementStyle(".panel-options .oriflame",{display:"flex"}),this}colorList(){let e=this.getResource("clr");return e="string"==typeof e?JSON.parse(e):e,e=Array.isArray(e)?e:e.colors,e.forEach((e=>{let n={tag:"option",value:e.key,text:e.val,append:"select#themeColor"};t.createElement(n)})),this}save(){const t=new e("useImage","hasImage","imageFile","fileName","alert","bpLimit","queueLimit","debug","default"),n={};for(let e in this)this.default.hasOwnProperty(e)&&!t.isOnArray(e)&&(n[e]=this[e]);this.setValue("wayfu-options",n)}}const y=new v,b=new class extends g{constructor(){super(),this.today=new n,this.defaultOpt={method:"POST",url:`${this.appInfo.homepage}user/api`,headers:{"Content-Type":"application/json"}}}get isPremium(){return!!this.end&&this.today<this.end}get isTrial(){return!!this.expires&&this.attempt<5&&this.today<=this.expires}init(){const{id:e,name:t,pushname:n}=window.WAPI.Contact.getMeContact();return this.phone=Number(e.user)||"",this.name=t||n||"",this}gettingData(){return new Promise((e=>{let t=Object.assign({},this.defaultOpt,{data:JSON.stringify({phone:this.phone,version:this.appInfo.version}),onload:async t=>{const{status:n,responseText:r}=t;let a=null;200===n&&(a=await u(r)),b.setUser(a),e(200===n&&a)},onerror:e=>b.setUser(null),ontimeout:e=>b.setUser(null),onabort:e=>b.setUser(null)});this.request(t)}))}updateData(e){if(!e)return this;if((e=this.intoObject(e)).phone!==this.phone)return this;for(const t in e)"today"!==t&&(this[t]=e[t]);return this.end=this.reg&&this.mon?new n(this.reg).addMonths(this.mon):this.end||null,this}setUser(e){const t=e||this.getValue("wayfu-user");t&&null!=t&&""!==t&&(this.reset().updateData(t).save(),y.setOption("userType",this.type)),this.isPremium||this.isTrial?this.showAlert(this.isPremium?0:1):setTimeout((()=>{this.gettingData()}),2e4)}async check(){let e=this.isPremium||await this.tryApp();return e||this.showAlert(2,!0),e}async tryApp(){return this.expires||this.isTrial?this.isTrial:!!await w.confirm("Coba WayFu Gratis!","Apakah Anda mau mencoba 2 hari Trial?")&&await this.updateTrial()}updateTrial(e="add"){const t={version:this.appInfo.version,phone:this.phone,name:this.name,action:e},r=(e=>{let t=new n(this.today).addDays(2).toLocaleString("id-ID"),r=this.attempt+=1;return"add"===e?{expires:t}:{attempt:r}})(e);return new Promise(((e,n)=>{let a=Object.assign({},this.defaultOpt,{data:JSON.stringify(Object.assign({},t,r)),onload:async t=>{const{status:n,responseText:r}=t;let a=null;200===n&&(a=await u(r)),b.setUser(a),e(200===n&&a)},onerror:t=>e(!1),ontimeout:t=>e(!1),onabort:t=>e(!1)});this.request(a)}))}showAlert(e,t=!1){const n=[{title:`Halo kak ${m(this.name,!0)}!`,text:`Selamat menggunakan fitur Pengguna Premium.\n\n                Masa aktif Kakak berakhir hari ${f(this.end)} ya...`},{title:`Halo! Selamat Datang di ${this.appInfo.name}!`,text:`Anda dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi,\n                Masa Trial Anda berakhir hari ${f(this.expires)} ya...`},{title:`${this.appInfo.name} - Fitur Premium`,text:"Maaf, fitur ini hanya untuk Pengguna Premium. Informasi lebih lanjut, silahkan hubungi saya."},{title:`${this.appInfo.name} - Trial Mode`,text:`Saat ini Anda sedang menggunakan versi Trial. Anda masih dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi.`},{title:`${this.appInfo.name} - Trial Mode`,text:"Masa Trial Anda sudah berakhir. Silahkan berlanganan untuk menggunakan fitur premium."}],{title:r,text:a}=n[e];let s=y.alert||t?(w.alert(a,r),!1):y.alert;y.setOption("alert",s)}reset(){const t=new e("attempt","type","reg","mon","end","expires");for(let e in this)this.hasOwnProperty(e)&&t.isOnArray(e)&&delete this[e];return this.init()}save(){const t=new e("name","phone","attempt","type","reg","mon","end","expires"),n={};for(let e in this)this.hasOwnProperty(e)&&t.isOnArray(e)&&(n[e]=(r=this[e])instanceof Date?r.toISOString():r);var r;this.setValue("wayfu-user",n)}},E=new class extends d{constructor(){super(),this.room=null,this.classId={active:"",header:""}}get isGroup(){return!!this.selected&&this.room.isGroup}get groupMetadata(){return this.selected&&this.isGroup?this.room.groupMetadata:null}get contact(){return this.room?this.room.contact:null}get selected(){return!!this.room}init(){const{active:e}=window.WAPI.WebClasses,{chatHeader:t}=window.WAPI.WebClassesV2;return this.classId={active:e,header:t},this}selectChat(){return this.room=(e=>{let n;for(let r in e)if(n=((e,t)=>{if(!e)return null;e="active"===t?e.offsetParent:e.parentNode;for(let t of Object.keys(e)){let n=this.findObjectValue("children",e[t]);if(!n)continue;let{chat:r,active:a}=this.findObjectValue("props",n);return a?a.value:r}})(t.getElement(`.${e[r]}`),r),n)return n})(this.classId),this}};var x=Uint8Array,k=Uint16Array,S=Uint32Array,C=new x([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A=new x([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M=new x([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=function(e,t){for(var n=new k(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new S(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return[n,a]},$=T(C,2),O=$[0],_=$[1];O[28]=258,_[258]=28;for(var I=T(A,0),P=I[0],L=I[1],N=new k(32768),D=0;D<32768;++D){var j=(43690&D)>>>1|(21845&D)<<1;j=(61680&(j=(52428&j)>>>2|(13107&j)<<2))>>>4|(3855&j)<<4,N[D]=((65280&j)>>>8|(255&j)<<8)>>>1}var R=function(e,t,n){for(var r=e.length,a=0,s=new k(t);a<r;++a)e[a]&&++s[e[a]-1];var i,o=new k(t);for(a=0;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(n){i=new k(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)i[N[h]>>>l]=c}else for(i=new k(r),a=0;a<r;++a)e[a]&&(i[a]=N[o[e[a]-1]++]>>>15-e[a]);return i},F=new x(288);for(D=0;D<144;++D)F[D]=8;for(D=144;D<256;++D)F[D]=9;for(D=256;D<280;++D)F[D]=7;for(D=280;D<288;++D)F[D]=8;var V=new x(32);for(D=0;D<32;++D)V[D]=5;var U=R(F,9,0),z=R(F,9,1),G=R(V,5,0),q=R(V,5,1),B=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},H=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},W=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},X=function(e){return(e+7)/8|0},Z=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?k:4==e.BYTES_PER_ELEMENT?S:x)(n-t);return r.set(e.subarray(t,n)),r},K=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Y=function(e,t,n){var r=new Error(t||K[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Y),!n)throw r;return r},J=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Q=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},ee=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,s=n.slice();if(!a)return[oe,0];if(1==a){var i=new x(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var m=s[0].s;for(r=1;r<a;++r)s[r].s>m&&(m=s[r].s);var p=new k(m+1),f=te(n[u-1],p,0);if(f>t){r=0;var d=0,g=f-t,w=1<<g;for(s.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<a;++r){var v=s[r].s;if(!(p[v]>t))break;d+=w-(1<<f-p[v]),p[v]=t}for(d>>>=g;d>0;){var y=s[r].s;p[y]<t?d-=1<<t-p[y]++-1:++r}for(;r>=0&&d;--r){var b=s[r].s;p[b]==t&&(--p[b],++d)}f=t}return[new x(p),f]},te=function(e,t,n){return-1==e.s?Math.max(te(e.l,t,n+1),te(e.r,t,n+1)):t[e.s]=n},ne=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new k(++t),r=0,a=e[0],s=1,i=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return[n.subarray(0,r),t]},re=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},ae=function(e,t,n){var r=n.length,a=X(t+2);e[a]=255&r,e[a+1]=r>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<r;++s)e[a+s+4]=n[s];return 8*(a+4+r)},se=function(e,t,n,r,a,s,i,o,l,c,u){J(t,u++,n),++a[256];for(var h=ee(a,15),m=h[0],p=h[1],f=ee(s,15),d=f[0],g=f[1],w=ne(m),v=w[0],y=w[1],b=ne(d),E=b[0],x=b[1],S=new k(19),T=0;T<v.length;++T)S[31&v[T]]++;for(T=0;T<E.length;++T)S[31&E[T]]++;for(var $=ee(S,7),O=$[0],_=$[1],I=19;I>4&&!O[M[I-1]];--I);var P,L,N,D,j=c+5<<3,z=re(a,F)+re(s,V)+i,q=re(a,m)+re(s,d)+i+14+3*I+re(S,O)+(2*S[16]+3*S[17]+7*S[18]);if(j<=z&&j<=q)return ae(t,u,e.subarray(l,l+c));if(J(t,u,1+(q<z)),u+=2,q<z){P=R(m,p,0),L=m,N=R(d,g,0),D=d;var B=R(O,_,0);for(J(t,u,y-257),J(t,u+5,x-1),J(t,u+10,I-4),u+=14,T=0;T<I;++T)J(t,u+3*T,O[M[T]]);u+=3*I;for(var H=[v,E],W=0;W<2;++W){var X=H[W];for(T=0;T<X.length;++T){var Z=31&X[T];J(t,u,B[Z]),u+=O[Z],Z>15&&(J(t,u,X[T]>>>5&127),u+=X[T]>>>12)}}}else P=U,L=F,N=G,D=V;for(T=0;T<o;++T)if(r[T]>255){Z=r[T]>>>18&31,Q(t,u,P[Z+257]),u+=L[Z+257],Z>7&&(J(t,u,r[T]>>>23&31),u+=C[Z]);var K=31&r[T];Q(t,u,N[K]),u+=D[K],K>3&&(Q(t,u,r[T]>>>5&8191),u+=A[K])}else Q(t,u,P[r[T]]),u+=L[r[T]];return Q(t,u,P[256]),u+L[256]},ie=new S([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oe=new x(0),le=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),ce=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=le[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},ue=function(e,t,n,r,a){return function(e,t,n,r,a,s){var i=e.length,o=new x(r+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(r,o.length-a),c=0;if(!t||i<8)for(var u=0;u<=i;u+=65535){var h=u+65535;h>=i&&(l[c>>3]=s),c=ae(l,c+1,e.subarray(u,h))}else{for(var m=ie[t-1],p=m>>>13,f=8191&m,d=(1<<n)-1,g=new k(32768),w=new k(d+1),v=Math.ceil(n/3),y=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&d},E=new S(25e3),M=new k(288),T=new k(32),$=0,O=0,I=(u=0,0),P=0,N=0;u<i;++u){var D=b(u),j=32767&u,R=w[D];if(g[j]=R,w[D]=j,P<=u){var F=i-u;if(($>7e3||I>24576)&&F>423){c=se(e,l,0,E,M,T,O,I,N,u-N,c),I=$=O=0,N=u;for(var V=0;V<286;++V)M[V]=0;for(V=0;V<30;++V)T[V]=0}var U=2,z=0,G=f,q=j-R&32767;if(F>2&&D==b(u-q))for(var B=Math.min(p,F)-1,H=Math.min(32767,u),W=Math.min(258,F);q<=H&&--G&&j!=R;){if(e[u+U]==e[u+U-q]){for(var K=0;K<W&&e[u+K]==e[u+K-q];++K);if(K>U){if(U=K,z=q,K>B)break;var Y=Math.min(q,K-2),J=0;for(V=0;V<Y;++V){var Q=u-q+V+32768&32767,ee=Q-g[Q]+32768&32767;ee>J&&(J=ee,R=Q)}}}q+=(j=R)-(R=g[j])+32768&32767}if(z){E[I++]=268435456|_[U]<<18|L[z];var te=31&_[U],ne=31&L[z];O+=C[te]+A[ne],++M[257+te],++T[ne],P=u+U,++$}else E[I++]=e[u],++M[e[u]]}}c=se(e,l,s,E,M,T,O,I,N,u-N,c),!s&&7&c&&(c=ae(l,c+1,oe))}return Z(o,0,r+X(c)+a)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!a)},he=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},me=function(e,t){return e[t]|e[t+1]<<8},pe=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},fe=function(e,t){return pe(e,t)+4294967296*pe(e,t+4)},de=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function ge(e,t){return ue(e,t||{},0,0)}function we(e,t){return function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new x(0);var a=!t||n,s=!n||n.i;n||(n={}),t||(t=new x(3*r));var i=function(e){var n=t.length;if(e>n){var r=new x(Math.max(2*n,e));r.set(t),t=r}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,m=n.m,p=n.n,f=8*r;do{if(!u){o=H(e,l,1);var d=H(e,l+1,3);if(l+=3,!d){var g=e[(I=X(l)+4)-4]|e[I-3]<<8,w=I+g;if(w>r){s&&Y(0);break}a&&i(c+g),t.set(e.subarray(I,w),c),n.b=c+=g,n.p=l=8*w,n.f=o;continue}if(1==d)u=z,h=q,m=9,p=5;else if(2==d){var v=H(e,l,31)+257,y=H(e,l+10,15)+4,b=v+H(e,l+5,31)+1;l+=14;for(var E=new x(b),k=new x(19),S=0;S<y;++S)k[M[S]]=H(e,l+3*S,7);l+=3*y;var T=B(k),$=(1<<T)-1,_=R(k,T,1);for(S=0;S<b;){var I,L=_[H(e,l,$)];if(l+=15&L,(I=L>>>4)<16)E[S++]=I;else{var N=0,D=0;for(16==I?(D=3+H(e,l,3),l+=2,N=E[S-1]):17==I?(D=3+H(e,l,7),l+=3):18==I&&(D=11+H(e,l,127),l+=7);D--;)E[S++]=N}}var j=E.subarray(0,v),F=E.subarray(v);m=B(j),p=B(F),u=R(j,m,1),h=R(F,p,1)}else Y(1);if(l>f){s&&Y(0);break}}a&&i(c+131072);for(var V=(1<<m)-1,U=(1<<p)-1,G=l;;G=l){var K=(N=u[W(e,l)&V])>>>4;if((l+=15&N)>f){s&&Y(0);break}if(N||Y(2),K<256)t[c++]=K;else{if(256==K){G=l,u=null;break}var J=K-254;if(K>264){var Q=C[S=K-257];J=H(e,l,(1<<Q)-1)+O[S],l+=Q}var ee=h[W(e,l)&U],te=ee>>>4;if(ee||Y(3),l+=15&ee,F=P[te],te>3&&(Q=A[te],F+=W(e,l)&(1<<Q)-1,l+=Q),l>f){s&&Y(0);break}a&&i(c+131072);for(var ne=c+J;c<ne;c+=4)t[c]=t[c-F],t[c+1]=t[c+1-F],t[c+2]=t[c+2-F],t[c+3]=t[c+3-F];c=ne}}n.l=u,n.p=G,n.b=c,n.f=o,u&&(o=1,n.m=m,n.d=h,n.n=p)}while(!o);return c==t.length?t:Z(t,0,c)}(e,t)}var ve=function(e,t,n,r){for(var a in e){var s=e[a],i=t+a,o=r;Array.isArray(s)&&(o=he(r,s[1]),s=s[0]),s instanceof x?n[i]=[s,o]:(n[i+="/"]=[new x(0),o],ve(s,i,n,r))}},ye="undefined"!=typeof TextEncoder&&new TextEncoder,be="undefined"!=typeof TextDecoder&&new TextDecoder;try{be.decode(oe,{stream:!0})}catch(e){}function Ee(e,t){if(t){for(var n=new x(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(ye)return ye.encode(e);var a=e.length,s=new x(e.length+(e.length>>1)),i=0,o=function(e){s[i++]=e};for(r=0;r<a;++r){if(i+5>s.length){var l=new x(i+8+(a-r<<1));l.set(s),s=l}var c=e.charCodeAt(r);c<128||t?o(c):c<2048?(o(192|c>>6),o(128|63&c)):c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|63&c)):(o(224|c>>12),o(128|c>>6&63),o(128|63&c))}return Z(s,0,i)}function xe(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(be)return be.decode(e);var a=function(e){for(var t="",n=0;;){var r=e[n++],a=(r>127)+(r>223)+(r>239);if(n+a>e.length)return[t,Z(e,n-1)];a?3==a?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&a?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}}(e),s=a[0];return a[1].length&&Y(8),s}var ke=function(e,t){return t+30+me(e,t+26)+me(e,t+28)},Se=function(e,t,n){var r=me(e,t+28),a=xe(e.subarray(t+46,t+46+r),!(2048&me(e,t+8))),s=t+46+r,i=pe(e,t+20),o=n&&4294967295==i?Ce(e,s):[i,pe(e,t+24),pe(e,t+42)],l=o[0],c=o[1],u=o[2];return[me(e,t+10),l,c,a,s+me(e,t+30)+me(e,t+32),u]},Ce=function(e,t){for(;1!=me(e,t);t+=4+me(e,t+2));return[fe(e,t+12),fe(e,t+4),fe(e,t+20)]},Ae=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&Y(9),t+=r+4}return t},Me=function(e,t,n,r,a,s,i,o){var l=r.length,c=n.extra,u=o&&o.length,h=Ae(c);de(e,t,null!=i?33639248:67324752),t+=4,null!=i&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(s<0&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var m=new Date(null==n.mtime?Date.now():n.mtime),p=m.getFullYear()-1980;if((p<0||p>119)&&Y(10),de(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,-1!=s&&(de(e,t,n.crc),de(e,t+4,s<0?-s-2:s),de(e,t+8,n.size)),de(e,t+12,l),de(e,t+14,h),t+=16,null!=i&&(de(e,t,u),de(e,t+6,n.attrs),de(e,t+10,i),t+=14),e.set(r,t),t+=l,h)for(var f in c){var d=c[f],g=d.length;de(e,t,+f),de(e,t+2,g),e.set(d,t+4),t+=4+g}return u&&(e.set(o,t),t+=u),t};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const Te=/.+\:/,$e=(t,n,r=!1)=>{let a=new e;for(let e of t.childNodes)1===e.nodeType&&Oe(e)===n&&a.push(e);return r?a:a.shift()},Oe=e=>e.tagName.replace(Te,""),_e=(e,t)=>{if(Array.isArray(t))t.forEach((t=>{_e(e,t)}));else{let{name:n,value:r}=t;void 0!==n&&void 0!==r&&e.setAttribute(n,r)}return e},Ie=e=>{if(1!==e.nodeType)return e.textContent;const{attributes:t,childNodes:n}=e,r=t.map((e=>`${e.name}="${e.value}"`)).join(" "),a=Oe(e);let s="";return n.forEach((e=>s+=Ie(e))),`<${a} ${r}>${s}</${a}>`};function Pe(e,t,n){let r=0;for(let a of e.childNodes)t?1===a.nodeType&&Oe(a)===t&&n(a,r):n(a,r),r++}function Le(e){const[t,n]=[new DOMParser,new XMLSerializer],r=document.implementation.createDocument(null,"",null),a=(e=>{if(!e)return null;let{tag:t,attributes:n}="string"==typeof(a=e)?{tag:a,attributes:null}:a;var a;let s=r.createElement(t.trim());return n&&void 0!==n?_e(s,n):s})(e);return a&&r.appendChild(a),(e=>{const r=`<?xml version="1.0" encoding="utf-8" standalone="yes"?>\n${n.serializeToString(e)}`;return t.parseFromString(r,"application/xml")})(r)}function Ne(e,t){let{tag:n,attributes:r,value:a}="string"==typeof(s=e)?{tag:s,attributes:null,value:null}:s;var s;let i=t.createElement(n.trim());return a&&(i.textContent=`${a}`),r&&void 0!==r?_e(i,r):i}function De(e,t,n=null){let r=n?n instanceof Element?n:e.getElementsByTagName(n)[0]:e.childNodes[0];if(Array.isArray(t))t.forEach((t=>{De(e,t,r)}));else{let n=(a=t)instanceof Element?a:Ne(t,e);r.appendChild(n)}var a;return e}class je{constructor(){}static getCells(t){let n=$e(t.documentElement,"sheetData"),r=new e;return Pe(n,"row",(e=>{Pe(e,"c",(e=>{r.push(e)}))})),r}static getMergedCells(t){let n=$e(t.documentElement,"mergeCells"),r=new e;return n&&Pe(n,"mergeCell",(function(e){r.push(e.getAttribute("ref"))})),r}static getCellValue(e){return $e(e,"v")}static getCellInlineStringValue(e){if(e.firstChild&&"is"===Oe(e.firstChild)&&e.firstChild.firstChild&&"t"===Oe(e.firstChild.firstChild))return e.firstChild.firstChild.textContent}static getDimensions(e){let t=$e(e.documentElement,"dimension");return!!t&&t.getAttribute("ref")}static getSharedStrings(t){return function(t,n,r){let a=new e;return Pe(t,"si",(function(e,t){a.push(function(e){const t=$e(e,"t");if(t)return t.textContent;let n="";return Pe(e,"r",(function(e){n+=$e(e,"t").textContent})),n}(e))})),a}(t.documentElement)}static getBaseStyles(t){let n=$e(t.documentElement,"cellStyleXfs");return n?$e(n,"xf",!0):new e}static getNumberFormats(t){let n=$e(t.documentElement,"numFmts");return n?$e(n,"numFmt",!0):new e}static getWorkbookProperties(e){return $e(e.documentElement,"workbookPr")}static getCellStyles(t){let n=$e(t.documentElement,"cellXfs");return n?$e(n,"xf",!0):new e}static getRelationships(e){return $e(e.documentElement,"Relationship",!0)}static getSheets(t){let n=$e(t.documentElement,"sheets");return n?$e(n,"sheet",!0):new e}}function Re(e){let[t,n]=e.split(/(\d+)/);return[parseInt(n),Ue(t.trim())]}function Fe(e,t,n){let{inlineStringValue:r,inlineStringXml:a,styleId:s,styles:i,values:o,properties:l,options:c}=n;switch(t=t||"n"){case"str":e=Ve(e,c);break;case"inlineStr":if(!(e=r()))throw new Error(`Unsupported "inline string" cell value structure: ${a()}`);e=Ve(e,c);break;case"s":let n=Number(e);if(isNaN(n))throw new Error(`Invalid "shared" string index: ${e}`);if(n>=o.length)throw new Error(`An out-of-bounds "shared" string index: ${e}`);e=Ve(o[n],c);break;case"b":if(!/^(?:0|1)?$/g.test(e))throw new Error(`Unsupported "boolean" cell value: ${e}`);e="1"===e;break;case"z":e=void 0;break;case"e":e={0:"#NULL!",7:"#DIV/0",23:"#VALUE!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA"}[u=e]||`#ERROR_${u}`;break;case"d":if(void 0===e)break;let h=new Date(e);if(isNaN(h.valueOf()))throw new Error(`Unsupported "date" cell value: ${e}`);e=h;break;case"n":if(void 0===e)break;let m=Number(e);if(isNaN(m))throw new Error(`Invalid "numeric" cell value: ${e}`);e=function(e,t,n){const r=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],a=/^\[\$-414\]/,s=/;@$/,i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"],{dateFormat:o,smartDateParser:l}=n;if(e){let n=t[e];if(!n)throw new Error(`Cell style not found: ${e}`);let{numberFormat:c}=n||t,{id:u,template:h}=c;if(r.indexOf(parseInt(u))>=0||o&&h===o||!1!==l&&h&&(e=>{e=e.toLowerCase().replace(a,"").replace(s,"");for(let t of e.split(/\W+/))if(i.indexOf(t)<0)return!1;return!0})(h))return!0}return!1}(s(),i,c)?function(e,t){t&&t.epoch1904&&(e+=1462);return new Date(Math.round(24*(e-25569)*36e5))}(m,l):m;break;default:throw new TypeError(`Cell type not supported: ${t}`)}var u;return e||null}function Ve(e,t){let{trim:n}=t;return(e=!1!==n?e.trim():e)||void 0}function Ue(e){const t=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return((e,n)=>{for(let r of n)e=26*e+t.indexOf(r);return e})(0,e)}function ze(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function Ge(e,t,n,r,a){let s=ze(e),i=function(e,t,n,r,a){let s=je.getCells(e);return s.isEmpty?s:s.map((e=>(e=>{let[s,i]=Re(e.getAttribute("r")),o=je.getCellValue(e);return{row:s,column:i,value:Fe(o&&o.textContent,e.getAttribute("t"),{inlineStringValue:()=>je.getCellInlineStringValue(e),inlineStringXml:()=>Ie(e),styleId:()=>e.getAttribute("s"),styles:n,values:t,properties:r,options:a})}})(e)))}(s,t,n,r,a),o=function(e){let t=je.getDimensions(e);if(t){let e=t.split(":").map(Re).map((e=>{let[t,n]=e;return{row:t,column:n}}));return 1===e.length&&(e=[e[0],e[0]]),e}return null}(s)||function(e){const t=(e,t)=>e-t,n=n=>{let r=e.map((e=>e[n])).sort(t);return[r.shift(),r.pop()]};let[r,a]=n("row"),[s,i]=n("column");return[{row:r,column:s},{row:a,column:i}]}(i);return{cells:i,dimensions:o}}var qe=__webpack_require__(162);function Be(e="",t=""){const n=e&&"worksheet"===e,r=n?"worksheets/sheet1.xml":"xl/workbook.xml",a="http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+(n?"worksheet":"officeDocument");t=n?t||"rId3":"rId1";const s=Le({tag:"Relationships",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/relationships"}});return De(s,Ne({tag:"Relationship",attributes:[{name:"Id",value:t},{name:"Type",value:a},{name:"Target",value:r}]},s),"Relationships")}function He(e="Sheet1",t="rId3"){const n=Le({tag:"workbook",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return De(n,["workbookPr",((e,t,n)=>{const r=[{name:"state",value:"visible"},{name:"name",value:e},{name:"sheetId",value:1},{name:"r:id",value:t}],a=Ne("sheets",n),s=Ne({tag:"sheet",attributes:r},n);return a.appendChild(s),a})(e||"Sheet1",t||"rId3",n),"definedNames","calcPr"],"workbook")}const We=(t,n)=>{const r=Ne("sheetData",n);return t.forEach(((t,a)=>{t=(e=>e.every((e=>(e=>!!e&&"string"!=typeof e&&"number"!=typeof e&&!(!e.type||!e.value))(e)))?e:e.map((e=>"number"==typeof e?{value:e,type:"number"}:{value:e.toString(),type:"string"})))(t),r.appendChild(((t,n,r)=>{const a=n+1,s=Ne({tag:"row",attributes:{name:"r",value:`${a}`}},r);return t.forEach(((t,n)=>{s.appendChild(((t,n,r,a)=>{const s=((e,t)=>{const n=e=>{if("number"!=typeof e)return"";const t=Math.floor(e/26),r=String.fromCharCode(97+e%26).toUpperCase();return 0===t?r:n(t-1)+r};return`${n(e)}${t}`})(n,r),i=Ne({tag:"c",attributes:(({type:t})=>{let n=new e({name:"r",value:s});return"string"===t&&n.push({name:"t",value:"inlineStr"}),n})(t)},a),o=(e=>{const[t,n]=(({type:e,value:t})=>[t,"string"===e?{tag:"is"}:{tag:"v",value:t}])(e);let r=Ne(n,a);return"string"===e.type&&r.appendChild(Ne({tag:"t",value:t},a)),r})(t);return i.appendChild(o),i})(t,n,a,r))})),s})(t,a,n))})),r},Xe=De(Le({tag:"Types",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/content-types"}}),[{tag:"Default",attributes:[{name:"Extension",value:"xml"},{name:"ContentType",value:"application/xml"}]},{tag:"Default",attributes:[{name:"Extension",value:"rels"},{name:"ContentType",value:"application/vnd.openxmlformats-package.relationships+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/workbook.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/worksheets/sheet1.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}]}],"Types"),Ze=Be(),Ke=function(e){const t=Le({tag:"worksheet",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return De(t,We(e,t),"worksheet")};function Ye(e){const{filename:t,sheetname:n,data:r}=e,{data:a,rels:s}=((e="Sheet1",t="rId3")=>({data:He(e,t),rels:Be("worksheet")}))(n);let i=function(e,t){t||(t={});var n={},r=[];ve(e,"",n,t);var a=0,s=0;for(var i in n){var o=n[i],l=o[0],c=o[1],u=0==c.level?0:8,h=(S=Ee(i)).length,m=c.comment,p=m&&Ee(m),f=p&&p.length,d=Ae(c.extra);h>65535&&Y(11);var g=u?ge(l,c):l,w=g.length,v=ce();v.p(l),r.push(he(c,{size:l.length,crc:v.d(),c:g,f:S,m:p,u:h!=i.length||p&&m.length!=f,o:a,compression:u})),a+=30+h+d+w,s+=76+2*(h+d)+(f||0)+w}for(var y=new x(s+22),b=a,E=s-a,k=0;k<r.length;++k){var S=r[k];Me(y,S.o,S,S.f,S.u,S.c.length);var C=30+S.f.length+Ae(S.extra);y.set(S.c,S.o+C),Me(y,a,S,S.f,S.u,S.c.length,S.o,S.m),a+=16+C+(S.m?S.m.length:0)}return function(e,t,n,r,a){de(e,t,101010256),de(e,t+8,n),de(e,t+10,n),de(e,t+12,r),de(e,t+16,a)}(y,a,r.length,E,b),y}({"[Content_Types].xml":Je(Xe),_rels:{".rels":Je(Ze)},xl:{"workbook.xml":Je(a),_rels:{"workbook.xml.rels":Je(s)},worksheets:{"sheet1.xml":Je(Ke(r))}}});(0,qe.saveAs)(new Blob([i]),`${t}.xlsx`)}function Je(e){return Ee(function(e){return(new XMLSerializer).serializeToString(e).replace(/\s?xmlns=""/g,"")}(e))}const Qe=t=>{if(r.formatedDate.test(t[0]))return 2;let n=new e,a=new e;return t.forEach(((e,t)=>{[n[t],a[t]]=e.split(/\/|:|-/)})),n.some((e=>e>12))||a.some((e=>e>12))?n.some((e=>e>12))?1:0:n.countValue(n[0])>a.countValue(a[0])?0:1};class et{constructor(){this.types=new e("gagal","error"),this.fileName={fname:[],ftype:"",numb:1,ext:".csv"},this.options=((e,t,n="key")=>{let r=Array.isArray(t)?t:[t];return Object.fromEntries(Object.entries(e).filter((([e,t])=>{let a="key"==n?e:t;return r.some((e=>a===e))})))})(y.default,["monthIndex","splitter"])}async import(e){if(!e)return this;this.constructFileName(e.name);const t=await((e,{xlsxFileCheck:t},{ext:n})=>t.test(e.type)&&/xlsx/.test(n)?e.arrayBuffer():e.text())(e,r,this.fileName);return t?this.readData(t):this}constructFileName(e){let[t,n]=e.split(".");const a={fname:[],ftype:"",numb:1,ext:`.${n||"csv"}`};t.replace(r.forFilename,((e,t,n,r)=>(void 0!==r&&a.fname.push(r),void 0!==t&&this.types.isOnArray(t)&&(a.ftype=t||""),void 0!==n&&(a.numb=c(n)?Number(n):1),""))),this.fileName=Object.assign({},this.fileName,a)}async readData(t){const n="string"==typeof t?t.split(/\r\n|\r|\n/):await this.handleExcel(t),a=(([e,...t])=>"string"==typeof(e=e||t[0])&&((e=>{let t=String.raw`^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*)*$`;return new RegExp(t).test(e)})(e)?",":";"))(n),s=new e,i=new e;return n.forEach((e=>{let t=(e=>(e=>{if(e.isEmpty)return!1;const t=e=>r.phonePattern.test(e);return!!e.some(((e,n)=>t(e)&&0!==n))&&(e.forEach(((n,a)=>{var s,i;e[a]=/^"(.*)"$/.test(n)?n.replace(/(^")|("$)/g,""):e[a],e[a]=t(n)?(i="string"==typeof(i=n)?i:Array.isArray(i)?i.join(""):i.toString()).replace(r.phoneValue,(function(e,t,n,r){let a=void 0!==t?t:n.replace(/(\-| )/g,"");return("8"===a.charAt(0)&&"+"!==e.charAt(0)?"62":"")+a})):c(n)?Number(n).toString():n instanceof Date?[(s=n).getDate(),s.getMonth()+1,s.getFullYear()].join("/"):e[a]})),e)})(Array.isArray(e)?e:this.toArray(e,a)))(e);if(t){s.push(t);let n=(e=>{if("string"==typeof e)return(e=r.datePattern.exec(e))?e.toString():null;let[t]=e.filter((e=>r.datePattern.test(e)));return t?t.toString():null})(e);n&&i.push(n)}})),this.options=Object.assign({},this.options,{monthIndex:!i.isEmpty&&Qe(i),splitter:a||this.options.splitter}),a&&y.setOption("splitter",a),this.data=s.filter((e=>!e.isEmpty)),this}async handleExcel(t,n={}){let r=Object.assign({},{sheet:1},n);return await async function(t,n={}){n=Object.assign({},n);const r=await async function(e){if(!(e=e instanceof File||e instanceof Blob?await e.arrayBuffer():e))return{};const t=function(e,t){for(var n={},r=e.length-22;101010256!=pe(e,r);--r)(!r||e.length-r>65558)&&Y(13);var a=me(e,r+8);if(!a)return{};var s=pe(e,r+16),i=4294967295==s||65535==a;if(i){var o=pe(e,r-12);(i=101075792==pe(e,o))&&(a=pe(e,o+32),s=pe(e,o+48))}for(var l=t,c=0;c<a;++c){var u=Se(e,s,i),h=u[0],m=u[1],p=u[2],f=u[3],d=u[4],g=u[5],w=ke(e,g);s=d,l&&!l({name:f,size:m,originalSize:p,compression:h})||(h?8==h?n[f]=we(e.subarray(w,w+m),new x(p)):Y(14,"unknown compression type "+h):n[f]=Z(e,w,w+m))}return n}(new Uint8Array(e)),n=new Map;for(let e of Object.keys(t))n.set(e,xe(t[e]));return n}(t);return function(t,n={sheet:1}){let{sheet:r}=n;const a=e=>{if(!t.has(e))throw new Error(`"${e}" file not found inside the *.xlsx file zip archive`);return t.get(e)},s=function(e){let t=ze(e),n={sheets:{},sharedStrings:void 0,styles:void 0};const r=e=>"/"===e[0]?e.slice("/".length):`xl/${e}`;return je.getRelationships(t).forEach((e=>{let t=e.getAttribute("Target");switch(e.getAttribute("Type")){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[e.getAttribute("Id")]=r(t)}})),n}(a("xl/_rels/workbook.xml.rels")),i=s.sharedStrings?(u=a(s.sharedStrings))?je.getSharedStrings(ze(u)):new e:[],o=s.styles?function(e){if(!e)return{};const t=(e,t)=>{let n={};if(e.hasAttribute("numFmtId")){let r=e.getAttribute("numFmtId");n.numberFormat=t[r]??{id:r}}return n};let n=ze(e),r=je.getBaseStyles(n).map(t),a=je.getNumberFormats(n).map((e=>({id:e.getAttribute("numFmtId"),template:e.getAttribute("formatCode")}))).reduce(((e,t)=>(e[t.id]=t,e)),[]);return je.getCellStyles(n).map((e=>e.hasAttribute("xfId")?Object.assign({},r[e.xfId],t(e,a)):t(e,a)))}(a(s.styles)):{},l=function(t){let n=ze(t),r=je.getWorkbookProperties(n),a={};return r&&"1"===r.getAttribute("date1904")&&(a.epoch1904=!0),a.sheets=new e,je.getSheets(n).forEach((e=>{e.getAttribute("name")&&a.sheets.push({id:e.getAttribute("sheetId"),name:e.getAttribute("name"),relationId:e.getAttribute("r:id")})})),a}(a("xl/workbook.xml")),c=function(e,t){if("number"==typeof e){let{relationId:n}=t[e-1];return n}for(let{name:n,relationId:r}of t)if(n===e)return r}(r,l.sheets);var u;if(!c||!s.sheets[c])throw function(e,t){const n=t.map((({name:e},t)=>`"${e}" (#${t+1})`)).join(", ");return new Error(`Sheet ${"number"==typeof e?`#${e}`:`"${e}"`} not found in the *.xlsx file.`.concat(t?` Available sheets: ${n}."`:""))}(r,l.sheets);return function(t,n){let{dimensions:r,cells:a}=t,{transformData:s}=n;if(a.isEmpty)return[];let[i,o]=r,{row:l,column:c}=o,u=new e(l);for(let{row:t,column:n,value:r}of a)t-=1,n-=1,n<c&&t<l&&(u[t]||(u[t]=new e),u[t][n]=r);return s?s(u):u}(Ge(a(s.sheets[c]),i,o,l,n),n)}(r,n)}(t,r)}toArray(t,n=","){let r=new e;return t.replace(((e=",",t="")=>{let n=","==e?`${e};`:e,r=String.raw`(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^${n}"\s\\]*(?:\s+[^${n}"\s\\]+)*))\s*(?:${e}|$)`;return t?new RegExp(r,t):new RegExp(r)})(n,"g"),((e,...t)=>(t.forEach(((e,n)=>{if(n>=t.length-2)return;const{rgx:a,val:s}=(e=>({rgx:[/\\'/g,/\\"/g,/^['"]?(.*)['"]?$/][e],val:["'",'"',"$1"][e]}))(n);""===e&&r.length++,e&&r.push(e.replace(a,s))})),""))),/,\s*$/.test(t)&&r.push(""),r}export(e,t){const{splitter:n}=this.options,r=(e=>{let{fname:t}=this.fileName;return`${t.join("_")}_${e}${(()=>{let{ftype:t,numb:n}=this.fileName;return e!==t?"":`_${n+1}`})()}`})(e);return et.createFile(r,t,n)}static createFile(e,t,n=","){const r=((e,t)=>{const n=e=>{let t=(e=e?e instanceof Date?e.toLocaleString():e.toString():"").replace(/"/g,'""');return t.search(/("|,|\n)/g)>=0&&(t=`"${t}"`),t};let r="";return e.forEach((e=>r+=(e=>{let r=t||",";return`${e.map(n).join(r)}\n`})(e))),new Blob([r],{type:"text/csv;charset=utf-8;"})})(t,n);return{fileUrl:URL.createObjectURL(r),fileName:`${e}`}}static exportToXlsx(e,t){return function(e,t,n){return Ye({filename:t,sheetname:t,data:e})}(t,e)}}const tt=new et,nt=new class{constructor(){this.src="",this.rgx={lt:/</g,gt:/>/g,escape:/\\([\\\|`*_{}\[\]()#+\-~])/g,format:/(^|[^A-Za-z\d\\])(([*])|(_)|(~)|`)(\2?)([^<]*?)\2\6(?!\2)(?=\W|_|$)/g,link:/(?:(http(?:s)?)?:\/\/)?((?:([a-z\d-]+?)\.([\.a-z]{2,}?))|((?:[\.\d]{1,3}?){4}?))(\:\d+)?((?:\/[-a-z\d%_.~+]*?)*?)(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?(?=$|\s|\n|<)/gi,para:/(?=^|\n)(\s+)*([^<]+?)[\n\s]*(?=<|\n|$)/g},this.plain=!1}element(e,n,r={}){return t.createElement(Object.assign({tag:e,html:n},r)).outerHTML}raw(e){return e.replace(this.rgx.escape,"$1")}highlight(e){let{format:t}=this.rgx;return this.plain?e:e.replace(t,((e,t,n,r,a,s,i,o)=>{const l=((e,t,n,r)=>r?"code":e?"strong":t?"em":n?"s":"")(r,a,s,i);return o=i?o.replace(/`/g,""):o,`${t}${this.element(l,this.highlight(o))}`}))}link(){let{link:e}=this.rgx;return this.src=this.src.replace(e,((e,...t)=>{let[n,r]=t;return this.element("a",e,{href:e,title:r,alt:r,target:"_blank"})})),this}#e(){let{para:e}=this.rgx;return this.src=this.src.replace(e,((e,t,n)=>`${t=t?t.replace(/\n/,"<br/>"):""}${this.element("div",this.raw(this.highlight(n)))}`)),this}#t(){return this.src=this.src.trim(),this.src}toHtml(e,t=!1){const{lt:n,gt:r}=this.rgx;return this.src=`${e}`,this.plain=t,this.src=this.src.replace(n,"&lt;").replace(r,"&gt;"),this.#e().link().#t()}};class rt{constructor(){this.data=new e}get count(){return this.data.length}add(e){return this.data.push(e),this}}const at=new class{constructor(){this.sukses=new rt,this.gagal=new rt,this.error=new rt}reset(){for(let e in this)this[e]=new rt;return this}createData(e){return this.hasOwnProperty(e)?this[e]:new rt}success(e){this.sukses.add(e)}fail(e,t=1){t?this.error.add(e):this.gagal.add(e)}},st=new class{constructor(){this.timer=!1,this.time=null,this.fn=null}get isRunning(){return!1!==this.timer}set(e,t){this.time=e,this.fn=t}start(e=null){this.isRunning||(this.timer=setInterval(this.fn,this.time)),e&&"function"==typeof e&&e(!0)}break(e=null){this.isRunning&&(clearInterval(this.timer),this.timer=!1),e&&"function"==typeof e&&e(!1)}stop(e=null){this.fn=null,this.time=null,this.break(e)}},it=new class{constructor(){this.currentIndex=0,this.queue=new e,this.stock=new e,this.offset=0}get isEmpty(){return this.queue.isEmpty}get now(){return this.queue.isEmpty?void 0:this.queue[this.offset]}get size(){return this.queue.length-this.offset}get long(){return this.stock.length}setData(e){this.queue=e,this.stock=e}run(){if(this.queue.isEmpty)return;let e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}reset(){this.queue=new e,this.stock=new e,this.offset=0,this.currentIndex=0}reload(){this.queue=this.stock,this.currentIndex=0,this.offset=0}},ot=new class extends g{constructor(){super();const t=this.getValue("wayfu-changelog",new e);this.details=0!==t.length?new e(...t):new e}get getChanges(){const{homepage:e}=this.appInfo;return new Promise((t=>{let n={url:`${e}files/changelog.json`,onload:e=>{const{status:n,responseText:r}=e;if(200===n){let e=JSON.parse(r);e=Array.isArray(e)?e:e.changelog,t(e)}else t(200===n)}};this.request(n)}))}get Log(){return this.details}async doUpdate(e){const t=r.getVersion.exec(e)[1],{version:n,name:a,downloadURL:s}=this.appInfo;if(!((e,t)=>{const{forVersion:n}=r;if(!e||!t||0===e.length||0===t.length)return!1;if(e==t)return!0;if(n.test(e)&&n.test(t)){let n=e.includes(".")?".":"-",r=e.split(n).map((e=>c(e)?Number(e):e)),a=t.split(n).map((e=>c(e)?Number(e):e));for(let e=0;e<r.length;++e){if(a.length==e)return!0;if(c(r[e])&&c(a[e])){if(r[e]==a[e])continue;return r[e]>a[e]}{let[t,n]=[Number(/\d+/.exec(r[e])),Number(/\d+/.exec(a[e]))],[s,i]=[/[A-Za-z]/.exec(r[e]),/[A-Za-z]/.exec(a[e])];if(t==n){if(s&&i&&s[0]==i[0])continue;return s&&i?s[0]>i[0]:!!s}return t>n}}}return e>=t})(n,t)){const e=`${a} ${t} sudah tersedia, perbaharui sekarang?`;await w.confirm(e)&&(window.location.href=s)}}async checkUpdate(){const{updateURL:t}=this.appInfo,n=new Promise((e=>{const n={url:`${t}`,onload:t=>{const{status:n,responseText:r}=t;e(200===n&&r)}};this.request(n)}));return this.details=new e(...await this.getChanges),this.save(),this.doUpdate(await n),this}save(){this.setValue("wayfu-changelog",this.details)}},lt=new class extends d{constructor(){super(),this.apiLink="api.whatsapp.com/send?phone=",this.inputMessage="",this.inputCaption="",this.imageFile="",this.idNumber="",this.name="",this.phone="",this.poinValue="",this.date="",this.sponsorName="",this.other=[]}setData(e){var t;[this.idNumber,this.name,this.phone,this.poinValue,this.date,this.sponsorName,...this.other]=(t=e[2],r.phonePattern.test(t)?e:["",...e])}get encodedMsg(){const{useImage:e,hasImage:t,useCaption:n}=y,r=!e||!t||"caption"===n,a=this.inputMessage&&r?this.subtitute(this.inputMessage):"";return""!==a?encodeURIComponent(a).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"):a}get link(){return this.apiLink+this.phone+`&text=${this.encodedMsg}`}setMessage(e,t,n){const a=e=>new RegExp(String.raw`(DATA_${e})(\s|\D|$)`,"g");if("oriflame"===y.userType){for(let a=t;a<3;a++){const t=r.datePattern.test(n),s=c(n);if(0===a&&s){const t=e=>{const t=y.targetBp-Number(e);return t>0?t:0};e=e.replace(/P_BP/g,`${n} BP`).replace(/K_BP/g,`${t(n)} BP`)}else 1===a&&t?e=e.replace(/L_DAY/g,this.lastDay(n)).replace(/S_DAY/g,this.lastDay(n,!1)):2!==a||s||t||(e=e.replace(/F_INVS/g,m(n,!0)).replace(/INVS/g,m(n)))}return t>2?e.replace(a(t-2),`${n}$2`):e}return e.replace(a(t+1),`${n}$2`)}subtitute(e){if(""!==e&&null!==e){const t=[this.poinValue,this.date,this.sponsorName,...this.other];e=(e=e.replace(/F_NAMA/g,m(this.name,!0)).replace(/NAMA/g,m(this.name))).replace(/PHONE/g,this.phone),e=""!==this.idNumber?e.replace("oriflame"===y.userType?/NO_KONS/g:/DATA_0/g,this.idNumber):e,t.forEach(((t,n)=>{e=t?this.setMessage(e,n,t):e}))}return e}lastDay(t,r=!0){const a=y.monthIndex,s=y.default.monthIndex;let i=new n(y.isFormat||s===a?t:e.split(t,"/").changeIndex(a,s).join("/"));return i=r?i.addDays(30):i,f(i,r)}async sendImg(){const{useCaption:e}=y,t="caption"===e?this.inputCaption:this.inputMessage;return await window.WAPI.SendImgToChat(this.phone,this.imageFile,this.subtitute(t))}},ct=new class extends d{constructor(){super(),this.errors={}}get errorList(){const t=new e;if(0!==Object.entries(this.errors).length)for(const e in this.errors)t.push(this.error(e));return t}validate(e){this.errors={},e=this.intoObject(e);for(let t in e)e[t].rules.forEach((e=>this[e](t)));return 0===Object.entries(this.errors).length}notEmpty(e){let[t,n]=(e=>{let[t,n]=[!1,""];return"message"===e?(t=""!==lt.inputMessage,n="Silahkan Masukkan Pesan terlebih dahulu..."):"queue"===e&&(t=void 0!==it.now,n="Silahkan Masukkan File Penerima Pesan..."),[t,n]})(e);return t||(this.errors[`${e}.isEmpty`]=n),t}belowMax(e){let{maxQueue:t}=y,{size:n}=it;return!(n>t&&(this.errors[`${e}.overMax`]=`Blast Auto tidak boleh lebih dari ${t} Nomor!`,1))}error(e){return this.errors[e]}showError(){const e=this.errorList;if(!e.isEmpty){const n=t.createListElement(e,"ul",{classid:"wfu-reports"});w.alert(n,"[ERROR] Proses Gagal Dimulai")}}};function ut(){it.reset(),dt()}function ht(e){return t.setElements([{elm:"#_blast-ico",props:{d:e?"M505.16405,19.29688c-1.176-5.4629-6.98736-11.26563-12.45106-12.4336C460.61647,0,435.46433,0,410.41962,0,307.2013,0,245.30155,55.20312,199.09162,128H94.88878c-16.29733,0-35.599,11.92383-42.88913,26.49805L2.57831,253.29688A28.39645,28.39645,0,0,0,.06231,264a24.008,24.008,0,0,0,24.00353,24H128.01866a96.00682,96.00682,0,0,1,96.01414,96V488a24.008,24.008,0,0,0,24.00353,24,28.54751,28.54751,0,0,0,10.7047-2.51562l98.747-49.40626c14.56074-7.28515,26.4746-26.56445,26.4746-42.84374V312.79688c72.58882-46.3125,128.01886-108.40626,128.01886-211.09376C512.07522,76.55273,512.07522,51.40234,505.16405,19.29688ZM384.05637,168a40,40,0,1,1,40.00589-40A40.02,40.02,0,0,1,384.05637,168ZM35.68474,352.06641C9.82742,377.91992-2.94985,442.59375.57606,511.41016c69.11565,3.55859,133.61147-9.35157,159.36527-35.10547,40.28913-40.2793,42.8774-93.98633,6.31147-130.54883C129.68687,309.19727,75.97,311.78516,35.68474,352.06641Zm81.63312,84.03125c-8.58525,8.584-30.08256,12.88672-53.11915,11.69922-1.174-22.93555,3.08444-44.49219,11.70289-53.10938,13.42776-13.42578,31.33079-14.28906,43.51813-2.10352C131.60707,404.77148,130.74562,422.67188,117.31786,436.09766Z":"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"}}]),e&&t.getElement(".progress-panel")||w.progressPanel(e,pt),e}function mt(){const{linkElm:e,errModal:n,send:r}=i;if(st.isRunning||st.start(ht),st.isRunning&&it.now){let s=it.currentIndex+=1,i=it.run();lt.setData(i),a=lt.link,t.setElement(e,{href:`https://${a}`}),setTimeout((()=>{t.getElement(e).click()}),500),setTimeout((async()=>{const e=t.getElement(n);let a="";if(e)a=e.innerText.includes("OK")?(at.fail(i),"ERROR"):(at.fail(i,0),"FAILED"),e.click();else{const{useCaption:e,useImage:n,hasImage:s}=y,o=t.getElement(r);a=o?(o.click(),"SUCCESS"):"FAILED",n&&s&&("caption"!==e||"SUCCESS"===a)&&(a=!0===await lt.sendImg()?"SUCCESS":"FAILED"),"SUCCESS"===a?at.success(i):at.fail(i,0)}}),4500),dt(s,lt.phone)}else ft();var a}async function pt(){st.break(ht),it.now&&await w.confirm("Stop Proses?")?ft():mt()}function ft(){b.isPremium||b.updateTrial("update"),st.stop(ht),async function(){it.isEmpty&&(t.setElement("#getFile",{value:""}),ut());const e=e=>{const{count:n,data:r}=at.createData(e),{downloadBtnSvg:s}=a;if(r.isEmpty)return n;const{fileName:i}=tt.export(e,r),o=t.createSVGElement(s,{viewBox:"0 0 512 512"}),l=t.createElement({tag:"a",title:`Download "${i}"`,classid:"wfu-export-csv",href:"#"});return l.appendChild(o),l.dataset.reportType=e,`${n} `+l.outerHTML};let n=t.createListElement([`SUKSES  = ${e("sukses")}`,`GAGAL   = ${e("gagal")}`,`ERROR   = ${e("error")}`],"ul",{classid:"wfu-reports"});if(w.alert(n,"[REPORT] Kirim Pesan Otomatis Selesai."),await t.hasElement(".wfu-reports a[data-report-type]")){function r(e){let t=(e.currentTarget||e.target).dataset.reportType,{data:n}=at.createData(t),{fileName:r}=tt.export(t,n);return gt(n,r)}t.getElement(".wfu-reports a[data-report-type]",!0).forEach((e=>t.onEvent(e,"click",r)))}b.isPremium||b.showAlert(b.isTrial?3:(t.getElement("#auto").click(),4),!0)}()}function dt(e=.5,n=null){let{size:r,isEmpty:a}=it,s=a?"none":"inline-block",i=a?"":`Data: Loaded, ${r} Nomor`;if(t.setElements([{elm:"#_file-info",props:{title:i,style:`display:${s}`}},{elm:"span.curPhone",props:{text:`+${n||""}`}},{elm:"#_data-count",props:{text:r}}]),a){let e=t.getElement("#_mode");e.checked&&e.click(),t.setElement(e,{disabled:a})}!function(e,n){let r=e.long||100,a=n/r*100;n>=1&&t.setElements([{elm:".waBar",props:{title:`${n}/${r}`}},{elm:"span.curNumb",props:{text:`${n}/${r}`}}]),t.setElementStyle(".waBar",{width:`${a}%`})}(it,e)}async function gt(e,n){const r=e=>t.createElement({tag:"div",classid:e});function s(e){const{id:t,value:n}=e.currentTarget||e.target;"fileType"===t&&y.setOption(t,n)}function i(e){const{id:t,checked:n}=e.currentTarget||e.target;if("set_fileType"!==t)return;let{fileType:r}=y;y.setOption("exportType",n?r:"ask")}let{fileUrl:o,fileName:l}=et.createFile(n,e),{exportType:c}=y;if("ask"===c){if(!await w.confirm((e=>{const n=r("wfu-options"),o=((e,{fileType:n},{checksSvg:a})=>{const i=["csv","xlsx"],o=r("row"),l=(()=>{let n=r("_label"),a=t.createLabelElement({id:e,text:"Simpan file sebagai"});return n.appendChild(a),n})(),c=(()=>{let o=r("_input"),l=t.createLabelElement({id:e,classid:"select"}),c=t.createSelectElement({id:e},i,{change:s}),u=t.createSVGElement(a,{viewBox:"0 0 10 6"});return c.value=n,l.append(c,u),o.appendChild(l),o})();return o.append(l,c),o})(e,y,a),l=(e=>{const n=r("row right"),a=t.createCheckElement({id:`set_${e}`,classid:"_input checks"},{change:i}),s=t.createLabelElement({id:`set_${e}`,classid:"_label",text:"Simpan pengaturan"});return n.append(a,s),n})(e);return n.append(o,l),n})("fileType"),`Download "${n}"`))return;c=y.fileType}return"xlsx"===c?et.exportToXlsx(n,e):t.createElement({tag:"a",href:o,download:`${l}`}).click()}const wt=new class{constructor(){}async runTasks(e){if(!await b.check())return;if(await async function(){if(0!==it.currentIndex&&it.now)return!(await w.confirm(`Lanjutkan Proses dari data ke-${it.currentIndex+1}?`)||await w.confirm("Proses ulang dari awal?")&&(it.reload(),dt(),1));const e=ct.validate({message:{rules:["notEmpty"]},queue:{rules:["notEmpty","belowMax"]}});return ct.showError(),!e}())return;const{useImage:t}=y,n=t?6e3:5500;at.reset(),st.set(n,(()=>mt())),mt()}tabMenu(e){const n=e.currentTarget||e.target,r=n.value,a=t.getElement("#wayfuPanel .menus",!0);t.setElements([{elm:a,props:{removeClass:"active"}},{elm:n,props:{addClass:"active"}}]).setElementsStyle([{elm:"#wayfuPanel .menu-content",props:{display:"none"}},{elm:`#${r}`,props:{display:"block"}}]),y.setOption("activeTab",Array.from(a).indexOf(n))}textPreview(e){let n=e.currentTarget||e.target,r=t.getElement("#wayfuPanel textarea",!0),a=n.checked;r.forEach((e=>{const n="message"===e.id?"msgPreview":"captPreview",r=((e,{id:t})=>{let n=lt["input"+("message"===t?"Message":"Caption")];return e?(lt.setData(it.now),n=lt.subtitute(n),nt.toHtml(n,!e)):""})(a,e),s=((e,{id:t})=>{if("message"===t)return!e;const{useCaption:n}=y;return n?!e:n})(a,e);t.setElement(`#${n}`,{html:r}).setElementStyle(`#${n}`,{display:s?"none":"block"}).setElementStyle(e,{display:s?"block":"none"})}))}updateText(e){const{id:t,value:n,innerText:r}=e.target||e.currentTarget,a=(e=>{let t=`${e}`.match(/[A-Za-z]+/g);return t?(t.forEach(((e,n)=>t[n]=p(e))),`input${t.join()}`):`input${p(e)}`})(t);lt.setProperties({[a]:n||r},!1)}async useImage(e){const n="caption"===y.useCaption,r=e.currentTarget||e.target,a=!!n&&r.checked,s=n?"":"Caption menggunakan pesan",i=r.dataset.captId;t.setElements([{elm:`#${r.value}`,props:{disabled:!r.checked}},{elm:`#${i}`,props:{disabled:!a,title:s}},{elm:"#useCaption",props:{disabled:!r.checked}}]),y.setOption("useImage",r.checked)}async loadData(e){const n=e.currentTarget||e.target,[r]=n.files,a=t.getElement("#_mode"),s=await(async e=>{if(!e)return null;try{return await tt.import(e)}catch(e){return w.alert("[ERROR] File .xlsx penerima tidak valid!"),console.error(e),null}})(r);ut(),s?function(e){let t="auto"!==y.dateFormat?y.dateFormat:e.options.monthIndex||y.monthIndex,n=2==t;y.setOptions(Object.assign({},e.options,{monthIndex:t,isFormat:n})),it.setData(e.data),dt()}(s):(t.setElement(n,{value:null}),a.checked&&a.click()),t.setElement(a,{title:s?"Mode Pesan":"Masukkan File CSV",disabled:!s})}imagePreview(e){const n=e.currentTarget||e.target,r=4*Math.pow(1024,2),a=n.dataset.value;let s=null;a?t.setElement(`#${a}`,{value:""}):(s=n.files[0],s&&s.size>r&&(w.alert("Ukuran gambar tidak boleh lebih dari 4MB"),s=null)),t.setElement("#_img-output",{src:s?URL.createObjectURL(s):""}).setElementStyle("#_deleteImg",{display:s?"block":"none"}),lt.setProperties({imageFile:s}),y.setOptions({hasImage:!!s,imageFile:s})}toggleApp(e){const n=e.currentTarget||e.target,{active:r}=window.WAPI.WebClassesV2,a=n.classList.toggle("active"),s=(e=>{let n=e.getAttribute("value")||e.dataset.target;return t.getElement(`#${n}`)})(n);s.style.height=s.style.height?null:`${s.scrollHeight}px`,n.classList.toggle(r);let i=s.style.height?"unset":"collapse";t.setElementStyle("#wayfuPanel",{visibility:i}),y.setOption("openPanel",a)}inputRange(e){const n=e.currentTarget||e.target,{id:r,value:a}=n;t.setElements([{elm:n,props:{max:"maxQueue"===r?y.queueLimit:y.bpLimit}},{elm:t.getElement("output",n.parentElement),props:{text:a}}]),y.setOption(r,a)}inputChecks(e){const{id:t,value:n}=e.currentTarget||e.target;y.setOption(t,n)}inputSelects(e){const{id:n,value:r}=e.currentTarget||e.target;switch(n){case"themeColor":!function(e,n){t.setElementStyle("#wayfuPanel",{backgroundColor:n}),y.setOption(e,n)}(n,r);break;case"dateFormat":!function(e){if(c(e))e=2!==Number(e)?e:0,y.setOptions({isFormat:2===e,monthIndex:e,dateFormat:e});else{y.setOptions({isFormat:!1,dateFormat:e});const n=t.getElement("#getFile");it.isEmpty&&""===n.value||(t.setElement(n,{value:""}),w.alert("Untuk opsi <strong>Deteksi Otomatis</strong>, Silahkan masukkan ulang file penerima pesan.","[WARNING] Masukkan ulang CSV"),ut())}}(r);break;case"useCaption":!async function(e,n){let r="caption"!==n;r&&(r="caption"!==(n=await w.confirm("Mengubah Pesan menjadi Caption akan menaikan potensi Banned dari WhatsApp. Apa Anda Yakin?")?n:"caption")),t.setElement("#_caption",{disabled:r,title:r?"Caption menggunakan pesan":""}),y.setOption(e,n)}(n,r);break;case"exportType":!async function(e,n){y.setOption(e,n);let r=await t.hasElement("span.wfu-link");if(r){let e=(({title:e})=>e.replace(/(.*)\.[^.]+(["]+)$/g,(function(e,t,r){return`${t}.${n+r}`})))(r);t.setElement(r,{title:e})}}(n,r)}}changeLog(e){}async checkChat(n){const{chatHeader:r,menu:s,menuDefault:i,item:o,button:l}=window.WAPI.WebClassesV2,c=t.getElement(`.${r} .${s}.${i}`),u=t.getElement("span[data-icon='download-alt']",c);if(null!==E.selectChat().room&&E.isGroup){let{groupMetadata:r}=E,{subject:s,participants:i}=r,h=new e;for(const{contact:e}of i.getModelsArray()){let{id:{user:t},name:n,pushname:r}=e.serialize();h.push([r||n||t,t])}let m=(e=>{let n=t.createElement({tag:"div",classId:l,role:"button","data-tab":"6",tabindex:"0","aria-disabled":!1,html:e.outerHTML});return t.createElement({tag:"div",classId:o,html:n.outerHTML})})((e=>{let n=t.createSVGElement(a.groupDownloadBtnSvg,{width:"24",height:"24"});return t.createElement({tag:"span",title:`Download "${e}"`,"data-testid":"download-alt","data-icon":"download-alt",classid:"wfu-link",html:n.outerHTML})})(s));if(u){if(u&&n.target===u&&await b.check())return gt(h,s)}else c.insertBefore(m,c.firstChild)}}};const vt=e=>{if(!window.WAPI||!window.WAPI.Msg){function t(e){for(let t in e.m)"object"==typeof e(t)&&null!==e(t)&&l.forEach((n=>{if(!n.conditions||n.foundedModule)return;let r=n.conditions(e(t));null!==r&&(n.foundedModule=r)}));let t=l.find((e=>"Store"===e.id)),n=t.foundedModule?t.foundedModule:{};return l.forEach((e=>{"Store"!==e.id&&e.foundedModule&&(n[e.id]=e.foundedModule)})),function(e){let{WebClasses2:t,WebClasses3:n,...r}=e,a=Object.assign({},t,n);return Object.assign(r,{WebClassesV2:a}),Object.defineProperties(r,{Me:{get:function(){for(let e of this.Contact.getModelsArray())if(e.isMe)return e.serialize();return{}},enumerable:!0},SendImgToChat:{value:function(e,t,n="",r=!1){return!(!e||!t)&&new Promise((a=>{this.Chat.find(`${e}@c.us`).then((e=>{let s=new this.MediaCollection(e);s.processAttachments([{file:t},1],e,1).then((()=>{let[t]=s.getModelsArray();t.sendToChat(e,{caption:n}),a(!r||e)})).catch((e=>(console.log(e),a(!1))))}))}))},enumerable:!0}}),window.WAPI=Object.keys(r).sort().reduce(((e,t)=>(e[t]=r[t],e)),{}),window.WAPI}(n)}const n=`parasite${Date.now()}`,r=(e=>{for(let t of Object.keys(e))if(/[^|]?webpack./g.test(t))return t;return null})(e);r&&"object"==typeof e[r]?e[r].push([[n],{},e=>t(e)]):console.error("Failed to load WAPI Module!")}};class yt extends g{constructor(e){super(),this.initialize(e)}initialize(e){vt(e),this.registerPanel(),this.registerUser(),this.registerOptions(),this.onLoadView()}registerPanel(){E.init();const e=this.getResource("pnl"),n=this.getResource("css"),r=this.getResource("ico","url");!function(e,n,r){const{name:i,version:o,icon:l}=r;t.createElement({tag:"header",id:"wayfuPanel",after:"header",html:e.replace(/VERSION/,o).replace(/WA_VERSION/,window.WAPI.Debug.VERSION)}),t.addStyle(n,{id:"wayfuStyle"}).setElement("img.appIco",{src:l}),function(e){const{menu:n,menuDefault:r,item:s,button:i}=window.WAPI.WebClassesV2,o=t.getElement(`header .${n}.${r} span`);o.insertBefore((e=>{const n=(()=>{let e=t.createSVGElement(a.wayFuSvg,{width:"24",height:"24",viewBox:"0 0 128 128",class:"wayfu-app-icon"});return t.createElement({tag:"span","data-testid":"wayfu-app","data-icon":"wayfu-app",html:e.outerHTML})})(),r=t.createElement({tag:"div",classid:i,role:"button","data-tab":"2",tabindex:"0","aria-disabled":!1,title:`${e}`,"aria-label":`${e}`,html:n.outerHTML});return t.createElement({tag:"div",id:"wayfuToggle",classid:s,"data-testid":"menu-bar-wayfu-app","data-target":"wayfuPanel",html:r.outerHTML})})(e),o.firstChild)}(i),s.forEach((e=>{const{element:n,type:r,event:a}=e;t.getElement(n||document,!0).forEach((e=>{t.onEvent(e,r,(function(e){let t=wt[a];if("function"==typeof t)return t(e)}))}))})),window.addEventListener("click",(function(e){(class{static current(e){y.debug&&console.log("test",e)}}).current(e)}))}(e,n,Object.assign({},this.appInfo,{icon:r}))}registerUser(){b.init().gettingData()}registerOptions(){y.init()}async onLoadView(){t.setElementStyle("#wayfuPanel",{"background-color":y.themeColor}).setElement("input#getFile",{accept:[".txt",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].join(",")}),t.getElement("#wayfuPanel .menus",!0)[y.activeTab||0].click(),y.openPanel?t.getElement("#wayfuToggle").click():t.setElementStyle("#wayfuPanel",{visibility:"collapse"}),ot.checkUpdate()}debug(e){if(e="boolean"!=typeof e||e,y.setOption("debug",e),e)Object.assign(yt.prototype,{options:y,user:b,chat:E,csvFile:tt},window.WAPI);else for(let e of["options","user","chat","csvFile",...Object.keys(window.WAPI)])delete yt.prototype[e];return this}}!async function e(){await t.hasElement("div.two")?unsafeWindow.WayFu=new yt(unsafeWindow):await e()}()})();