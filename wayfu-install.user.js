// ==UserScript==
// @name         WayFu - Easy Follow Up
// @description  WhatsApp Easy Follow Up.
// @date         2022-11-04
// @copyright    2018, Rizal Nurhidayat (https://github.com/rzlnhd)
// @license      CC BY-NC-ND 4.0; https://creativecommons.org/licenses/by-nc-nd/4.0/
// @icon         https://wayfu.id/v4/assets/wayfu-icon.webp
// @homepage     https://wayfu.id/
// @supportURL   https://wayfu.id/
// @version      4.3.0
// @author       Rizal Nurhidayat (https://github.com/rzlnhd)
// @match        https://web.whatsapp.com/*
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_xmlhttpRequest
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_log
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @grant        GM_info
// @grant        GM_notification
// @connect      wayfu.id
// @updateURL    https://wayfu.id/v4/update.meta.js
// @downloadURL  https://wayfu.id/v4/wayfu-install.user.js
// @resource ico https://wayfu.id/v4/assets/wayfu-icon.webp
// @resource pnl https://wayfu.id/v4/assets/wayfu-view.html
// @resource clr https://wayfu.id/v4/assets/wayfu-colors.json
// @resource css https://wayfu.id/v4/assets/wayfu-style.min.css
// ==/UserScript==

"use strict";var __webpack_exports__={};class MyArray extends Array{get isEmpty(){return this.length<=0}get nonEmptyValue(){return this.filter((e=>!!e))}changeIndex(e,t){if(t>=this.length){let e=t-this.length+1;for(;e--;)this.push(void 0)}return this.splice(t,0,this.splice(e,1)[0]),this}countValue(e){let t=0;return this.forEach((n=>{t+=n===e?1:0})),t}isOnArray(e){return this.some((t=>e===t))}static split(e,t){let n=e.split(t);return new MyArray(...n)}}class HtmlModifier{constructor(){}getElement(e,t,n){let[r,s]=((e,t)=>"boolean"==typeof e?[null,e]:e?[this.getElement(e),t??!1]:[null,!1])(t,n);return"string"==typeof e?(e=e.trim(),r=r&&r instanceof HTMLElement?r:document,s?r.querySelectorAll(e):r.querySelector(e)):e instanceof HTMLElement||e instanceof NodeList?e:void 0}getParents(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});let n=[],r=this.getElement(e);for(;r&&r!==document;r=r.parentNode)t?r.matches(t)&&n.push(r):n.push(r);return n}createElement(e){let t,n,r;for(const s in e)if(e.hasOwnProperty(s))switch(s){case"tag":n=document.createElement(e[s]);break;case"text":r="innerText"in document?"innerText":"textContent",n[r]=e[s];break;case"html":n.innerHTML=e[s];break;case"classid":if("array"==typeof e[s])for(let t of e[s])n.classList.add(t);else"string"==typeof e[s]&&(n.className=e[s]);break;case"append":t=this.getElement(e[s]),t.appendChild(n);break;case"prepend":t=this.getElement(e[s]),t.childNodes.length&&t.insertBefore(n,t.childNodes[0]),t.appendChild(n);break;case"before":t=this.getElement(e[s]),t.parentNode.insertBefore(n,t);break;case"after":t=this.getElement(e[s]),t.parentNode.insertBefore(n,t.nextSibling);break;case"replace":t=this.getElement(e[s]),t.parentNode.replaceChild(n,t);break;case"event":for(const t in e.event)e.event.hasOwnProperty(t)&&this.onEvent(n,t,e.event[t]);break;case"callback":e[s](n);break;default:n.setAttribute(s,e[s])}return n}createElements(e,t){let n=t?t instanceof window.HTMLElement?t:"object"==typeof t&&null!=t.tag?this.createElement(t):null:"string"==typeof t?this.getElement(t):null;if(Array.isArray(e))for(let t of e)("object"==typeof t||t.tag)&&(n&&(t.append=n),this.createElement(t));return n||this}createListElement(e,t="ol",n={}){let r=this.createElement(Object.assign({tag:t},n));return Array.isArray(e)&&e.forEach((e=>{if("object"==typeof e){let n=this.createElement({tag:"li",html:e.title,append:r});Array.isArray(e.content)&&this.createListElement(e.content,t||"ol",{append:n})}else"string"==typeof e&&this.createElement({tag:"li",html:e,append:r})})),r}createSVGElement(e){const{size:t,d:n,dPath:r,fill:s,viewBox:a}=e,i=(o=n||r,Array.isArray(o)?o:[o]);var o;let l="";for(let e of i)l+=this.createElement({tag:"path",d:e,fill:s||"currentColor"}).outerHTML;const u={width:"16",height:"16"};if(t&&"string"==typeof t){let[e,n]=t.split(" ");u.width=e||u.width,u.height=n||u.height}return this.createElement(Object.assign({tag:"svg",width:u.width,height:u.height,html:l},a?{viewBox:a}:{}))}setElementStyle(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"zIndex":e.style.zIndex=t[n];break;case"margin":e.style.margin=t[n];break;case"padding":e.style.padding=t[n];break;case"display":e.style.display=t[n];break;default:e.style[n]=t[n]}return this}setElementsStyle(e,t){return Array.isArray(e)?e.forEach((e=>{this.setElementStyle(e.elm,e.props)})):"string"==typeof e&&this.getElement(e,!0).forEach((e=>{this.setElementStyle(e,t)})),this}setElement(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);let r;if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"text":r="innerText"in document?"innerText":"textContent",e[r]=t[n];break;case"html":e.innerHTML=t[n];break;case"class":e.className=t[n];break;case"addClass":e.classList.add(t[n]);break;case"removeClass":e.classList.remove(t[n]);break;case"toggleClass":e.classList.toggle(t[n]);break;case"disabled":e.disabled=t[n];break;case"value":e.value=t[n];break;case"dispatch":e.dispatchEvent(t[n]);break;case"readonly":case"readOnly":e.readOnly=t[n];break;default:e.setAttribute(n,t[n])}return this}setElements(e=[]){return Array.isArray(e)&&e.forEach((e=>{this.setElement(e.elm,e.props)})),this}hasElement(e,t=10){return new Promise((n=>{let r=setInterval((()=>{let s=this.getElement(e);s&&(n(s),clearInterval(r)),(t-=!1)&&(n(!1),clearInterval(r))}),1e3)}))}insertElement(e,t){return this.getElement(t||"body").appendChild(this.getElement(e)),this}removeElement(e,t){return this.getElement(t||"body").removeChild(this.getElement(e)),t||this}onEvent(e,t,n,r=!1){let s=this.getElement(e);return window.addEventListener&&(s||window).addEventListener(t,n,r),this}eventFire(e,t,n,r={bubbles:!0,composed:!0}){return this.setElement(e,{text:n||"",dispatch:t?new InputEvent(t,r):new MouseEvent("mousedown",r)}),this}addStyle(e,t={}){const n={tag:"style",html:e,append:"head"};return this.createElement(Object.assign({},n,t)),this}}const DOM=new HtmlModifier;class MyDate extends Date{addDays(e){let t=new MyDate(this.valueOf());return t.setDate(t.getDate()+e),t}addMonths(e){let t=new MyDate(this.valueOf());return t.setMonth(t.getMonth()+Number(e)),t}}const rgx={forVersion:/^\d+(?:(?:\.|-)\d+[A-Za-z]?)*$/,getVersion:/(?:@version\s*(\d+(?:(?:\.|-)\d+[A-Za-z]?)*))/,phonePattern:/^(?:[\+\d]?[\- \d]{10,})(?:\s|$)/,phoneValue:/^[0\+]*(?:(\d{9,})|([\d]{1,3}(?:[\- ]?[\d]{2,})+))(\s|$)/,datePattern:/\d{1,4}[\/|-|:]\d{1,2}[\/|-|:]\d{2,4}/,formatedDate:/^\d{4}[\/|-|:]\d{1,2}[\/|-|:]\d{1,2}$/,forFilename:/(?!\s*$)\s*(?:(gagal|error)|(?:\(?([0-9]*)\)?)|([^_]*))(?:_|\s|$)/g},eventLists=[{element:"#panelBody .menus",type:"click",event:"tabMenu"},{element:"#panelBody textarea",type:"input",event:"updateText"},{element:"#_mode",type:"click",event:"textPreview"},{element:"#useImage",type:"click",event:"useImage"},{element:"#getFile",type:"change",event:"loadData"},{element:"#imgFile",type:"change",event:"imagePreview"},{element:"#_deleteImg",type:"click",event:"imagePreview"},{element:"#toggleApp",type:"click",event:"toggleApp"},{element:"._input input[type='range']",type:"input",event:"inputRange"},{element:"._input input[type='checkbox']",type:"change",event:"inputChecks"},{element:"._input select",type:"change",event:"inputSelects"},{element:"#changeLogs",type:"click",event:"changeLog"},{element:"#_blast",type:"click",event:"runTasks"},{element:"div#app",type:"click",event:"checkChat"}],queryElm={send:"#main span[data-testid^='send']",input:"#main div[contenteditable='true']",linkElm:"div#panelBody span#_api-link a",errModal:".overlay div[role^='button']",chatMessage:"#main div.message-out"},dateOptDefault={year:"numeric",month:"long",day:"numeric"},storeObjects=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"WebClasses",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chat&&e.default.active?e.default:null},{id:"WebClasses2",conditions:e=>e.default&&"object"==typeof e.default&&e.default.menu&&e.default.active?e.default:null},{id:"WebClasses3",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chatHeader?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments?e.default:null},{id:"Debug",conditions:e=>e.Debug?e.Debug:null}],isNumeric=e=>"string"==typeof e?!isNaN(e)&&!isNaN(parseFloat(e)):"number"==typeof e,isDateStr=e=>"string"==typeof e&&"Invalid Date"!==new Date(e).toString()&&!isNaN(new Date(e)),JSONParse=e=>new Promise((t=>{try{t(JSON.parse(e))}catch(e){t(null)}})),parseValue=e=>{var t;return"string"==typeof e&&(e=isNumeric(e)?Number(e):"string"!=typeof(t=e)||"Invalid Date"===new Date(t).toString()||isNaN(new Date(t))?e:new MyDate(e)),e},isUpToDate=(e,t)=>{const{forVersion:n}=rgx;if(!e||!t||0===e.length||0===t.length)return!1;if(e==t)return!0;if(n.test(e)&&n.test(t)){let n=e.includes(".")?".":"-",r=e.split(n).map((e=>isNumeric(e)?Number(e):e)),s=t.split(n).map((e=>isNumeric(e)?Number(e):e));for(let e=0;e<r.length;++e){if(s.length==e)return!0;if(isNumeric(r[e])&&isNumeric(s[e])){if(r[e]==s[e])continue;return r[e]>s[e]}{let[t,n]=[Number(/\d+/.exec(r[e])),Number(/\d+/.exec(s[e]))],[a,i]=[/[A-Za-z]/.exec(r[e]),/[A-Za-z]/.exec(s[e])];if(t==n){if(a&&i&&a[0]==i[0])continue;return a&&i?a[0]>i[0]:!!a}return t>n}}}return e>=t},setName=(e,t=!1)=>{let n=[];return e.split(" ").forEach((e=>{n.push(titleCase(e))})),t?n.join(" "):n[0]},titleCase=e=>(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1),dateFormat=(e,t=!0)=>new Date(e).toLocaleDateString("id-ID",Object.assign({},dateOptDefault,{weekday:t?"long":void 0})),createFilteredObject=(e,t,n="key")=>{let r=Array.isArray(t)?t:[t];return Object.fromEntries(Object.entries(e).filter((([e,t])=>{let s="key"==n?e:t;return r.some((e=>s===e))})))};class BaseModel{setProperties(e){e=this.intoObject(e);for(let t in e)this.hasOwnProperty(t)&&(this[t]=e[t]);return this}serialize(e){if("object"==typeof e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURI(e[n]));return t.join("&")}return e.toString?e.toString():e}intoObject(e){let t={};if(!e)return t;if("string"==typeof e?t=JSON.parse(e):Array.isArray(e)?e.forEach(((e,n)=>t[n]=e)):"object"==typeof e&&(t=e),0!==Object.keys(t).length)for(const e in t)t[e]=parseValue(t[e]);return t}findObjectValue(e,t,n=2){if(!n)return null;let r=(t=t||this)[e];if(r)return r;n-=1;for(let s of Object.keys(t))t[s]&&"object"==typeof t[s]&&(r=this.findObjectValue(e,t[s],n));return r}}class GM_Library extends BaseModel{constructor(){super()}get appInfo(){return this.getInfo("script")}get managerName(){return"object"!=typeof GM_info?"function"==typeof GM_getMetadata?"Scriptish":"undefined"!=typeof GM_setValue&&"undefined"==typeof GM_getResourceText&&"undefined"==typeof GM_getResourceURL&&"undefined"==typeof GM_openInTab&&"undefined"==typeof GM_setClipboard?"NinjaKit":"Native":void 0!==GM_info.uuid?"Greasemonkey":void 0!==GM_info.scriptHandler?"Tampermonkey":void 0}getInfo(e=""){return GM_info?""===e?GM_info:this.findObjectValue(e,GM_info):null}getResource(e,t="text"){return"undefined"!=typeof GM_getResourceText&&"text"===t?GM_getResourceText(e):"undefined"!=typeof GM_getResourceURL&&"url"===t?GM_getResourceURL(e):void 0}deleteValue(e){if("undefined"!=typeof GM_deleteValue){const t=GM_listValues();for(const n of t)e&&e===n&&GM_deleteValue(n)}}setValue(e,t){"undefined"!=typeof GM_setValue&&GM_setValue(e,t)}getValue(e,t=null){if("undefined"!=typeof GM_listValues&&"undefined"!=typeof GM_getValue){const n=GM_listValues();if(0!==n.length&&n.some((t=>e===t)))return GM_getValue(e,t)}return t}request(e){e.url=e.url||this.appInfo.homepage,e.method=e.method||"GET",e.headers=e.headers||{},e.timeout=e.timeout||2e4,(e.data||"POST"==e.method)&&(e.method="POST",e.data=this.serialize(e.data||{}),e.headers=Object.assign({},e.headers,{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"}));const t=e.onload,n=e.onerror,r=e.ontimeout,s=e.onabort;e.onload=function(e){t(e)},e.onerror=function(e){console.log(`request error: ${e.error||"unknown error"}`),n(e)},e.ontimeout=function(e){console.log(`request error: ${e.error||"timed out"}`),r(e)},e.onabort=function(e){console.log(`request error: ${e.error||"aborted"}`),s(e)},"undefined"!=typeof GM_xmlhttpRequest?GM_xmlhttpRequest(e):console.log("XHR not Allowed!")}}class Modals{constructor(){this.contens=0,this.element=DOM.createElement({tag:"div",id:"wayfu-modal",classid:"wfu-modal",role:"alert"})}#e(e,t="",n=!1){return new Promise((r=>{let s=`wfu-content-${this.contens+=1}`,a=DOM.createElement({tag:"div",classid:"wfu-modal-container",id:s});if(t&&DOM.createElement({tag:"h2",text:t,append:a}),e&&(e instanceof window.HTMLElement?DOM.insertElement(e,a):"string"==typeof e?DOM.createElement({tag:"p",html:e,append:a}):"object"==typeof e&&DOM.createElement(Object.assign({tag:"p",append:a},e))),n){let e=DOM.createElement({tag:"ul",classid:"wfu-buttons",append:a}),t=[{tag:"a",classid:"wfu-btn-ok",text:"Ya",event:{click:e=>{this.closed(e),r(!0)}}},{tag:"a",classid:"wfu-modal-close",text:"Tidak",event:{click:e=>{this.closed(e),r(!1)}}}];for(let n of t){let t=DOM.createElement({tag:"li",append:e});DOM.createElement(Object.assign({},n,{append:t}))}}else DOM.createElement({tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace wfu-modal-close",append:a,event:{click:this.closed}});DOM.onEvent(window,"click",this.closed).insertElement(a,this.element),this.show()}))}async alert(e,t=""){return await this.#e(e,t)}async confirm(e,t=""){return await this.#e(e,t,!0)}progressPanel(e,t=null){if(e){let e=`wfu-content-${this.contens+=1}`,n=DOM.createElement({tag:"div",classid:"wfu-modal-container progress-panel",id:e}),r=[{tag:"h2",text:"Pesanmu sedang dikirim"},{tag:"div",html:"<div class='waBar'></div>",classid:"waProgress"},{tag:"p",html:"Mengirim pesan ke <span class='curPhone'></span> (<span class='curNumb'></span>)"},{tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace",event:{click:t}}];n=DOM.createElements(r,n),DOM.insertElement(n,"#wayfu-modal"),this.show()}else{let e=DOM.getElement(".wfu-modal-container.progress-panel"),t=DOM.getElement(".wfu-modal-container",!0),n=DOM.getElement("#wayfu-modal");e&&DOM.removeElement(e,n),n&&0===t.length&&n.classList.remove("is-visible")}}show(){DOM.getElement("#wayfu-modal")||DOM.insertElement(this.element),DOM.getElement("#wayfu-modal").classList.add("is-visible")}closed(e){const t=e.target,n=DOM.getElement("#wayfu-modal"),r=DOM.getParents(t,".wfu-modal-container"),s=t.classList.contains("wfu-btn-ok");if(n&&(s||t.classList.contains("wfu-modal-close"))){0!==r.length&&DOM.removeElement(r[0],n);const e=DOM.getElement(".wfu-modal-container",!0);n&&0===e.length&&n.classList.remove("is-visible")}}}const modal=new Modals;class Settings extends GM_Library{constructor(){super(),this.default={themeColor:"var(--butterbar-connection-background)",debug:!1,hasImage:!1,imageFile:null,useImage:!1,activeTab:0,targetBp:100,maxQueue:500,dateFormat:"auto",openPanel:!0,useCaption:"caption",userType:"umum",splitter:",",monthIndex:0,isFormat:!1,alert:!0,queueLimit:1e3,bpLimit:300}}init(){const e=this.getValue("wayfu-options"),t=Object.assign({},this.default,this.intoObject(e));return Object.assign(Settings.prototype,this.default),this.setOptions(t).colorList()}setOptions(e){if(e!=={}){e=this.intoObject(e);for(let t in e)this.setOption(t,e[t])}return this}setOption(e,t){return t=parseValue(t),(this.hasOwnProperty(e)||this.default.hasOwnProperty(e))&&(this[e]=t),this.fillList().save()}fillList(){return Object.entries(this).forEach((e=>{const[t,n]=e,r=DOM.getElement(`#${t}`);r&&("checkbox"==r.type?r.checked=n:r.value=n)})),DOM.getElement("._input input[type='range']",!0).forEach((e=>{DOM.setElements([{elm:e,props:{max:"maxQueue"==e.id?this.queueLimit:this.bpLimit}},{elm:DOM.getElement("output",e.parentElement),props:{text:e.value}}])})),"oriflame"===this.userType&&DOM.setElementStyle(".panel-options .oriflame",{display:"flex"}),this}colorList(){let e=this.getResource("clr");return e="string"==typeof e?JSON.parse(e):e,e=Array.isArray(e)?e:e.colors,e.forEach((e=>{let t={tag:"option",value:e.key,text:e.val,append:"select#themeColor"};DOM.createElement(t)})),this}save(){const e=new MyArray("useImage","hasImage","imageFile","fileName","alert","bpLimit","queueLimit","debug","default"),t={};for(let n in this)this.default.hasOwnProperty(n)&&!e.isOnArray(n)&&(t[n]=this[n]);this.setValue("wayfu-options",t)}}const options=new Settings;class Users extends GM_Library{constructor(){super(),this.today=new MyDate,this.defaultOpt={method:"POST",url:`${this.appInfo.homepage}user/api`,headers:{"Content-Type":"application/json"}}}get isPremium(){return!!this.end&&this.today<this.end}get isTrial(){return!!this.expires&&this.attempt<5&&this.today<=this.expires}init(){const{id:e,name:t,pushname:n}=window.WAPI.Me;return this.phone=Number(e.user)||"",this.name=t||n||"",this}gettingData(){return new Promise((e=>{let t=Object.assign({},this.defaultOpt,{data:JSON.stringify({phone:this.phone,version:this.appInfo.version}),onload:async t=>{const{status:n,responseText:r}=t;let s=null;200===n&&(s=await JSONParse(r)),user.setUser(s),e(200===n&&s)},onerror:e=>user.setUser(null),ontimeout:e=>user.setUser(null),onabort:e=>user.setUser(null)});this.request(t)}))}updateData(e){if(!e)return this;if((e=this.intoObject(e)).phone!==this.phone)return this;for(const t in e)"today"!==t&&(this[t]=e[t]);return this.end=this.reg&&this.mon?new MyDate(this.reg).addMonths(this.mon):this.end||null,this}setUser(e){const t=e||this.getValue("wayfu-user");t&&null!=t&&""!==t&&(this.reset().updateData(t).save(),options.setOption("userType",this.type)),this.isPremium||this.isTrial?this.showAlert(this.isPremium?0:1):setTimeout((()=>{this.gettingData()}),2e4)}async check(){let e=this.isPremium||await this.tryApp();return e||this.showAlert(2,!0),e}async tryApp(){return this.expires||this.isTrial?this.isTrial:!!await modal.confirm("Coba WayFu Gratis!","Apakah Anda mau mencoba 2 hari Trial?")&&await this.updateTrial()}updateTrial(e="add"){const t={version:this.appInfo.version,phone:this.phone,name:this.name,action:e},n=(e=>{let t=new MyDate(this.today).addDays(2).toLocaleString("id-ID"),n=this.attempt+=1;return"add"===e?{expires:t}:{attempt:n}})(e);return new Promise(((e,r)=>{let s=Object.assign({},this.defaultOpt,{data:JSON.stringify(Object.assign({},t,n)),onload:async t=>{const{status:n,responseText:r}=t;let s=null;200===n&&(s=await JSONParse(r)),user.setUser(s),e(200===n&&s)},onerror:t=>e(!1),ontimeout:t=>e(!1),onabort:t=>e(!1)});this.request(s)}))}showAlert(e,t=!1){const n=[{title:`Halo kak ${setName(this.name,!0)}!`,text:`Selamat menggunakan fitur Pengguna Premium.\n\n                Masa aktif Kakak berakhir hari ${dateFormat(this.end)} ya...`},{title:`Halo! Selamat Datang di ${this.appInfo.name}!`,text:`Anda dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi,\n                Masa Trial Anda berakhir hari ${dateFormat(this.expires)} ya...`},{title:`${this.appInfo.name} - Fitur Premium`,text:"Maaf, fitur ini hanya untuk Pengguna Premium. Informasi lebih lanjut, silahkan hubungi saya."},{title:`${this.appInfo.name} - Trial Mode`,text:`Saat ini Anda sedang menggunakan versi Trial. Anda masih dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi.`},{title:`${this.appInfo.name} - Trial Mode`,text:"Masa Trial Anda sudah berakhir. Silahkan berlanganan untuk menggunakan fitur premium."}],{title:r,text:s}=n[e];let a=options.alert||t?(modal.alert(s,r),!1):options.alert;options.setOption("alert",a)}reset(){const e=new MyArray("attempt","type","reg","mon","end","expires");for(let t in this)this.hasOwnProperty(t)&&e.isOnArray(t)&&delete this[t];return this.init()}save(){const e=new MyArray("name","phone","attempt","type","reg","mon","end","expires"),t={};for(let r in this)this.hasOwnProperty(r)&&e.isOnArray(r)&&(t[r]=(n=this[r])instanceof Date?n.toISOString():n);var n;this.setValue("wayfu-user",t)}}const user=new Users;class Chatroom extends BaseModel{constructor(){super(),this.room=null,this.classId={active:"",header:""}}get isGroup(){return!!this.selected&&this.room.isGroup}get groupMetadata(){return this.selected&&this.isGroup?this.room.groupMetadata:null}get contact(){return this.room?this.room.contact:null}get selected(){return!!this.room}init(){const{active:e}=window.WAPI.WebClasses,{chatHeader:t}=window.WAPI.WebClassesV2;return this.classId={active:e,header:t},this}selectChat(){return this.room=(e=>{let t;for(let n in e)if(t=(e=>{if(!e)return null;e="active"===n?e.offsetParent:e.parentNode;for(let t of Object.keys(e)){let n=this.findObjectValue("children",e[t]);if(!n)continue;let{chat:r}=this.findObjectValue("props",n);return r}})(DOM.getElement(`.${e[n]}`)),t)return t})(this.classId),this}}const chat=new Chatroom;var ch2={},wk=function(e,t,n,r,s){var a=new Worker(ch2[t]||(ch2[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var r=new Error(n[0]);r.code=n[1],r.stack=n[2],s(r,null)}else s(null,t)},a.postMessage(n,r),a},u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var n=new u16(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var s=new u32(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return[n,s]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>>1|(21845&i)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,rev[i]=((65280&x)>>>8|(255&x)<<8)>>>1}var hMap=function(e,t,n){for(var r=e.length,s=0,a=new u16(t);s<r;++s)e[s]&&++a[e[s]-1];var i,o=new u16(t);for(s=0;s<t;++s)o[s]=o[s-1]+a[s-1]<<1;if(n){i=new u16(1<<t);var l=15-t;for(s=0;s<r;++s)if(e[s])for(var u=s<<4|e[s],c=t-e[s],f=o[e[s]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)i[rev[f]>>>l]=u}else for(i=new u16(r),s=0;s<r;++s)e[s]&&(i[s]=rev[o[e[s]-1]++]>>>15-e[s]);return i},flt=new u8(288);for(i=0;i<144;++i)flt[i]=8;for(i=144;i<256;++i)flt[i]=9;for(i=256;i<280;++i)flt[i]=7;for(i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(i=0;i<32;++i)fdt[i]=5;var flm=null,flrm=hMap(flt,9,1),fdm=null,fdrm=hMap(fdt,5,1),max=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},bits=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},bits16=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},shft=function(e){return(e+7)/8|0},slc=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?u16:4==e.BYTES_PER_ELEMENT?u32:u8)(n-t);return r.set(e.subarray(t,n)),r},FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(e,t,n){var r=new Error(t||ec[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,err),!n)throw r;return r},inflt=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new u8(0);var s=!t||n,a=!n||n.i;n||(n={}),t||(t=new u8(3*r));var i=function(e){var n=t.length;if(e>n){var r=new u8(Math.max(2*n,e));r.set(t),t=r}},o=n.f||0,l=n.p||0,u=n.b||0,c=n.l,f=n.d,h=n.m,d=n.n,p=8*r;do{if(!c){o=bits(e,l,1);var m=bits(e,l+1,3);if(l+=3,!m){var g=e[(A=shft(l)+4)-4]|e[A-3]<<8,y=A+g;if(y>r){a&&err(0);break}s&&i(u+g),t.set(e.subarray(A,y),u),n.b=u+=g,n.p=l=8*y,n.f=o;continue}if(1==m)c=flrm,f=fdrm,h=9,d=5;else if(2==m){var b=bits(e,l,31)+257,w=bits(e,l+10,15)+4,v=b+bits(e,l+5,31)+1;l+=14;for(var M=new u8(v),E=new u8(19),k=0;k<w;++k)E[clim[k]]=bits(e,l+3*k,7);l+=3*w;var O=max(E),x=(1<<O)-1,D=hMap(E,O,1);for(k=0;k<v;){var A,S=D[bits(e,l,x)];if(l+=15&S,(A=S>>>4)<16)M[k++]=A;else{var C=0,I=0;for(16==A?(I=3+bits(e,l,3),l+=2,C=M[k-1]):17==A?(I=3+bits(e,l,7),l+=3):18==A&&(I=11+bits(e,l,127),l+=7);I--;)M[k++]=C}}var P=M.subarray(0,b),T=M.subarray(b);h=max(P),d=max(T),c=hMap(P,h,1),f=hMap(T,d,1)}else err(1);if(l>p){a&&err(0);break}}s&&i(u+131072);for(var $=(1<<h)-1,N=(1<<d)-1,z=l;;z=l){var L=(C=c[bits16(e,l)&$])>>>4;if((l+=15&C)>p){a&&err(0);break}if(C||err(2),L<256)t[u++]=L;else{if(256==L){z=l,c=null;break}var F=L-254;if(L>264){var _=fleb[k=L-257];F=bits(e,l,(1<<_)-1)+fl[k],l+=_}var j=f[bits16(e,l)&N],V=j>>>4;if(j||err(3),l+=15&j,T=fd[V],V>3&&(_=fdeb[V],T+=bits16(e,l)&(1<<_)-1,l+=_),l>p){a&&err(0);break}s&&i(u+131072);for(var R=u+F;u<R;u+=4)t[u]=t[u-T],t[u+1]=t[u+1-T],t[u+2]=t[u+2-T],t[u+3]=t[u+3-T];u=R}}n.l=c,n.p=z,n.b=u,n.f=o,c&&(o=1,n.m=h,n.d=f,n.n=d)}while(!o);return u==t.length?t:slc(t,0,u)},wbits=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},wbits16=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},hTree=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return[et,0];if(1==s){var i=new u8(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,c=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=s-1;)o=n[n[u].f<n[f].f?u++:f++],l=n[u!=c&&n[u].f<n[f].f?u++:f++],n[c++]={s:-1,f:o.f+l.f,l:o,r:l};var h=a[0].s;for(r=1;r<s;++r)a[r].s>h&&(h=a[r].s);var d=new u16(h+1),p=ln(n[c-1],d,0);if(p>t){r=0;var m=0,g=p-t,y=1<<g;for(a.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));r<s;++r){var b=a[r].s;if(!(d[b]>t))break;m+=y-(1<<p-d[b]),d[b]=t}for(m>>>=g;m>0;){var w=a[r].s;d[w]<t?m-=1<<t-d[w]++-1:++r}for(;r>=0&&m;--r){var v=a[r].s;d[v]==t&&(--d[v],++m)}p=t}return[new u8(d),p]},ln=function(e,t,n){return-1==e.s?Math.max(ln(e.l,t,n+1),ln(e.r,t,n+1)):t[e.s]=n},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new u16(++t),r=0,s=e[0],a=1,i=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==s&&o!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=e[o]}return[n.subarray(0,r),t]},clen=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},wfblk=function(e,t,n){var r=n.length,s=shft(t+2);e[s]=255&r,e[s+1]=r>>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;a<r;++a)e[s+a+4]=n[a];return 8*(s+4+r)},wblk=function(e,t,n,r,s,a,i,o,l,u,c){wbits(t,c++,n),++s[256];for(var f=hTree(s,15),h=f[0],d=f[1],p=hTree(a,15),m=p[0],g=p[1],y=lc(h),b=y[0],w=y[1],v=lc(m),M=v[0],E=v[1],k=new u16(19),O=0;O<b.length;++O)k[31&b[O]]++;for(O=0;O<M.length;++O)k[31&M[O]]++;for(var x=hTree(k,7),D=x[0],A=x[1],S=19;S>4&&!D[clim[S-1]];--S);var C,I,P,T,$=u+5<<3,N=clen(s,flt)+clen(a,fdt)+i,z=clen(s,h)+clen(a,m)+i+14+3*S+clen(k,D)+(2*k[16]+3*k[17]+7*k[18]);if($<=N&&$<=z)return wfblk(t,c,e.subarray(l,l+u));if(wbits(t,c,1+(z<N)),c+=2,z<N){C=hMap(h,d,0),I=h,P=hMap(m,g,0),T=m;var L=hMap(D,A,0);for(wbits(t,c,w-257),wbits(t,c+5,E-1),wbits(t,c+10,S-4),c+=14,O=0;O<S;++O)wbits(t,c+3*O,D[clim[O]]);c+=3*S;for(var F=[b,M],_=0;_<2;++_){var j=F[_];for(O=0;O<j.length;++O){var V=31&j[O];wbits(t,c,L[V]),c+=D[V],V>15&&(wbits(t,c,j[O]>>>5&127),c+=j[O]>>>12)}}}else C=flm,I=flt,P=fdm,T=fdt;for(O=0;O<o;++O)if(r[O]>255){V=r[O]>>>18&31,wbits16(t,c,C[V+257]),c+=I[V+257],V>7&&(wbits(t,c,r[O]>>>23&31),c+=fleb[V]);var R=31&r[O];wbits16(t,c,P[R]),c+=T[R],R>3&&(wbits16(t,c,r[O]>>>5&8191),c+=fdeb[R])}else wbits16(t,c,C[r[O]]),c+=I[r[O]];return wbits16(t,c,C[256]),c+I[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(e,t,n,r,s,a){var i=e.length,o=new u8(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),u=0;if(!t||i<8)for(var c=0;c<=i;c+=65535){var f=c+65535;f>=i&&(l[u>>3]=a),u=wfblk(l,u+1,e.subarray(c,f))}else{for(var h=deo[t-1],d=h>>>13,p=8191&h,m=(1<<n)-1,g=new u16(32768),y=new u16(m+1),b=Math.ceil(n/3),w=2*b,v=function(t){return(e[t]^e[t+1]<<b^e[t+2]<<w)&m},M=new u32(25e3),E=new u16(288),k=new u16(32),O=0,x=0,D=(c=0,0),A=0,S=0;c<i;++c){var C=v(c),I=32767&c,P=y[C];if(g[I]=P,y[C]=I,A<=c){var T=i-c;if((O>7e3||D>24576)&&T>423){u=wblk(e,l,0,M,E,k,x,D,S,c-S,u),D=O=x=0,S=c;for(var $=0;$<286;++$)E[$]=0;for($=0;$<30;++$)k[$]=0}var N=2,z=0,L=p,F=I-P&32767;if(T>2&&C==v(c-F))for(var _=Math.min(d,T)-1,j=Math.min(32767,c),V=Math.min(258,T);F<=j&&--L&&I!=P;){if(e[c+N]==e[c+N-F]){for(var R=0;R<V&&e[c+R]==e[c+R-F];++R);if(R>N){if(N=R,z=F,R>_)break;var U=Math.min(F,R-2),q=0;for($=0;$<U;++$){var G=c-F+$+32768&32767,W=G-g[G]+32768&32767;W>q&&(q=W,P=G)}}}F+=(I=P)-(P=g[I])+32768&32767}if(z){M[D++]=268435456|revfl[N]<<18|revfd[z];var B=31&revfl[N],H=31&revfd[z];x+=fleb[B]+fdeb[H],++E[257+B],++k[H],A=c+N,++O}else M[D++]=e[c],++E[e[c]]}}u=wblk(e,l,a,M,E,k,x,D,S,c-S,u),!a&&7&u&&(u=wfblk(l,u+1,et))}return slc(o,0,r+shft(u)+s)},crct=null,crc=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=crct[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},adler=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,a=0|n.length,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(65535&r)+15*(r>>16),s=(65535&s)+15*(s>>16)}e=r,t=s},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},dopt=function(e,t,n,r,s){return dflt(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!s)},mrg=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},wcln=function(e,t,n){for(var r=e(),s=e.toString(),a=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<r.length;++i){var o=r[i],l=a[i];if("function"==typeof o){t+=";"+l+"=";var u=o.toString();if(o.prototype)if(-1!=u.indexOf("[native code]")){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else for(var f in t+=u,o.prototype)t+=";"+l+".prototype."+f+"="+o.prototype[f].toString();else t+=u}else n[l]=o}return[t,n]},ch=null,cbfs=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},wrkr=function(e,t,n,r){var s;if(!ch[n]){for(var a="",i={},o=e.length-1,l=0;l<o;++l)a=(s=wcln(e[l],a,i))[0],i=s[1];ch[n]=wcln(e[o],a,i)}var u=mrg({},ch[n][1]);return wk(ch[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,u,cbfs(u),r)},bInflt=function(){return[u8,u16,u32,fleb,fdeb,clim,fl,fd,flrm,fdrm,rev,ec,hMap,max,bits,bits16,shft,slc,err,inflt,inflateSync,pbf,gu8]},bDflt=function(){return[u8,u16,u32,fleb,fdeb,clim,revfl,revfd,flm,flt,fdm,fdt,rev,deo,et,hMap,wbits,wbits16,hTree,ln,lc,clen,wfblk,wblk,shft,slc,dflt,dopt,deflateSync,pbf]},gze=function(){return[gzh,gzhl,wbytes,crc,crct]},guze=function(){return[gzs,gzl]},zle=function(){return[zlh,wbytes,adler]},zule=function(){return[zlv]},pbf=function(e){return postMessage(e,[e.buffer])},gu8=function(e){return e&&e.size&&new u8(e.size)},cbify=function(e,t,n,r,s,a){var i=wrkr(n,r,s,(function(e,t){i.terminate(),a(e,t)}));return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},astrm=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},astrmify=function(e,t,n,r,s){var a,i=wrkr(e,r,s,(function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))}));i.postMessage(n),t.push=function(e,n){t.ondata||err(5),a&&t.ondata(err(4,0,1),null,!!n),i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},b2=function(e,t){return e[t]|e[t+1]<<8},b4=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},b8=function(e,t){return b4(e,t)+4294967296*b4(e,t+4)},wbytes=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},gzh=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&wbytes(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},gzs=function(e){31==e[0]&&139==e[1]&&8==e[2]||err(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},gzl=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},gzhl=function(e){return 10+(e.filename&&e.filename.length+1||0)},zlh=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},zlv=function(e){(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&err(6,"invalid zlib data"),32&e[1]&&err(6,"invalid zlib data: preset dictionaries not supported")};function AsyncCmpStrm(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var Deflate=null,AsyncDeflate=null;function deflate(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bDflt],(function(e){return pbf(deflateSync(e.data[0],e.data[1]))}),0,n)}function deflateSync(e,t){return dopt(e,t||{},0,0)}var Inflate=null,AsyncInflate=null;function inflate(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bInflt],(function(e){return pbf(inflateSync(e.data[0],gu8(e.data[1])))}),1,n)}function inflateSync(e,t){return inflt(e,t)}var Gzip=null,AsyncGzip=null;function gzip(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bDflt,gze,function(){return[gzipSync]}],(function(e){return pbf(gzipSync(e.data[0],e.data[1]))}),2,n)}function gzipSync(e,t){t||(t={});var n=crc(),r=e.length;n.p(e);var s=dopt(e,t,gzhl(t),8),a=s.length;return gzh(s,t),wbytes(s,a-8,n.d()),wbytes(s,a-4,r),s}var Gunzip=null,AsyncGunzip=null;function gunzip(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bInflt,guze,function(){return[gunzipSync]}],(function(e){return pbf(gunzipSync(e.data[0]))}),3,n)}function gunzipSync(e,t){return inflt(e.subarray(gzs(e),-8),t||new u8(gzl(e)))}var Zlib=null,AsyncZlib=null;function zlib(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bDflt,zle,function(){return[zlibSync]}],(function(e){return pbf(zlibSync(e.data[0],e.data[1]))}),4,n)}function zlibSync(e,t){t||(t={});var n=adler();n.p(e);var r=dopt(e,t,2,4);return zlh(r,t),wbytes(r,r.length-4,n.d()),r}var Unzlib=null,AsyncUnzlib=null;function unzlib(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),cbify(e,t,[bInflt,zule,function(){return[unzlibSync]}],(function(e){return pbf(unzlibSync(e.data[0],gu8(e.data[1])))}),5,n)}function unzlibSync(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}var Decompress=null,AsyncDecompress=null;function decompress(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&err(7),31==e[0]&&139==e[1]&&8==e[2]?gunzip(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?inflate(e,t,n):unzlib(e,t,n)}function decompressSync(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?gunzipSync(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?inflateSync(e,t):unzlibSync(e,t)}var fltn=function(e,t,n,r){for(var s in e){var a=e[s],i=t+s,o=r;Array.isArray(a)&&(o=mrg(r,a[1]),a=a[0]),a instanceof u8?n[i]=[a,o]:(n[i+="/"]=[new u8(0),o],fltn(a,i,n,r))}},te="undefined"!=typeof TextEncoder&&new TextEncoder,td="undefined"!=typeof TextDecoder&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(e){}var dutf8=function(e){for(var t="",n=0;;){var r=e[n++],s=(r>127)+(r>223)+(r>239);if(n+s>e.length)return[t,slc(e,n-1)];s?3==s?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&s?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},DecodeUTF8=null,EncodeUTF8=null;function strToU8(e,t){if(t){for(var n=new u8(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(te)return te.encode(e);var s=e.length,a=new u8(e.length+(e.length>>1)),i=0,o=function(e){a[i++]=e};for(r=0;r<s;++r){if(i+5>a.length){var l=new u8(i+8+(s-r<<1));l.set(a),a=l}var u=e.charCodeAt(r);u<128||t?o(u):u<2048?(o(192|u>>6),o(128|63&u)):u>55295&&u<57344?(o(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),o(128|u>>12&63),o(128|u>>6&63),o(128|63&u)):(o(224|u>>12),o(128|u>>6&63),o(128|63&u))}return slc(a,0,i)}function strFromU8(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(td)return td.decode(e);var s=dutf8(e),a=s[0];return s[1].length&&err(8),a}var dbf=function(e){return 1==e?3:e<6?2:9==e?1:0},slzh=function(e,t){return t+30+b2(e,t+26)+b2(e,t+28)},zh=function(e,t,n){var r=b2(e,t+28),s=strFromU8(e.subarray(t+46,t+46+r),!(2048&b2(e,t+8))),a=t+46+r,i=b4(e,t+20),o=n&&4294967295==i?z64e(e,a):[i,b4(e,t+24),b4(e,t+42)],l=o[0],u=o[1],c=o[2];return[b2(e,t+10),l,u,s,a+b2(e,t+30)+b2(e,t+32),c]},z64e=function(e,t){for(;1!=b2(e,t);t+=4+b2(e,t+2));return[b8(e,t+12),b8(e,t+4),b8(e,t+20)]},exfl=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&err(9),t+=r+4}return t},wzh=function(e,t,n,r,s,a,i,o){var l=r.length,u=n.extra,c=o&&o.length,f=exfl(u);wbytes(e,t,null!=i?33639248:67324752),t+=4,null!=i&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a<0&&8),e[t++]=s&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),d=h.getFullYear()-1980;if((d<0||d>119)&&err(10),wbytes(e,t,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,-1!=a&&(wbytes(e,t,n.crc),wbytes(e,t+4,a<0?-a-2:a),wbytes(e,t+8,n.size)),wbytes(e,t+12,l),wbytes(e,t+14,f),t+=16,null!=i&&(wbytes(e,t,c),wbytes(e,t+6,n.attrs),wbytes(e,t+10,i),t+=14),e.set(r,t),t+=l,f)for(var p in u){var m=u[p],g=m.length;wbytes(e,t,+p),wbytes(e,t+2,g),e.set(m,t+4),t+=4+g}return c&&(e.set(o,t),t+=c),t},wzf=function(e,t,n,r,s){wbytes(e,t,101010256),wbytes(e,t+8,n),wbytes(e,t+10,n),wbytes(e,t+12,r),wbytes(e,t+16,s)},ZipPassThrough=null,ZipDeflate=null,AsyncZipDeflate=null,Zip=null;function zip(e,t,n){n||(n=t,t={}),"function"!=typeof n&&err(7);var r={};fltn(e,"",r,t);var s=Object.keys(r),a=s.length,i=0,o=0,l=a,u=new Array(a),c=[],f=function(){for(var e=0;e<c.length;++e)c[e]()},h=function(e,t){mt((function(){n(e,t)}))};mt((function(){h=n}));var d=function(){var e=new u8(o+22),t=i,n=o-i;o=0;for(var r=0;r<l;++r){var s=u[r];try{var a=s.c.length;wzh(e,o,s,s.f,s.u,a);var c=30+s.f.length+exfl(s.extra),f=o+c;e.set(s.c,f),wzh(e,i,s,s.f,s.u,a,o,s.m),i+=16+c+(s.m?s.m.length:0),o=f+a}catch(e){return h(e,null)}}wzf(e,i,u.length,n,t),h(null,e)};a||d();for(var p=function(e){var t=s[e],n=r[t],l=n[0],p=n[1],m=crc(),g=l.length;m.p(l);var y=strToU8(t),b=y.length,w=p.comment,v=w&&strToU8(w),M=v&&v.length,E=exfl(p.extra),k=0==p.level?0:8,O=function(n,r){if(n)f(),h(n,null);else{var s=r.length;u[e]=mrg(p,{size:g,crc:m.d(),c:r,f:y,m:v,u:b!=t.length||v&&w.length!=M,compression:k}),i+=30+b+E+s,o+=76+2*(b+E)+(M||0)+s,--a||d()}};if(b>65535&&O(err(11,0,1),null),k)if(g<16e4)try{O(null,deflateSync(l,p))}catch(e){O(e,null)}else c.push(deflate(l,p,O));else O(null,l)},m=0;m<l;++m)p(m);return f}function zipSync(e,t){t||(t={});var n={},r=[];fltn(e,"",n,t);var s=0,a=0;for(var i in n){var o=n[i],l=o[0],u=o[1],c=0==u.level?0:8,f=(k=strToU8(i)).length,h=u.comment,d=h&&strToU8(h),p=d&&d.length,m=exfl(u.extra);f>65535&&err(11);var g=c?deflateSync(l,u):l,y=g.length,b=crc();b.p(l),r.push(mrg(u,{size:l.length,crc:b.d(),c:g,f:k,m:d,u:f!=i.length||d&&h.length!=p,o:s,compression:c})),s+=30+f+m+y,a+=76+2*(f+m)+(p||0)+y}for(var w=new u8(a+22),v=s,M=a-s,E=0;E<r.length;++E){var k=r[E];wzh(w,k.o,k,k.f,k.u,k.c.length);var O=30+k.f.length+exfl(k.extra);w.set(k.c,k.o+O),wzh(w,s,k,k.f,k.u,k.c.length,k.o,k.m),s+=16+O+(k.m?k.m.length:0)}return wzf(w,s,r.length,M,v),w}var UnzipPassThrough=null,UnzipInflate=null,AsyncUnzipInflate=null,Unzip=null,mt="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};function unzip(e,t,n){n||(n=t,t={}),"function"!=typeof n&&err(7);var r=[],s=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=function(e,t){mt((function(){n(e,t)}))};mt((function(){i=n}));for(var o=e.length-22;101010256!=b4(e,o);--o)if(!o||e.length-o>65558)return i(err(13,0,1),null),s;var l=b2(e,o+8);if(l){var u=l,c=b4(e,o+16),f=4294967295==c||65535==u;if(f){var h=b4(e,o-12);(f=101075792==b4(e,h))&&(u=l=b4(e,h+32),c=b4(e,h+48))}for(var d=t&&t.filter,p=function(t){var n=zh(e,c,f),o=n[0],u=n[1],h=n[2],p=n[3],m=n[4],g=n[5],y=slzh(e,g);c=m;var b=function(e,t){e?(s(),i(e,null)):(t&&(a[p]=t),--l||i(null,a))};if(!d||d({name:p,size:u,originalSize:h,compression:o}))if(o)if(8==o){var w=e.subarray(y,y+u);if(u<32e4)try{b(null,inflateSync(w,new u8(h)))}catch(e){b(e,null)}else r.push(inflate(w,{size:h},b))}else b(err(14,"unknown compression type "+o,1),null);else b(null,slc(e,y,y+u));else b(null,null)},m=0;m<u;++m)p()}else i(null,{});return s}function unzipSync(e,t){for(var n={},r=e.length-22;101010256!=b4(e,r);--r)(!r||e.length-r>65558)&&err(13);var s=b2(e,r+8);if(!s)return{};var a=b4(e,r+16),i=4294967295==a||65535==s;if(i){var o=b4(e,r-12);(i=101075792==b4(e,o))&&(s=b4(e,o+32),a=b4(e,o+48))}for(var l=t&&t.filter,u=0;u<s;++u){var c=zh(e,a,i),f=c[0],h=c[1],d=c[2],p=c[3],m=c[4],g=c[5],y=slzh(e,g);a=m,l&&!l({name:p,size:h,originalSize:d,compression:f})||(f?8==f?n[p]=inflateSync(e.subarray(y,y+h),new u8(d)):err(14,"unknown compression type "+f):n[p]=slc(e,y,y+h))}return n}const NAMESPACE_REG_EXP=/.+\:/,findChild=(e,t,n=!1)=>{let r=new MyArray;for(let n of e.childNodes)1===n.nodeType&&getTagName(n)===t&&r.push(n);return n?r:r.shift()},getTagName=e=>e.tagName.replace(NAMESPACE_REG_EXP,""),getOuterXml=e=>{if(1!==e.nodeType)return e.textContent;const{attributes:t,childNodes:n}=e,r=t.map((e=>`${e.name}="${e.value}"`)).join(" "),s=getTagName(e);let a="";return n.forEach((e=>a+=getOuterXml(e))),`<${s} ${r}>${a}</${s}>`};function forEach(e,t,n){let r=0;for(let s of e.childNodes)t?1===s.nodeType&&getTagName(s)===t&&n(s,r):n(s,r),r++}function map(e,t,n){let r=new MyArray;return forEach(e,t,(function(e,t){r.push(n(e,t))})),r}class Xlsx{constructor(){}static getCells(e){let t=findChild(e.documentElement,"sheetData"),n=new MyArray;return forEach(t,"row",(e=>{forEach(e,"c",(e=>{n.push(e)}))})),n}static getMergedCells(e){let t=findChild(e.documentElement,"mergeCells"),n=new MyArray;return t&&forEach(t,"mergeCell",(function(e){n.push(e.getAttribute("ref"))})),n}static getCellValue(e){return findChild(e,"v")}static getCellInlineStringValue(e){if(e.firstChild&&"is"===getTagName(e.firstChild)&&e.firstChild.firstChild&&"t"===getTagName(e.firstChild.firstChild))return e.firstChild.firstChild.textContent}static getDimensions(e){let t=findChild(e.documentElement,"dimension");return t?t.getAttribute("ref"):"A1:A1"}static getSharedStrings(e){return map(e.documentElement,"si",(function(e){const t=findChild(e,"t");if(t)return t.textContent;let n="";return forEach(e,"r",(function(e){n+=findChild(e,"t").textContent})),n}))}static getBaseStyles(e){let t=findChild(e.documentElement,"cellStyleXfs");return t?findChild(t,"xf",!0):new MyArray}static getNumberFormats(e){let t=findChild(e.documentElement,"numFmts");return t?findChild(t,"numFmt",!0):new MyArray}static getWorkbookProperties(e){return findChild(e.documentElement,"workbookPr")}static getCellStyles(e){let t=findChild(e.documentElement,"cellXfs");return t?findChild(t,"xf",!0):new MyArray}static getRelationships(e){return findChild(e.documentElement,"Relationship",!0)}static getSheets(e){let t=findChild(e.documentElement,"sheets");return t?findChild(t,"sheet",!0):new MyArray}}function isDateTimestamp(e,t,n){const r=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],s=/^\[\$-414\]/,a=/;@$/,i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"],{dateFormat:o,smartDateParser:l}=n;if(e){let n=t[e];if(!n)throw new Error(`Cell style not found: ${e}`);let{numberFormat:u}=n||t,{id:c,template:f}=u;if(r.indexOf(parseInt(c))>=0||o&&f===o||!1!==l&&f&&(e=>{e=e.toLowerCase().replace(s,"").replace(a,"");for(let t of e.split(/\W+/))if(i.indexOf(t)<0)return!1;return!0})(f))return!0}return!1}function parseDimensions(e){let t=Xlsx.getDimensions(e);if(t){let e=t.split(":").map(parseCellCoordinates).map((e=>{let[t,n]=e;return{row:t,column:n}}));return 1===e.length&&(e=[e[0],e[0]]),e}}function parseCells(e,t,n,r,s){let a=Xlsx.getCells(e);return a.isEmpty?a:a.map((e=>(e=>{let[a,i]=parseCellCoordinates(e.getAttribute("r")),o=Xlsx.getCellValue(e);return{row:a,column:i,value:parseCellValue(o&&o.textContent,e.getAttribute("t"),{inlineStringValue:()=>Xlsx.getCellInlineStringValue(e),inlineStringXml:()=>getOuterXml(e),styleId:()=>e.getAttribute("s"),styles:n,values:t,properties:r,options:s})}})(e)))}function parseCellCoordinates(e){let[t,n]=e.split(/(\d+)/);return[parseInt(n),columnLettersToNumber(t.trim())]}function parseCellValue(e,t,n){let{inlineStringValue:r,inlineStringXml:s,styleId:a,styles:i,values:o,properties:l,options:u}=n;switch(t=t||"n"){case"str":e=parseString(e,u);break;case"inlineStr":if(!(e=r()))throw new Error(`Unsupported "inline string" cell value structure: ${s()}`);e=parseString(e,u);break;case"s":let n=Number(e);if(isNaN(n))throw new Error(`Invalid "shared" string index: ${e}`);if(n>=o.length)throw new Error(`An out-of-bounds "shared" string index: ${e}`);e=parseString(o[n],u);break;case"b":if(!/^(?:0|1)?$/g.test(e))throw new Error(`Unsupported "boolean" cell value: ${e}`);e="1"===e;break;case"z":e=void 0;break;case"e":e=decodeError(e);break;case"d":if(void 0===e)break;let c=new Date(e);if(isNaN(c.valueOf()))throw new Error(`Unsupported "date" cell value: ${e}`);e=c;break;case"n":if(void 0===e)break;let f=Number(e);if(isNaN(f))throw new Error(`Invalid "numeric" cell value: ${e}`);e=isDateTimestamp(a(),i,u)?parseDate(f,l):f;break;default:throw new TypeError(`Cell type not supported: ${t}`)}return e||null}function calculateDimensions(e){const t=(e,t)=>e-t,n=n=>{let r=e.map((e=>e[n])).short(t);return[r.shift(),r.pop()]};let[r,s]=n("row"),[a,i]=n("column");return[{row:r,column:a},{row:s,column:i}]}function decodeError(e){return{0:"#NULL!",7:"#DIV/0",23:"#VALUE!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA"}[e]||`#ERROR_${e}`}function parseString(e,t){let{trim:n}=t;return(e=!1!==n?e.trim():e)||void 0}function parseDate(e,t){return t&&t.epoch1904&&(e+=1462),new Date(Math.round(24*(e-25569)*36e5))}function columnLettersToNumber(e){const t=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return((e,n)=>{for(let r of n)e=26*e+t.indexOf(r);return e})(0,e)}function createDocument(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function parseProperties(e){let t=createDocument(e),n=Xlsx.getWorkbookProperties(t),r={};return n&&"1"===n.getAttribute("date1904")&&(r.epoch1904=!0),r.sheets=new MyArray,Xlsx.getSheets(t).forEach((e=>{e.getAttribute("name")&&r.sheets.push({id:e.getAttribute("sheetId"),name:e.getAttribute("name"),relationId:e.getAttribute("r:id")})})),r}function parseFilePaths(e){let t=createDocument(e),n={sheets:{},sharedStrings:void 0,styles:void 0};const r=e=>"/"===e[0]?e.slice("/".length):`xl/${e}`;return Xlsx.getRelationships(t).forEach((e=>{let t=e.getAttribute("Target");switch(e.getAttribute("Type")){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[e.getAttribute("Id")]=r(t)}})),n}function parseStyles(e){if(!e)return{};const t=(e,t)=>{let n={};if(e.hasAttribute("numFmtId")){let r=e.getAttribute("numFmtId");n.numberFormat=t[r]??{id:r}}return n};let n=createDocument(e),r=Xlsx.getBaseStyles(n).map(t),s=Xlsx.getNumberFormats(n).map((e=>({id:e.getAttribute("numFmtId"),template:e.getAttribute("formatCode")}))).reduce(((e,t)=>(e[t.id]=t,e)),[]);return Xlsx.getCellStyles(n).map((e=>e.hasAttribute("xfId")?Object.assign({},r[e.xfId],t(e,s)):t(e,s)))}function parseSharedStrings(e){return e?Xlsx.getSharedStrings(createDocument(e)):new MyArray}function parseSheet(e,t,n,r,s){let a=createDocument(e),i=parseCells(a,t,n,r,s);return{cells:i,dimensions:parseDimensions(a)||calculateDimensions(i)}}async function readXlsxFile(e,t={}){return t=Object.assign({},t),readXlsx(await getXlsContents(e),t)}async function getXlsContents(e){if(!(e=e instanceof File||e instanceof Blob?await e.arrayBuffer():e))return{};const t=unzipSync(new Uint8Array(e)),n=new Map;for(let e of Object.keys(t))n.set(e,strFromU8(t[e]));return n}function readXlsx(e,t={sheet:1}){let{sheet:n}=t;const r=t=>{if(!e.has(t))throw new Error(`"${t}" file not found inside the *.xlsx file zip archive`);return e.get(t)},s=parseFilePaths(r("xl/_rels/workbook.xml.rels")),a=s.sharedStrings?parseSharedStrings(r(s.sharedStrings)):[],i=s.styles?parseStyles(r(s.styles)):{},o=parseProperties(r("xl/workbook.xml")),l=getSheetId(n,o.sheets);if(!l||!s.sheets[l])throw createSheetNotFoundError(n,o.sheets);return getData(parseSheet(r(s.sheets[l]),a,i,o,t),t)}function getSheetId(e,t){if("number"==typeof e){let{relationId:n}=t[e-1];return n}for(let{name:n,relationId:r}of t)if(n===e)return r}function createSheetNotFoundError(e,t){const n=t.map((({name:e},t)=>`"${e}" (#${t+1})`)).join(", ");return new Error(`Sheet ${"number"==typeof e?`#${e}`:`"${e}"`} not found in the *.xlsx file.`.concat(t?` Available sheets: ${n}."`:""))}function getData(e,t){let{dimensions:n,cells:r}=e,{transformData:s}=t;if(r.isEmpty)return[];let[a,i]=n,{row:o,column:l}=i,u=new MyArray(o);for(let{row:e,column:t,value:n}of r)e-=1,t-=1,t<l&&e<o&&(u[e]||(u[e]=new MyArray),u[e][t]=n);return s?s(u):u}const monthIndex=e=>{if(rgx.formatedDate.test(e[0]))return 2;let t=new MyArray,n=new MyArray;return e.forEach(((e,r)=>{[t[r],n[r]]=e.split(/\/|:|-/)})),t.some((e=>e>12))||n.some((e=>e>12))?t.some((e=>e>12))?1:0:t.countValue(t[0])>n.countValue(n[0])?0:1},useComma=e=>{let t=String.raw`^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*)*$`;return new RegExp(t).test(e)},rowValue=(e=",",t="")=>{let n=","==e?`${e};`:e,r=String.raw`(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^${n}"\s\\]*(?:\s+[^${n}"\s\\]+)*))\s*(?:${e}|$)`;return t?new RegExp(r,t):new RegExp(r)},getSignDate=e=>{if("string"==typeof e)return(e=rgx.datePattern.exec(e))?e.toString():null;let[t]=e.filter((e=>rgx.datePattern.test(e)));return t?t.toString():null},setPhone=e=>(e="string"==typeof e?e:Array.isArray(e)?e.join(""):e.toString()).replace(rgx.phoneValue,(function(e,t,n,r){let s=void 0!==t?t:n.replace(/(\-| )/g,"");return("8"===s.charAt(0)&&"+"!==e.charAt(0)?"62":"")+s})),transformRow=e=>{if(e.isEmpty)return!1;const t=e=>rgx.phonePattern.test(e);return!!e.some(((e,n)=>t(e)&&0!==n))&&(e.forEach(((n,r)=>{var s;e[r]=/^"(.*)"$/.test(n)?n.replace(/(^")|("$)/g,""):e[r],e[r]=t(n)?(s="string"==typeof(s=n)?s:Array.isArray(s)?s.join(""):s.toString()).replace(rgx.phoneValue,(function(e,t,n,r){let s=void 0!==t?t:n.replace(/(\-| )/g,"");return("8"===s.charAt(0)&&"+"!==e.charAt(0)?"62":"")+s})):isNumeric(n)?Number(n).toString():e[r]})),e)};class CSVFile{constructor(){this.types=new MyArray("gagal","error"),this.fileName={fname:[],ftype:"",numb:1,ext:".csv"},this.options=createFilteredObject(options.default,["monthIndex","splitter"])}async import(e){if(!e)return this;const t=await(n=e,"text/csv"===n.type?n.text():n.arrayBuffer());var n;return t?(this.constructFileName(e.name),this.readData(t)):this}constructFileName(e){let[t,n]=e.split(".");const r={fname:[],ftype:"",numb:1,ext:`.${n||"csv"}`};t.replace(rgx.forFilename,((e,t,n,s)=>(void 0!==s&&r.fname.push(s),void 0!==t&&this.types.isOnArray(t)&&(r.ftype=t||""),void 0!==n&&(r.numb=isNumeric(n)?Number(n):1),""))),this.fileName=Object.assign({},this.fileName,r)}async readData(e){const t="string"==typeof e?e.split(/\r\n|\r|\n/):await this.handleExcel(e),n=(([e,...t])=>"string"==typeof(e=e||t[0])&&(useComma(e)?",":";"))(t),r=new MyArray,s=new MyArray;return t.forEach((e=>{let t=(e=>{let t=Array.isArray(e)?e:this.toArray(e,n);return transformRow(t)})(e);if(t){r.push(t);let n=getSignDate(e);n&&s.push(n)}})),this.options=Object.assign({},this.options,{monthIndex:!s.isEmpty&&monthIndex(s),splitter:n||this.options.splitter}),n&&options.setOption("splitter",n),this.data=r.filter((e=>!e.isEmpty)),this}async handleExcel(e,t={}){let n=Object.assign({},{sheet:1},t);return await readXlsxFile(e,n)}toArray(e,t=","){let n=new MyArray;return e.replace(rowValue(t,"g"),((e,...t)=>(t.forEach(((e,r)=>{if(r>=t.length-2)return;const{rgx:s,val:a}=(e=>({rgx:[/\\'/g,/\\"/g,/^['"]?(.*)['"]?$/][e],val:["'",'"',"$1"][e]}))(r);e&&n.push(e.replace(s,a))})),""))),/,\s*$/.test(e)&&n.push(""),n.nonEmptyValue}export(e,t){const{splitter:n}=this.options,r=(e=>{let{fname:t}=this.fileName;return`${t.join("_")}_${e}${(()=>{let{ftype:t,numb:n}=this.fileName;return e!==t?"":`_${n+1}`})()}`})(e);return CSVFile.createFile(r,t,n)}static createFile(e,t,n=","){const r=((e,t)=>{const n=e=>{let t=(e=e?e instanceof Date?e.toLocaleString():e.toString():"").replace(/"/g,'""');return t.search(/("|,|\n)/g)>=0&&(t=`"${t}"`),t};let r="";return e.forEach((e=>r+=(e=>{let r=t||",";return`${e.map(n).join(r)}\n`})(e))),new Blob([r],{type:"text/csv;charset=utf-8;"})})(t,n);return{fileUrl:URL.createObjectURL(r),fileName:`${e}.csv`}}}const csvFile=new CSVFile;class Debug{static current(e){options.debug&&console.log("test",e)}}class Waydown{constructor(){this.src="",this.rgx={lt:/</g,gt:/>/g,escape:/\\([\\\|`*_{}\[\]()#+\-~])/g,format:/(^|[^A-Za-z\d\\])(([*])|(_)|(~)|`)(\2?)([^<]*?)\2\6(?!\2)(?=\W|_|$)/g,link:/(?:(http(?:s)?)?:\/\/)?((?:([a-z\d-]+?)\.([\.a-z]{2,}?))|((?:[\.\d]{1,3}?){4}?))(\:\d+)?((?:\/[-a-z\d%_.~+]*?)*?)(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?(?=$|\s|\n|<)/gi,para:/(?=^|\n)(\s+)*([^<]+?)[\n\s]*(?=<|\n|$)/g},this.plain=!1}#t(e,t,n={}){return DOM.createElement(Object.assign({tag:e,html:t},n)).outerHTML}#n(e){return e.replace(this.rgx.escape,"$1")}#r(e){let{format:t}=this.rgx;return this.plain?e:e.replace(t,((e,t,n,r,s,a,i,o)=>{const l=((e,t,n,r)=>r?"code":e?"strong":t?"em":n?"s":"")(r,s,a,i);return o=i?o.replace(/`/g,""):o,`${t}${this.#t(l,this.#r(o))}`}))}#s(){let{link:e}=this.rgx;return this.src=this.src.replace(e,((e,...t)=>{let[n,r]=t;return this.#t("a",e,{href:e,title:r,alt:r,target:"_blank"})})),this}#a(){let{para:e}=this.rgx;return this.src=this.src.replace(e,((e,t,n)=>`${t=t?t.replace(/\n/,"<br/>"):""}${this.#t("div",this.#n(this.#r(n)))}`)),this}#i(){return this.src=this.src.trim(),this.src}toHtml(e,t=!1){const{lt:n,gt:r}=this.rgx;return this.src=`${e}`,this.plain=t,this.src=this.src.replace(n,"&lt;").replace(r,"&gt;"),this.#a().#s().#i()}}const waydown=new Waydown;class Reports{constructor(){this.sukses=0,this.gagal=new MyArray,this.error=new MyArray}reset(){this.sukses=0,this.gagal=new MyArray,this.error=new MyArray}createData(e){let t=this[e]||new MyArray;return{count:t.length,data:t}}success(){this.sukses++}fail(e,t=1){t?this.error.push(e):this.gagal.push(e)}}const report=new Reports;class Interval{constructor(){this.timer=!1,this.time=null,this.fn=null}get isRunning(){return!1!==this.timer}set(e,t){this.time=e,this.fn=t}start(e=null){this.isRunning||(this.timer=setInterval(this.fn,this.time)),e&&"function"==typeof e&&e(!0)}break(e=null){this.isRunning&&(clearInterval(this.timer),this.timer=!1),e&&"function"==typeof e&&e(!1)}stop(e=null){this.fn=null,this.time=null,this.break(e)}}const loop=new Interval;class Queue{constructor(){this.currentIndex=0,this.queue=new MyArray,this.stock=new MyArray,this.offset=0}get isEmpty(){return this.queue.isEmpty}get now(){return this.queue.isEmpty?void 0:this.queue[this.offset]}get size(){return this.queue.length-this.offset}get long(){return this.stock.length}setData(e){this.queue=e,this.stock=e}run(){if(this.queue.isEmpty)return;let e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}reset(){this.queue=new MyArray,this.stock=new MyArray,this.offset=0,this.currentIndex=0}reload(){this.queue=this.stock,this.currentIndex=0,this.offset=0}}const queue=new Queue;class Changelog extends GM_Library{constructor(){super();const e=this.getValue("wayfu-changelog",new MyArray);this.details=0!==e.length?new MyArray(...e):new MyArray}get getChanges(){const{homepage:e}=this.appInfo;return new Promise((t=>{let n={url:`${e}files/changelog.json`,onload:e=>{const{status:n,responseText:r}=e;if(200===n){let e=JSON.parse(r);e=Array.isArray(e)?e:e.changelog,t(e)}else t(200===n)}};this.request(n)}))}get Log(){return this.details}async doUpdate(e){const t=rgx.getVersion.exec(e)[1],{version:n,name:r,downloadURL:s}=this.appInfo;if(!isUpToDate(n,t)){const e=`${r} ${t} sudah tersedia, perbaharui sekarang?`;await modal.confirm(e)&&(window.location.href=s)}}async checkUpdate(){const{updateURL:e}=this.appInfo,t=new Promise((t=>{const n={url:`${e}`,onload:e=>{const{status:n,responseText:r}=e;t(200===n&&r)}};this.request(n)}));return this.details=new MyArray(...await this.getChanges),this.save(),this.doUpdate(await t),this}save(){this.setValue("wayfu-changelog",this.details)}}const changes=new Changelog;class Messages extends BaseModel{constructor(){super(),this.apiLink="api.whatsapp.com/send?phone=",this.inputMessage="",this.inputCaption="",this.imageFile="",this.idNumber="",this.name="",this.phone="",this.poinValue="",this.date="",this.sponsorName="",this.other=[]}setData(e){var t;[this.idNumber,this.name,this.phone,this.poinValue,this.date,this.sponsorName,...this.other]=(t=e[2],rgx.phonePattern.test(t)?e:["",...e])}get encodedMsg(){const{useImage:e,hasImage:t,useCaption:n}=options,r=!e||!t||"caption"===n,s=this.inputMessage&&r?this.subtitute(this.inputMessage):"";return""!==s?encodeURIComponent(s).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"):s}get link(){return this.apiLink+this.phone+`&text=${this.encodedMsg}`}setMessage(e,t,n){const r=e=>new RegExp(String.raw`(DATA_${e})(\s|\D|$)`,"g");if("oriflame"===options.userType){for(let r=t;r<3;r++){const t=rgx.datePattern.test(n),s=isNumeric(n);if(0===r&&s){const t=e=>{const t=options.targetBp-Number(e);return t>0?t:0};e=e.replace(/P_BP/g,`${n} BP`).replace(/K_BP/g,`${t(n)} BP`)}else 1===r&&t?e=e.replace(/L_DAY/g,this.lastDay(n)).replace(/S_DAY/g,this.lastDay(n,!1)):2!==r||s||t||(e=e.replace(/F_INVS/g,setName(n,!0)).replace(/INVS/g,setName(n)))}return t>2?e.replace(r(t-2),`${n}$2`):e}return e.replace(r(t+1),`${n}$2`)}subtitute(e){if(""!==e&&null!==e){const t=[this.poinValue,this.date,this.sponsorName,...this.other];e=(e=e.replace(/F_NAMA/g,setName(this.name,!0)).replace(/NAMA/g,setName(this.name))).replace(/PHONE/g,this.phone),e=""!==this.idNumber?e.replace("oriflame"===options.userType?/NO_KONS/g:/DATA_0/g,this.idNumber):e,t.forEach(((t,n)=>{e=t?this.setMessage(e,n,t):e}))}return e}lastDay(e,t=!1){const n=options.monthIndex,r=options.default.monthIndex;let s=new MyDate(options.isFormat||r===n?e:MyArray.split(e,"/").changeIndex(n,r).join("/"));return s=t?s.addDays(30):s,dateFormat(s,t)}async sendImg(){const{useCaption:e}=options,t="caption"===e?this.inputCaption:this.inputMessage;return await window.WAPI.SendImgToChat(this.phone,this.imageFile,this.subtitute(t))}}const message=new Messages;class Validators extends BaseModel{constructor(){super(),this.errors={}}get errorList(){const e=new MyArray;if(0!==Object.entries(this.errors).length)for(const t in this.errors)e.push(this.error(t));return e}validate(e){this.errors={},e=this.intoObject(e);for(let t in e)e[t].rules.forEach((e=>this[e](t)));return 0===Object.entries(this.errors).length}notEmpty(e){let[t,n]=(e=>{let[t,n]=[!1,""];return"message"===e?(t=""!==message.inputMessage,n="Silahkan Masukkan Pesan terlebih dahulu..."):"queue"===e&&(t=void 0!==queue.now,n="Silahkan Masukkan File Penerima Pesan..."),[t,n]})(e);return t||(this.errors[`${e}.isEmpty`]=n),t}belowMax(e){let{maxQueue:t}=options,{size:n}=queue;return!(n>t&&(this.errors[`${e}.overMax`]=`Blast Auto tidak boleh lebih dari ${t} Nomor!`,1))}error(e){return this.errors[e]}showError(){const e=this.errorList;if(!e.isEmpty){const t=DOM.createListElement(e,"ul",{classid:"wfu-reports"});modal.alert(t,"[ERROR] Proses Gagal Dimulai")}}}const validator=new Validators;async function checkStatus(){if(0!==queue.currentIndex&&queue.now)return!(await modal.confirm(`Lanjutkan Proses dari data ke-${queue.currentIndex+1}?`)||await modal.confirm("Proses ulang dari awal?")&&(reloadRecipient(),1));const e=validator.validate({message:{rules:["notEmpty"]},queue:{rules:["notEmpty","belowMax"]}});return validator.showError(),!e}function loadRecipient(e){let t="auto"!==options.dateFormat?options.dateFormat:e.options.monthIndex||options.monthIndex,n=2==t;options.setOptions(Object.assign({},e.options,{monthIndex:t,isFormat:n})),queue.setData(e.data),updateUI()}function reloadRecipient(){queue.reload(),updateUI()}function resetRecipient(){queue.reset(),updateUI()}function setStatus(e){return DOM.setElements([{elm:"#_blast-ico",props:{d:e?"M505.16405,19.29688c-1.176-5.4629-6.98736-11.26563-12.45106-12.4336C460.61647,0,435.46433,0,410.41962,0,307.2013,0,245.30155,55.20312,199.09162,128H94.88878c-16.29733,0-35.599,11.92383-42.88913,26.49805L2.57831,253.29688A28.39645,28.39645,0,0,0,.06231,264a24.008,24.008,0,0,0,24.00353,24H128.01866a96.00682,96.00682,0,0,1,96.01414,96V488a24.008,24.008,0,0,0,24.00353,24,28.54751,28.54751,0,0,0,10.7047-2.51562l98.747-49.40626c14.56074-7.28515,26.4746-26.56445,26.4746-42.84374V312.79688c72.58882-46.3125,128.01886-108.40626,128.01886-211.09376C512.07522,76.55273,512.07522,51.40234,505.16405,19.29688ZM384.05637,168a40,40,0,1,1,40.00589-40A40.02,40.02,0,0,1,384.05637,168ZM35.68474,352.06641C9.82742,377.91992-2.94985,442.59375.57606,511.41016c69.11565,3.55859,133.61147-9.35157,159.36527-35.10547,40.28913-40.2793,42.8774-93.98633,6.31147-130.54883C129.68687,309.19727,75.97,311.78516,35.68474,352.06641Zm81.63312,84.03125c-8.58525,8.584-30.08256,12.88672-53.11915,11.69922-1.174-22.93555,3.08444-44.49219,11.70289-53.10938,13.42776-13.42578,31.33079-14.28906,43.51813-2.10352C131.60707,404.77148,130.74562,422.67188,117.31786,436.09766Z":"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"}}]),e&&DOM.getElement(".progress-panel")||modal.progressPanel(e,interupt),e}function startProcess(){const{linkElm:e,errModal:t,send:n}=queryElm;if(loop.isRunning||loop.start(setStatus),loop.isRunning&&queue.now){let s=queue.currentIndex+=1,a=queue.run();message.setData(a),r=message.link,DOM.setElement(e,{href:`https://${r}`}),setTimeout((()=>{DOM.getElement(e).click()}),500),setTimeout((async()=>{const e=DOM.getElement(t);let r="";if(e)r=e.innerText.includes("OK")?(report.fail(a),"ERROR"):(report.fail(a,0),"FAILED"),e.click();else{const{useCaption:e,useImage:t,hasImage:s}=options,i=DOM.getElement(n);r=i?(i.click(),"SUCCESS"):"FAILED",t&&s&&("caption"!==e||"SUCCESS"===r)&&(r=!0===await message.sendImg()?"SUCCESS":"FAILED"),"SUCCESS"===r?report.success():report.fail(a,0)}}),4500),updateUI(s,message.phone)}else stopProcess();var r}async function interupt(){loop.break(setStatus),queue.now&&await modal.confirm("Stop Proses?")?stopProcess():startProcess()}function stopProcess(){user.isPremium||user.updateTrial("update"),loop.stop(setStatus),showReport()}function showReport(){queue.isEmpty&&(DOM.setElement("#getFile",{value:""}),resetRecipient());const e=e=>{const{count:t,data:n}=report.createData(e);if(n.isEmpty)return t;const{fileUrl:r,fileName:s}=csvFile.export(e,n),a={tag:"a",href:r,html:DOM.createSVGElement({viewBox:"0 0 512 512",fill:"currentColor",d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"}).outerHTML,download:`${s}`,classid:"wfu-export-csv",title:`Download "${s}"`};return`${t} `+DOM.createElement(a).outerHTML};let t=DOM.createListElement([`SUKSES  = ${report.sukses}`,`GAGAL   = ${e("gagal")}`,`ERROR   = ${e("error")}`],"ul",{classid:"wfu-reports"});modal.alert(t,"[REPORT] Kirim Pesan Otomatis Selesai."),user.isPremium||user.showAlert(user.isTrial?3:(DOM.getElement("#auto").click(),4),!0)}function updateUI(e=.5,t=null){let{size:n,isEmpty:r}=queue,s=r?"none":"inline-block",a=r?"":`Data: Loaded, ${n} Nomor`;if(DOM.setElements([{elm:"#_file-info",props:{title:a,style:`display:${s}`}},{elm:"span.curPhone",props:{text:`+${t||""}`}},{elm:"#_data-count",props:{text:n}}]),r){let e=DOM.getElement("#_mode");e.checked&&e.click(),DOM.setElement(e,{disabled:r})}showProgress(queue,e)}function showProgress(e,t){let n=e.long||100,r=t/n*100;t>=1&&DOM.setElements([{elm:".waBar",props:{title:`${t}/${n}`}},{elm:"span.curNumb",props:{text:`${t}/${n}`}}]),DOM.setElementStyle(".waBar",{width:`${r}%`})}class AppEvents{constructor(){}async runTasks(e){if(!await user.check())return;if(await checkStatus())return;const{useImage:t}=options,n=t?6e3:5500;report.reset(),loop.set(n,(()=>startProcess())),startProcess()}tabMenu(e){const t=e.currentTarget||e.target,n=t.value,r=DOM.getElement("#panelBody .menus",!0);DOM.setElements([{elm:r,props:{removeClass:"active"}},{elm:t,props:{addClass:"active"}}]).setElementsStyle([{elm:"#panelBody .menu-content",props:{display:"none"}},{elm:`#${n}`,props:{display:"block"}}]),options.setOption("activeTab",Array.from(r).indexOf(t))}textPreview(e){let t=e.currentTarget||e.target,n=DOM.getElement("#panelBody textarea",!0),r=t.checked;n.forEach((e=>{const t="message"===e.id?"msgPreview":"captPreview",n=((e,{id:t})=>{let n=message["input"+("message"===t?"Message":"Caption")];return e?(message.setData(queue.now),n=message.subtitute(n),waydown.toHtml(n,!e)):""})(r,e),s=((e,{id:t})=>{if("message"===t)return!e;const{useCaption:n}=options;return n?!e:n})(r,e);DOM.setElement(`#${t}`,{html:n}).setElementStyle(`#${t}`,{display:s?"none":"block"}).setElementStyle(e,{display:s?"block":"none"})}))}updateText(e){const{id:t,value:n,innerText:r}=e.target||e.currentTarget,s={};s["input"+("message"===t?"Message":"Caption")]=n||r,message.setProperties(s)}async useImage(e){const t="caption"===options.useCaption,n=e.currentTarget||e.target,r=!!t&&n.checked,s=t?"":"Caption menggunakan pesan",a=n.dataset.captId;DOM.setElements([{elm:`#${n.value}`,props:{disabled:!n.checked}},{elm:`#${a}`,props:{disabled:!r,title:s}},{elm:"#useCaption",props:{disabled:!n.checked}}]),options.setOption("useImage",n.checked)}async loadData(e){const[t]=(e.currentTarget||e.target).files,n=DOM.getElement("#_mode");resetRecipient(),t&&loadRecipient(await csvFile.import(t)),!t&&n.checked&&n.click(),DOM.setElement(n,{title:t?"Mode Pesan":"Masukkan File CSV",disabled:!t})}imagePreview(e){const t=e.currentTarget||e.target,n=4*Math.pow(1024,2),r=t.dataset.value;let s=null;r?DOM.setElement(`#${r}`,{value:""}):(s=t.files[0],s&&s.size>n&&(modal.alert("Ukuran gambar tidak boleh lebih dari 4MB"),s=null)),DOM.setElement("#_img-output",{src:s?URL.createObjectURL(s):""}).setElementStyle("#_deleteImg",{display:s?"block":"none"}),message.setProperties({imageFile:s}),options.setOptions({hasImage:!!s,imageFile:s})}toggleApp(e){const t=e.currentTarget||e.target,n=t.getAttribute("value"),r=DOM.getElement(`#${n}`),s=t.classList.toggle("active");r.style.height=r.style.height?null:`${r.scrollHeight}px`,options.setOption("openPanel",s)}inputRange(e){const t=e.currentTarget||e.target,{id:n,value:r}=t;DOM.setElements([{elm:t,props:{max:"maxQueue"===n?options.queueLimit:options.bpLimit}},{elm:DOM.getElement("output",t.parentElement),props:{text:r}}]),options.setOption(n,r)}inputChecks(e){const{id:t,value:n}=e.currentTarget||e.target;options.setOption(t,n)}inputSelects(e){const{id:t,value:n}=e.currentTarget||e.target;switch(t){case"themeColor":!function(e,t){DOM.setElementStyle("#wayfuPanel",{backgroundColor:t}),options.setOption(e,t)}(t,n);break;case"dateFormat":!function(e){if(isNumeric(e))e=2!==Number(e)?e:0,options.setOptions({isFormat:2===e,monthIndex:e,dateFormat:e});else{options.setOptions({isFormat:!1,dateFormat:e});const t=DOM.getElement("#getFile");queue.isEmpty&&""===t.value||(DOM.setElement(t,{value:""}),modal.alert("Untuk opsi <strong>Deteksi Otomatis</strong>, Silahkan masukkan ulang file penerima pesan.","[WARNING] Masukkan ulang CSV"),resetRecipient())}}(n);break;case"useCaption":!async function(e,t){let n="caption"!==t;n&&(n="caption"!==(t=await modal.confirm("Mengubah Pesan menjadi Caption akan menaikan potensi Banned dari WhatsApp. Apa Anda Yakin?")?t:"caption")),DOM.setElement("#_caption",{disabled:n,title:n?"Caption menggunakan pesan":""}),options.setOption(e,t)}(t,n)}}changeLog(e){const t=DOM.createElement({tag:"div",classid:"wfu-changelog",style:"overflow-y:scroll"});changes.Log.slice(0,5).forEach(((e,n)=>{let r=dateFormat(new MyDate(e.date),1),s=`${0==n?"WayFu - ":""}Version: ${e.version} (${r})`,a=DOM.createElement({tag:"div",classid:"wfu-changelog-items",append:t});DOM.createElement({tag:"span",text:s,append:a}),DOM.createListElement(e.content,"ul",{append:a})})),modal.alert(t,"Detail Pembaruan.")}async checkChat(e){const{chatHeader:t,menu:n,menuDefault:r,item:s,button:a}=window.WAPI.WebClassesV2,i=DOM.getElement(`.${t} .${n}.${r}`),o=DOM.getElement("span[data-icon='download-alt']",i);if(null!==chat.selectChat().room&&chat.isGroup){let{groupMetadata:t}=chat,{subject:n,participants:r}=t,l=new MyArray;for(const{contact:e}of r.getModelsArray()){let{id:{user:t},name:n,pushname:r}=e.serialize();l.push([r||n||t,t])}let u=CSVFile.createFile(n,l),c=(e=>(e=>{let t=DOM.createElement({tag:"div",classId:a,role:"button","data-tab":"6",tabindex:"0","aria-disabled":!1,html:e.outerHTML});return DOM.createElement({tag:"div",classId:s,html:t.outerHTML})})((({fileName:e})=>{let t=DOM.createSVGElement({size:"24 24",fill:"currentColor",d:["M18.948 11.112C18.511 7.67 15.563 5 12.004 5c-2.756 0-5.15 1.611-6.243 4.15-2.148.642-3.757 2.67-3.757 4.85 0 2.757 2.243 5 5 5h1v-2h-1c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.757 2.673-3.016l.581-.102.192-.558C8.153 8.273 9.898 7 12.004 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-2v2h2c2.206 0 4-1.794 4-4a4.008 4.008 0 0 0-3.056-3.888z","M13.004 14v-4h-2v4h-3l4 5 4-5z"]});return DOM.createElement({tag:"span",title:`Download "${e}"`,"data-testid":"download-alt","data-icon":"download-alt",classid:"wfu-link",html:t.outerHTML})})(e)))(u);if(o){if(o&&e.target===o&&await user.check()){let{fileUrl:e,fileName:t}=u;DOM.createElement({tag:"a",href:e,download:`${t}`}).click()}}else i.insertBefore(c,i.firstChild)}}}const listeners=new AppEvents;function createView(e,t,n){const{name:r,version:s,icon:a}=n;DOM.createElement({tag:"header",id:"wayfuPanel",after:"header",html:e.replace(/VERSION/,s).replace(/APP_NAME/,r).replace(/WA_VERSION/,window.WAPI.Debug.VERSION)}),DOM.addStyle(t,{id:"wayfuStyle"}).setElement("img.appIco",{src:a}),initListener()}function initListener(){eventLists.forEach((e=>{const{element:t,type:n,event:r}=e;DOM.getElement(t||document,!0).forEach((e=>{DOM.onEvent(e,n,(function(e){let t=listeners[r];if("function"==typeof t)return t(e)}))}))})),window.addEventListener("click",(function(e){Debug.current(e)}))}const getWebpack=e=>{for(let t of Object.keys(e))if(/[^|]?webpack./g.test(t))return t;return null};function setWAPI(e){let{WebClasses2:t,WebClasses3:n,...r}=e,s=Object.assign({},t,n);return Object.assign(r,{WebClassesV2:s}),Object.defineProperties(r,{Me:{get:function(){for(let e of this.Contact.getModelsArray())if(e.isMe)return e.serialize();return{}},enumerable:!0},SendImgToChat:{value:function(e,t,n="",r=!1){return!(!e||!t)&&new Promise((s=>{this.Chat.find(`${e}@c.us`).then((e=>{let a=new this.MediaCollection(e);a.processAttachments([{file:t},1],e,1).then((()=>{let[t]=a.getModelsArray();t.sendToChat(e,{caption:n}),s(!r||e)})).catch((e=>(console.log(e),s(!1))))}))}))},enumerable:!0}}),window.WAPI=Object.keys(r).sort().reduce(((e,t)=>(e[t]=r[t],e)),{}),window.WAPI}const loadWapi=e=>{if(!window.WAPI||!window.WAPI.Msg){function t(e){for(let t in e.m)"object"==typeof e(t)&&null!==e(t)&&storeObjects.forEach((n=>{if(!n.conditions||n.foundedModule)return;let r=n.conditions(e(t));null!==r&&(n.foundedModule=r)}));let t=storeObjects.find((e=>"Store"===e.id)),n=t.foundedModule?t.foundedModule:{};return storeObjects.forEach((e=>{"Store"!==e.id&&e.foundedModule&&(n[e.id]=e.foundedModule)})),setWAPI(n)}const n=`parasite${Date.now()}`,r=getWebpack(e);r&&"object"==typeof e[r]?e[r].push([[n],{},e=>t(e)]):console.error("Failed to load WAPI Module!")}};class App extends GM_Library{constructor(e){super(),this.#o(e)}#o(e){loadWapi(e),this.#l(),this.#u(),this.#c(),this.#f()}#l(){chat.init();const e=this.getResource("pnl"),t=this.getResource("css"),n=this.getResource("ico","url");createView(e,t,Object.assign({},this.appInfo,{icon:n}))}#u(){user.init().gettingData()}#c(){options.init()}async#f(){DOM.setElementStyle("#wayfuPanel",{"background-color":options.themeColor}).setElement("input#getFile",{accept:".csv,.txt,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),DOM.getElement("#panelBody .menus",!0)[options.activeTab||0].click(),options.openPanel&&DOM.getElement("#toggleApp").click(),changes.checkUpdate()}debug(e){if(e="boolean"!=typeof e||e,options.setOption("debug",e),e)Object.assign(App.prototype,{options,user,chat,csvFile},window.WAPI);else for(let e of["options","user","chat","csvFile",...Object.keys(window.WAPI)])delete App.prototype[e];return this}}async function init(){await DOM.hasElement("div.two")?unsafeWindow.WayFu=new App(unsafeWindow):await init()}init();