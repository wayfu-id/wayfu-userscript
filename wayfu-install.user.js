// ==UserScript==
// @name         WayFu - Easy Follow Up
// @description  WhatsApp Easy Follow Up.
// @date         2024-03-23
// @copyright    2018, Rizal Nurhidayat (https://github.com/rzlnhd)
// @license      CC BY-NC-ND 4.0; https://creativecommons.org/licenses/by-nc-nd/4.0/
// @icon         https://wayfu.id/v4/assets/wayfu-icon.webp
// @homepage     https://wayfu.id/
// @supportURL   https://wayfu.id/
// @version      4.5.4-alpha.2
// @author       Rizal Nurhidayat (https://github.com/rzlnhd)
// @match        https://web.whatsapp.com/*
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_xmlhttpRequest
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_log
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @grant        GM_info
// @grant        GM_notification
// @connect      wayfu.id
// @updateURL    https://wayfu.id/v4/update.meta.js
// @downloadURL  https://wayfu.id/v4/wayfu-install.user.js
// @resource ico https://wayfu.id/v4/assets/wayfu-icon.webp
// @resource pnl https://wayfu.id/v4/assets/wayfu-view.html
// @resource clr https://wayfu.id/v4/assets/wayfu-colors.json
// @resource css https://wayfu.id/v4/assets/wayfu-style.min.css
// ==/UserScript==

var __webpack_modules__={162:function(e,t,n){var r,a;void 0===(a="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,n,i){var o=s.URL||s.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?t(e,n,i):a(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),n);else if(r(e))t(e,n,s);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){a(i)}))}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var h=s.URL||s.webkitURL,m=h.createObjectURL(e);a?a.location=m:location.href=m,a=null,setTimeout((function(){h.revokeObjectURL(m)}),4e4)}});s.saveAs=o.saveAs=o,e.exports=o})?r.apply(t,[]):r)||(e.exports=a)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__={};(()=>{"use strict";const e=new class{constructor(){}getElement(e,t,n){let[r,a]=((e,t)=>"boolean"==typeof e?[null,e]:e?[this.getElement(e),t??!1]:[null,!1])(t,n);return"string"==typeof e?(e=e.trim(),r=r&&r instanceof HTMLElement?r:document,a?r.querySelectorAll(e):r.querySelector(e)):e instanceof HTMLElement||e instanceof NodeList?e:void 0}getParents(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});let n=[],r=this.getElement(e);for(;r&&r!==document;r=r.parentNode)t?r.matches(t)&&n.push(r):n.push(r);return n}createElement(e){let t,n,r;for(const a in e)if(e.hasOwnProperty(a))switch(a){case"tag":n=document.createElement(e[a]);break;case"text":r="innerText"in document?"innerText":"textContent",n[r]=e[a];break;case"html":n.innerHTML=e[a];break;case"classid":if("array"==typeof e[a])for(let t of e[a])n.classList.add(t);else"string"==typeof e[a]&&(n.className=e[a]);break;case"append":t=this.getElement(e[a]),t.appendChild(n);break;case"prepend":t=this.getElement(e[a]),t.childNodes.length&&t.insertBefore(n,t.childNodes[0]),t.appendChild(n);break;case"before":t=this.getElement(e[a]),t.parentNode.insertBefore(n,t);break;case"after":t=this.getElement(e[a]),t.parentNode.insertBefore(n,t.nextSibling);break;case"replace":t=this.getElement(e[a]),t.parentNode.replaceChild(n,t);break;case"event":for(const t in e.event)e.event.hasOwnProperty(t)&&this.onEvent(n,t,e.event[t]);break;case"callback":e[a](n);break;default:n.setAttribute(a,e[a])}return n}createElements(e,t){let n=t?t instanceof window.HTMLElement?t:"object"==typeof t&&null!=t.tag?this.createElement(t):null:"string"==typeof t?this.getElement(t):null;if(Array.isArray(e))for(let t of e)("object"==typeof t||t.tag)&&(n&&(t.append=n),this.createElement(t));return n||this}createListElement(e,t="ol",n={}){let r=this.createElement(Object.assign({tag:t},n));return Array.isArray(e)&&e.forEach((e=>{if("object"==typeof e){let n=this.createElement({tag:"li",html:e.title,append:r});Array.isArray(e.content)&&this.createListElement(e.content,t||"ol",{append:n})}else"string"==typeof e&&this.createElement({tag:"li",html:e,append:r})})),r}createSelectElement(e,t,n){const{id:r,classid:a}=e,s=this.createElement({tag:"select",id:r,classid:a});if(s.append(...(e=>e.map((e=>this.createElement({tag:"option",value:e,text:e}))))(t)),n)for(let e in n)this.onEvent(s,e,n[e]);return s}createCheckElement(e,t){const{id:n,classid:r}=e,a=this.createElement({tag:"input",type:"checkbox",id:n,name:n,classid:r});if(t)for(let e in t)this.onEvent(a,e,t[e]);return a}createLabelElement(e){const{id:t,classid:n,text:r}=e;return this.createElement({tag:"label",for:t,classid:n,text:r})}createSVGElement(e,t={}){const n=(e,t)=>{let n=document.createElementNS("http://www.w3.org/2000/svg",e),r=e=>`-${e.toLocaleLowerCase()}`;for(let e in t){let a="viewBox"===e?e:e.replace(/[A-Z]/g,r);n.setAttributeNS(null,a,t[e])}return n},r=n("svg",t);return(Array.isArray(e)?e:[e]).forEach((e=>{const{type:t,data:a}=e;r.appendChild(n(t,a))})),r}setElementStyle(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"zIndex":e.style.zIndex=t[n];break;case"margin":e.style.margin=t[n];break;case"padding":e.style.padding=t[n];break;case"display":e.style.display=t[n];break;default:e.style[n]=t[n]}return this}setElementsStyle(e,t){return Array.isArray(e)?e.forEach((e=>{this.setElementStyle(e.elm,e.props)})):"string"==typeof e&&this.getElement(e,!0).forEach((e=>{this.setElementStyle(e,t)})),this}setElement(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);let r;if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"text":r="innerText"in document?"innerText":"textContent",e[r]=t[n];break;case"html":e.innerHTML=t[n];break;case"class":e.className=t[n];break;case"addClass":e.classList.add(t[n]);break;case"removeClass":e.classList.remove(t[n]);break;case"toggleClass":e.classList.toggle(t[n]);break;case"disabled":e.disabled=t[n];break;case"value":e.value=t[n];break;case"dispatch":e.dispatchEvent(t[n]);break;case"readonly":case"readOnly":e.readOnly=t[n];break;default:e.setAttribute(n,t[n])}return this}setElements(e=[]){return Array.isArray(e)&&e.forEach((e=>{this.setElement(e.elm,e.props)})),this}hasElement(e,t=10){return new Promise((n=>{let r=setInterval((()=>{let a=this.getElement(e);a&&(n(a),clearInterval(r)),(t-=!1)&&(n(!1),clearInterval(r))}),1e3)}))}insertElement(e,t){return this.getElement(t||"body").appendChild(this.getElement(e)),this}removeElement(e,t){return this.getElement(t||"body").removeChild(this.getElement(e)),t||this}onEvent(e,t,n,r=!1){let a=this.getElement(e);return window.addEventListener&&(a||window).addEventListener(t,n,r),this}eventFire(e,t,n,r={bubbles:!0,composed:!0}){return this.setElement(e,{text:n||"",dispatch:t?new InputEvent(t,r):new MouseEvent("mousedown",r)}),this}addStyle(e,t={}){const n={tag:"style",html:e,append:"head"};return this.createElement(Object.assign({},n,t)),this}};class t extends Date{addDays(e){let n=new t(this.valueOf());return n.setDate(n.getDate()+e),n}addMonths(e){let n=new t(this.valueOf());return n.setMonth(n.getMonth()+Number(e)),n}}const n={forVersion:/^\d+(?:(?:\.|-)\d+[A-Za-z]?)*$/,getVersion:/(?:@version\s*(\d+(?:(?:\.|-)\d+[A-Za-z]?)*))/,phonePattern:/^(?:[\+\d]?[\- \d]{10,})(?:\s|$)/,phoneValue:/^[0\+]*(?:(\d{9,})|([\d]{1,3}(?:[\- ]?[\d]{2,})+))(\s|$)/,datePattern:/\d{1,4}[\/|-|:]\d{1,2}[\/|-|:]\d{2,4}/,formatedDate:/^\d{4}[\/|-|:]\d{1,2}[\/|-|:]\d{1,2}$/,forFilename:/(?!\s*$)\s*(?:(gagal|error)|(?:\(?([0-9]*)\)?)|([^_]*))(?:_|\s|$)/g,xlsxFileCheck:/^app.*\/vnd\.open[^\.]*(?:[^]*\.sheet)$/,phone:/^[0-9]*@c\.us$/},r={downloadBtnSvg:{type:"path",data:{fill:"currentColor",d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"}},checksSvg:{type:"polyline",data:{points:"1 1 5 5 9 1"}},groupDownloadBtnSvg:[{type:"path",data:{fill:"currentColor",d:"M18.948 11.112C18.511 7.67 15.563 5 12.004 5c-2.756 0-5.15 1.611-6.243 4.15-2.148.642-3.757 2.67-3.757 4.85 0 2.757 2.243 5 5 5h1v-2h-1c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.757 2.673-3.016l.581-.102.192-.558C8.153 8.273 9.898 7 12.004 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-2v2h2c2.206 0 4-1.794 4-4a4.008 4.008 0 0 0-3.056-3.888z"}},{type:"path",data:{fill:"currentColor",d:"M13.004 14v-4h-2v4h-3l4 5 4-5z"}}],wayFuSvg:[{type:"path",data:{class:"fill0",d:"M84 3c1,0 2,1 3,1 7,3 13,8 19,13 5,5 10,12 13,19 3,7 4,15 4,23 0,6 0,11 -2,16 -1,5 -3,10 -5,14l8 31 -32 -8c-4,3 -9,4 -14,6 -4,1 -9,1 -14,1l0 0c-6,0 -11,0 -16,-2l2 -5c1,1 2,1 3,1 3,1 7,1 11,1 2,0 4,0 6,0 3,-1 5,-1 7,-2 2,0 4,-1 7,-2 2,-1 4,-1 6,-3l1 -1 3 1 22 6 -6 -22 0 -2 1 -2c1,-2 2,-4 3,-7 1,-2 2,-4 2,-6 1,-3 1,-5 2,-7 0,-3 0,-5 0,-8 0,-3 0,-7 -1,-11 -1,-3 -2,-6 -3,-10l0 0c-2,-3 -3,-6 -5,-9 -2,-3 -4,-6 -7,-8 -2,-3 -5,-5 -8,-7 -3,-2 -6,-3 -9,-5l0 0c-1,0 -1,0 -1,0l0 -6zm-29 68c-1,-2 -3,-3 -4,-5 -3,-3 -6,-6 -9,-10 -17,-20 4,-40 20,-51 -6,1 -12,2 -19,5 -13,4 -25,14 -30,30 -1,1 -1,1 -1,2 -4,16 -3,29 2,39 5,13 15,22 22,26l19 -36zm7 -1c-5,-5 -10,-10 -16,-17 -20,-25 33,-51 33,-51 -15,-5 -61,-1 -72,38 -13,45 20,70 31,74l24 -44z"}},{type:"path",data:{class:"fill1",d:"M93 126l-1 0c0,0 0,0 0,1 -5,1 -9,1 -14,1l0 0c-5,0 -10,-1 -15,-2l1 0 0 0c5,0 10,0 14,-2 5,-1 10,-3 14,-5l12 3c-3,2 -7,3 -11,4l0 0zm-14 -116l0 -4c0,0 -2,1 -6,3 -11,7 -34,22 -31,38 2,-19 37,-37 37,-37z"}},{type:"path",data:{class:"fill2",fillRule:"nonzero",d:"M62 84l0 -8 -24 44c-9,-2 -32,-19 -34,-50 -2,35 25,55 34,58l24 -44z"}}]},a=[{element:"#wayfuPanel .menus",type:"click",event:"tabMenu"},{element:"#wayfuPanel textarea",type:"input",event:"updateText"},{element:"#_mode",type:"click",event:"textPreview"},{element:"#useImage",type:"click",event:"useImage"},{element:"#getFile",type:"change",event:"loadData"},{element:"#imgFile",type:"change",event:"imagePreview"},{element:"#_deleteImg",type:"click",event:"imagePreview"},{element:"#wayfuToggle",type:"click",event:"toggleApp"},{element:"._input input[type='range']",type:"input",event:"inputRange"},{element:"._input input[type='checkbox']",type:"change",event:"inputChecks"},{element:"._input select",type:"change",event:"inputSelects"},{element:"#_blast",type:"click",event:"runTasks"},{element:"div#app",type:"click",event:"checkChat"}],s={year:"numeric",month:"long",day:"numeric"},i=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"ComposeBox",conditions:e=>e.ComposeBoxActions?e.ComposeBoxActions:null},{id:"WebClasses",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chat&&e.default.active?e.default:null},{id:"WebClasses2",conditions:e=>e.default&&"object"==typeof e.default&&e.default.menu&&e.default.active?e.default:null},{id:"WebClasses3",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chatHeader?e.default:null},{id:"WebClasses4",conditions:e=>e.default&&"object"==typeof e.default&&e.default.sendButtonContainer?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments?e.default:null},{id:"Debug",conditions:e=>e.Debug?e.Debug:null},{id:"WapQuery",conditions:e=>e.queryExist?e:e.default&&e.default.queryExist?e.default:null},{id:"Cmd",conditions:e=>e.Cmd?e.Cmd:null}],o=e=>"string"==typeof e?!isNaN(e)&&!isNaN(parseFloat(e)):"number"==typeof e,l=e=>new Promise((t=>{try{t(JSON.parse(e))}catch(e){t(null)}})),c=e=>{var n;return"string"==typeof e&&(e=o(e)?Number(e):"string"!=typeof(n=e)||"Invalid Date"===new Date(n).toString()||isNaN(new Date(n))?e:new t(e)),e},u=(e,t=!1)=>{let n=[];return e.split(" ").forEach((e=>{n.push(h(e))})),t?n.join(" "):n[0]},h=e=>(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1),m=(e,t=!0)=>new Date(e).toLocaleDateString("id-ID",Object.assign({},s,{weekday:t?"long":void 0}));class f{setProperties(e,t=!0){e=this.intoObject(e,t);for(let t in e)this.hasOwnProperty(t)&&(this[t]=e[t]);return this}serialize(e){if("object"==typeof e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURI(e[n]));return t.join("&")}return e.toString?e.toString():e}intoObject(e,t=!0){let n={};if(!e)return n;if("string"==typeof e?n=JSON.parse(e):Array.isArray(e)?e.forEach(((e,t)=>n[t]=e)):"object"==typeof e&&(n=e),0!==Object.keys(n).length)for(const e in n)n[e]=t?c(n[e]):n[e];return n}findObjectValue(e,t,n=2){if(!n)return null;let r=(t=t||this)[e];if(r)return r;n-=1;for(let a of Object.keys(t))t[a]&&"object"==typeof t[a]&&(r=this.findObjectValue(e,t[a],n));return r}}class p extends f{constructor(){super()}get appInfo(){return this.getInfo("script")}get managerName(){return"object"!=typeof GM_info?"function"==typeof GM_getMetadata?"Scriptish":"undefined"!=typeof GM_setValue&&"undefined"==typeof GM_getResourceText&&"undefined"==typeof GM_getResourceURL&&"undefined"==typeof GM_openInTab&&"undefined"==typeof GM_setClipboard?"NinjaKit":"Native":void 0!==GM_info.uuid?"Greasemonkey":void 0!==GM_info.scriptHandler?"Tampermonkey":void 0}getInfo(e=""){return GM_info?""===e?GM_info:this.findObjectValue(e,GM_info):null}getResource(e,t="text"){return"undefined"!=typeof GM_getResourceText&&"text"===t?GM_getResourceText(e):"undefined"!=typeof GM_getResourceURL&&"url"===t?GM_getResourceURL(e):void 0}deleteValue(e){if("undefined"!=typeof GM_deleteValue){const t=GM_listValues();for(const n of t)e&&e===n&&GM_deleteValue(n)}}setValue(e,t){"undefined"!=typeof GM_setValue&&GM_setValue(e,t)}getValue(e,t=null){if("undefined"!=typeof GM_listValues&&"undefined"!=typeof GM_getValue){const n=GM_listValues();if(0!==n.length&&n.some((t=>e===t)))return GM_getValue(e,t)}return t}request(e){e.url=e.url||this.appInfo.homepage,e.method=e.method||"GET",e.headers=e.headers||{},e.timeout=e.timeout||2e4,(e.data||"POST"==e.method)&&(e.method="POST",e.data=this.serialize(e.data||{}),e.headers=Object.assign({},e.headers,{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"}));const t=e.onload,n=e.onerror,r=e.ontimeout,a=e.onabort;e.onload=function(e){t(e)},e.onerror=function(e){console.log(`request error: ${e.error||"unknown error"}`),n(e)},e.ontimeout=function(e){console.log(`request error: ${e.error||"timed out"}`),r(e)},e.onabort=function(e){console.log(`request error: ${e.error||"aborted"}`),a(e)},"undefined"!=typeof GM_xmlhttpRequest?GM_xmlhttpRequest(e):console.log("XHR not Allowed!")}}const d=new class{constructor(){this.contens=0,this.element=e.createElement({tag:"div",id:"wayfu-modal",classid:"wfu-modal",role:"alert"})}construct(t,n="",r=!1){return new Promise((a=>{let s=`wfu-content-${this.contens+=1}`,i=e.createElement({tag:"div",classid:"wfu-modal-container",id:s});if(n&&e.createElement({tag:"h2",text:n,append:i}),t&&(t instanceof window.HTMLElement?e.insertElement(t,i):"string"==typeof t?e.createElement({tag:"p",html:t,append:i}):"object"==typeof t&&e.createElement(Object.assign({tag:"p",append:i},t))),r){let t=e.createElement({tag:"ul",classid:"wfu-buttons",append:i}),n=[{tag:"a",classid:"wfu-btn-ok",text:"Ya",event:{click:e=>{this.closed(e),a(!0)}}},{tag:"a",classid:"wfu-modal-close",text:"Tidak",event:{click:e=>{this.closed(e),a(!1)}}}];for(let r of n){let n=e.createElement({tag:"li",append:t});e.createElement(Object.assign({},r,{append:n}))}}else e.createElement({tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace wfu-modal-close",append:i,event:{click:this.closed}});e.onEvent(window,"click",this.closed).insertElement(i,this.element),this.show()}))}async alert(e,t=""){return await this.construct(e,t)}async confirm(e,t=""){return await this.construct(e,t,!0)}progressPanel(t,n=null){if(t){let t=`wfu-content-${this.contens+=1}`,r=e.createElement({tag:"div",classid:"wfu-modal-container progress-panel",id:t}),a=[{tag:"h2",text:"Pesanmu sedang dikirim"},{tag:"div",html:"<div class='waBar'></div>",classid:"waProgress"},{tag:"p",html:"Mengirim pesan ke <span class='curPhone'></span> (<span class='curNumb'></span>)"},{tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace",event:{click:n}}];r=e.createElements(a,r),e.insertElement(r,"#wayfu-modal"),this.show()}else{let t=e.getElement(".wfu-modal-container.progress-panel"),n=e.getElement(".wfu-modal-container",!0),r=e.getElement("#wayfu-modal");t&&e.removeElement(t,r),r&&0===n.length&&r.classList.remove("is-visible")}}show(){e.getElement("#wayfu-modal")||e.insertElement(this.element),e.getElement("#wayfu-modal").classList.add("is-visible")}closed(t){const n=t.target,r=e.getElement("#wayfu-modal"),a=e.getParents(n,".wfu-modal-container"),s=n.classList.contains("wfu-btn-ok");if(r&&(s||n.classList.contains("wfu-modal-close"))){0!==a.length&&e.removeElement(a[0],r);const t=e.getElement(".wfu-modal-container",!0);r&&0===t.length&&r.classList.remove("is-visible")}}};class g extends Array{get isEmpty(){return this.length<=0}get nonEmptyValue(){return this.filter((e=>!!e))}changeIndex(e,t){if(t>=this.length){let e=t-this.length+1;for(;e--;)this.push(void 0)}return this.splice(t,0,this.splice(e,1)[0]),this}countValue(e){let t=0;return this.forEach((n=>{t+=n===e?1:0})),t}isOnArray(e){return this.some((t=>e===t))}static split(e,t){let n=e.split(t);return new g(...n)}static create(e){return new g(...Array.from((t=e,Array.isArray(t)||"function"==typeof t[Symbol.iterator]?t:Object.keys(t))));var t}}class w extends p{constructor(){super(),this.default={themeColor:"var(--butterbar-connection-background)",debug:!1,hasImage:!1,imageFile:null,useImage:!1,activeTab:0,targetBp:100,maxQueue:500,dateFormat:"auto",openPanel:!0,useCaption:"caption",userType:"umum",splitter:",",monthIndex:0,isFormat:!1,alert:!0,queueLimit:1e3,bpLimit:300,exportType:"csv",fileType:"csv"}}init(){const e=this.getValue("wayfu-options"),t=Object.assign({},this.default,this.intoObject(e));return Object.assign(w.prototype,this.default),this.setOptions(t).colorList()}setOptions(e){if(e!=={}){e=this.intoObject(e);for(let t in e)this.setOption(t,e[t])}return this}setOption(e,t){return t=c(t),(this.hasOwnProperty(e)||this.default.hasOwnProperty(e))&&(this[e]=t),this.fillList().save()}fillList(){return Object.entries(this).forEach((t=>{const[n,r]=t,a=e.getElement(`#${n}`);a&&("checkbox"==a.type?a.checked=r:a.value=r)})),e.getElement("._input input[type='range']",!0).forEach((t=>{e.setElements([{elm:t,props:{max:"maxQueue"==t.id?this.queueLimit:this.bpLimit}},{elm:e.getElement("output",t.parentElement),props:{text:t.value}}])})),"oriflame"===this.userType&&e.setElementStyle(".panel-options .oriflame",{display:"flex"}),this}colorList(){let t=this.getResource("clr");return t="string"==typeof t?JSON.parse(t):t,t=Array.isArray(t)?t:t.colors,t.forEach((t=>{let n={tag:"option",value:t.key,text:t.val,append:"select#themeColor"};e.createElement(n)})),this}save(){const e=new g("useImage","hasImage","imageFile","fileName","alert","bpLimit","queueLimit","debug","default"),t={};for(let n in this)this.default.hasOwnProperty(n)&&!e.isOnArray(n)&&(t[n]=this[n]);this.setValue("wayfu-options",t)}}const y=new w,v=new class extends p{constructor(){super(),this.today=new t,this.defaultOpt={method:"POST",url:`${this.appInfo.homepage}user/api`,headers:{"Content-Type":"application/json"}}}get isPremium(){return!!this.end&&this.today<this.end}get isTrial(){return!!this.expires&&this.attempt<5&&this.today<=this.expires}init(){const{id:e,name:t,pushname:n}=window.WAPI.Contact.getMeContact();return this.phone=Number(e.user)||"",this.name=t||n||"",this}gettingData(){return new Promise((e=>{let t=Object.assign({},this.defaultOpt,{data:JSON.stringify({phone:this.phone,version:this.appInfo.version}),onload:async t=>{const{status:n,responseText:r}=t;let a=null;200===n&&(a=await l(r)),v.setUser(a),e(200===n&&a)},onerror:e=>v.setUser(null),ontimeout:e=>v.setUser(null),onabort:e=>v.setUser(null)});this.request(t)}))}updateData(e){if(!e)return this;if((e=this.intoObject(e)).phone!==this.phone)return this;for(const t in e)"today"!==t&&(this[t]=e[t]);return this.end=this.reg&&this.mon?new t(this.reg).addMonths(this.mon):this.end||null,this}setUser(e){const t=e||this.getValue("wayfu-user");t&&null!=t&&""!==t&&(this.reset().updateData(t).save(),y.setOption("userType",this.type)),this.isPremium||this.isTrial?this.showAlert(this.isPremium?0:1):setTimeout((()=>{this.gettingData()}),2e4)}async check(){let e=this.isPremium||await this.tryApp();return e||this.showAlert(2,!0),e}async tryApp(){return this.expires||this.isTrial?this.isTrial:!!await d.confirm("Coba WayFu Gratis!","Apakah Anda mau mencoba 2 hari Trial?")&&await this.updateTrial()}updateTrial(e="add"){const n={version:this.appInfo.version,phone:this.phone,name:this.name,action:e},r=(e=>{let n=new t(this.today).addDays(2).toLocaleString("id-ID"),r=this.attempt+=1;return"add"===e?{expires:n}:{attempt:r}})(e);return new Promise(((e,t)=>{let a=Object.assign({},this.defaultOpt,{data:JSON.stringify(Object.assign({},n,r)),onload:async t=>{const{status:n,responseText:r}=t;let a=null;200===n&&(a=await l(r)),v.setUser(a),e(200===n&&a)},onerror:t=>e(!1),ontimeout:t=>e(!1),onabort:t=>e(!1)});this.request(a)}))}showAlert(e,t=!1){const n=[{title:`Halo kak ${u(this.name,!0)}!`,text:`Selamat menggunakan fitur Pengguna Premium.\n\n                Masa aktif Kakak berakhir hari ${m(this.end)} ya...`},{title:`Halo! Selamat Datang di ${this.appInfo.name}!`,text:`Anda dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi,\n                Masa Trial Anda berakhir hari ${m(this.expires)} ya...`},{title:`${this.appInfo.name} - Fitur Premium`,text:"Maaf, fitur ini hanya untuk Pengguna Premium. Informasi lebih lanjut, silahkan hubungi saya."},{title:`${this.appInfo.name} - Trial Mode`,text:`Saat ini Anda sedang menggunakan versi Trial. Anda masih dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi.`},{title:`${this.appInfo.name} - Trial Mode`,text:"Masa Trial Anda sudah berakhir. Silahkan berlanganan untuk menggunakan fitur premium."}],{title:r,text:a}=n[e];let s=y.alert||t?(d.alert(a,r),!1):y.alert;y.setOption("alert",s)}reset(){const e=new g("attempt","type","reg","mon","end","expires");for(let t in this)this.hasOwnProperty(t)&&e.isOnArray(t)&&delete this[t];return this.init()}save(){const e=new g("name","phone","attempt","type","reg","mon","end","expires"),t={};for(let r in this)this.hasOwnProperty(r)&&e.isOnArray(r)&&(t[r]=(n=this[r])instanceof Date?n.toISOString():n);var n;this.setValue("wayfu-user",t)}},b=new class extends f{constructor(){super(),this.apiLink="api.whatsapp.com/send?phone=",this.inputMessage="",this.inputCaption="",this.imageFile="",this.idNumber="",this.name="",this.phone="",this.poinValue="",this.date="",this.sponsorName="",this.other=[]}setData(e){var t;return[this.idNumber,this.name,this.phone,this.poinValue,this.date,this.sponsorName,...this.other]=(t=e[2],n.phonePattern.test(t)?e:["",...e]),this}get value(){return this.inputMessage?this.subtitute(this.inputMessage):""}get encodedMsg(){const{useImage:e,hasImage:t,useCaption:n}=y,r=!e||!t||"caption"===n,a=this.inputMessage&&r?this.subtitute(this.inputMessage):"";return""!==a?encodeURIComponent(a).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"):a}get link(){return this.apiLink+this.phone+`&text=${this.encodedMsg}`}setMessage(e,t,r){const a=e=>new RegExp(String.raw`(DATA_${e})(\s|\D|$)`,"g");if("oriflame"===y.userType){for(let a=t;a<3;a++){const t=n.datePattern.test(r),s=o(r);if(0===a&&s){const t=e=>{const t=y.targetBp-Number(e);return t>0?t:0};e=e.replace(/P_BP/g,`${r} BP`).replace(/K_BP/g,`${t(r)} BP`)}else 1===a&&t?e=e.replace(/L_DAY/g,this.lastDay(r)).replace(/S_DAY/g,this.lastDay(r,!1)):2!==a||s||t||(e=e.replace(/F_INVS/g,u(r,!0)).replace(/INVS/g,u(r)))}return t>2?e.replace(a(t-2),`${r||""}$2`):e}return e.replace(a(t+1),`${r||""}$2`)}subtitute(e){if(""!==e&&null!==e){const t=[this.poinValue,this.date,this.sponsorName,...this.other],n="oriflame"===y.userType?3:0;e=(e=e.replace(/F_NAMA/g,u(this.name,!0)).replace(/NAMA/g,u(this.name))).replace(/PHONE/g,this.phone),e=""!==this.idNumber?e.replace("oriflame"===y.userType?/NO_KONS/g:/DATA_0/g,this.idNumber):e,t.forEach(((t,r)=>{e=t||r>=n?this.setMessage(e,r,t):e}))}return e}lastDay(e,n=!0){const r=y.monthIndex,a=y.default.monthIndex;let s=new t(y.isFormat||a===r?e:g.split(e,"/").changeIndex(r,a).join("/"));return s=n?s.addDays(30):s,m(s,n)}async sendImg(){const{useCaption:e}=y,t="caption"===e?this.inputCaption:this.inputMessage;return await window.WAPI.SendImgToChat(this.phone,this.imageFile,this.subtitute(t))}async sendText(){return await window.WAPI.composeAndSendMsgToChat(this.phone,this.value)}},E=new class extends f{constructor(){super(),this.room=null,this.classId={active:"",header:""}}get isGroup(){return!!this.selected&&this.room.isGroup}get groupMetadata(){return this.selected&&this.isGroup?this.room.groupMetadata:null}get contact(){return this.room?this.room.contact:null}get selected(){return!!this.room}init(){const{active:e}=window.WAPI.WebClasses,{chatHeader:t}=window.WAPI.WebClassesV2;return this.classId={active:e,header:t},this}selectChat(){return this.room=(t=>{let n;for(let r in t)if(n=((e,t)=>{if(!e)return null;e="active"===t?e.offsetParent:e.parentNode;for(let t of Object.keys(e)){let n=this.findObjectValue("children",e[t]);if(!n)continue;let{chat:r,active:a}=this.findObjectValue("props",n);return a?a.value:r}})(e.getElement(`.${t[r]}`),r),n)return n})(this.classId),this}};var x=Uint8Array,k=Uint16Array,C=Int32Array,A=new x([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S=new x([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M=new x([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=function(e,t){for(var n=new k(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new C(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return{b:n,r:a}},$=T(A,2),O=$.b,_=$.r;O[28]=258,_[258]=28;for(var P=T(S,0),I=P.b,L=P.r,D=new k(32768),N=0;N<32768;++N){var j=(43690&N)>>1|(21845&N)<<1;j=(61680&(j=(52428&j)>>2|(13107&j)<<2))>>4|(3855&j)<<4,D[N]=((65280&j)>>8|(255&j)<<8)>>1}var R=function(e,t,n){for(var r=e.length,a=0,s=new k(t);a<r;++a)e[a]&&++s[e[a]-1];var i,o=new k(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(n){i=new k(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)i[D[h]>>l]=c}else for(i=new k(r),a=0;a<r;++a)e[a]&&(i[a]=D[o[e[a]-1]++]>>15-e[a]);return i},V=new x(288);for(N=0;N<144;++N)V[N]=8;for(N=144;N<256;++N)V[N]=9;for(N=256;N<280;++N)V[N]=7;for(N=280;N<288;++N)V[N]=8;var F=new x(32);for(N=0;N<32;++N)F[N]=5;var U=R(V,9,0),W=R(V,9,1),G=R(F,5,0),z=R(F,5,1),q=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},B=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},H=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},X=function(e){return(e+7)/8|0},Z=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new x(e.subarray(t,n))},K=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],J=function(e,t,n){var r=new Error(t||K[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,J),!n)throw r;return r},Q=function(e,t,n,r){var a=e.length,s=r?r.length:0;if(!a||t.f&&!t.l)return n||new x(0);var i=!n,o=i||2!=t.i,l=t.i;i&&(n=new x(3*a));var c=function(e){var t=n.length;if(e>t){var r=new x(Math.max(2*t,e));r.set(n),n=r}},u=t.f||0,h=t.p||0,m=t.b||0,f=t.l,p=t.d,d=t.m,g=t.n,w=8*a;do{if(!f){u=B(e,h,1);var y=B(e,h+1,3);if(h+=3,!y){var v=e[(N=X(h)+4)-4]|e[N-3]<<8,b=N+v;if(b>a){l&&J(0);break}o&&c(m+v),n.set(e.subarray(N,b),m),t.b=m+=v,t.p=h=8*b,t.f=u;continue}if(1==y)f=W,p=z,d=9,g=5;else if(2==y){var E=B(e,h,31)+257,k=B(e,h+10,15)+4,C=E+B(e,h+5,31)+1;h+=14;for(var T=new x(C),$=new x(19),_=0;_<k;++_)$[M[_]]=B(e,h+3*_,7);h+=3*k;var P=q($),L=(1<<P)-1,D=R($,P,1);for(_=0;_<C;){var N,j=D[B(e,h,L)];if(h+=15&j,(N=j>>4)<16)T[_++]=N;else{var V=0,F=0;for(16==N?(F=3+B(e,h,3),h+=2,V=T[_-1]):17==N?(F=3+B(e,h,7),h+=3):18==N&&(F=11+B(e,h,127),h+=7);F--;)T[_++]=V}}var U=T.subarray(0,E),G=T.subarray(E);d=q(U),g=q(G),f=R(U,d,1),p=R(G,g,1)}else J(1);if(h>w){l&&J(0);break}}o&&c(m+131072);for(var K=(1<<d)-1,Q=(1<<g)-1,Y=h;;Y=h){var ee=(V=f[H(e,h)&K])>>4;if((h+=15&V)>w){l&&J(0);break}if(V||J(2),ee<256)n[m++]=ee;else{if(256==ee){Y=h,f=null;break}var te=ee-254;if(ee>264){var ne=A[_=ee-257];te=B(e,h,(1<<ne)-1)+O[_],h+=ne}var re=p[H(e,h)&Q],ae=re>>4;if(re||J(3),h+=15&re,G=I[ae],ae>3&&(ne=S[ae],G+=H(e,h)&(1<<ne)-1,h+=ne),h>w){l&&J(0);break}o&&c(m+131072);var se=m+te;if(m<G){var ie=s-G,oe=Math.min(G,se);for(ie+m<0&&J(3);m<oe;++m)n[m]=r[ie+m]}for(;m<se;++m)n[m]=n[m-G]}}t.l=f,t.p=Y,t.b=m,t.f=u,f&&(u=1,t.m=d,t.d=p,t.n=g)}while(!u);return m!=n.length&&i?Z(n,0,m):n.subarray(0,m)},Y=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ee=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},te=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,s=n.slice();if(!a)return{t:le,l:0};if(1==a){var i=new x(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var m=s[0].s;for(r=1;r<a;++r)s[r].s>m&&(m=s[r].s);var f=new k(m+1),p=ne(n[u-1],f,0);if(p>t){r=0;var d=0,g=p-t,w=1<<g;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<a;++r){var y=s[r].s;if(!(f[y]>t))break;d+=w-(1<<p-f[y]),f[y]=t}for(d>>=g;d>0;){var v=s[r].s;f[v]<t?d-=1<<t-f[v]++-1:++r}for(;r>=0&&d;--r){var b=s[r].s;f[b]==t&&(--f[b],++d)}p=t}return{t:new x(f),l:p}},ne=function(e,t,n){return-1==e.s?Math.max(ne(e.l,t,n+1),ne(e.r,t,n+1)):t[e.s]=n},re=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new k(++t),r=0,a=e[0],s=1,i=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:n.subarray(0,r),n:t}},ae=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},se=function(e,t,n){var r=n.length,a=X(t+2);e[a]=255&r,e[a+1]=r>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<r;++s)e[a+s+4]=n[s];return 8*(a+4+r)},ie=function(e,t,n,r,a,s,i,o,l,c,u){Y(t,u++,n),++a[256];for(var h=te(a,15),m=h.t,f=h.l,p=te(s,15),d=p.t,g=p.l,w=re(m),y=w.c,v=w.n,b=re(d),E=b.c,x=b.n,C=new k(19),T=0;T<y.length;++T)++C[31&y[T]];for(T=0;T<E.length;++T)++C[31&E[T]];for(var $=te(C,7),O=$.t,_=$.l,P=19;P>4&&!O[M[P-1]];--P);var I,L,D,N,j=c+5<<3,W=ae(a,V)+ae(s,F)+i,z=ae(a,m)+ae(s,d)+i+14+3*P+ae(C,O)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&j<=W&&j<=z)return se(t,u,e.subarray(l,l+c));if(Y(t,u,1+(z<W)),u+=2,z<W){I=R(m,f,0),L=m,D=R(d,g,0),N=d;var q=R(O,_,0);for(Y(t,u,v-257),Y(t,u+5,x-1),Y(t,u+10,P-4),u+=14,T=0;T<P;++T)Y(t,u+3*T,O[M[T]]);u+=3*P;for(var B=[y,E],H=0;H<2;++H){var X=B[H];for(T=0;T<X.length;++T){var Z=31&X[T];Y(t,u,q[Z]),u+=O[Z],Z>15&&(Y(t,u,X[T]>>5&127),u+=X[T]>>12)}}}else I=U,L=V,D=G,N=F;for(T=0;T<o;++T){var K=r[T];if(K>255){ee(t,u,I[257+(Z=K>>18&31)]),u+=L[Z+257],Z>7&&(Y(t,u,K>>23&31),u+=A[Z]);var J=31&K;ee(t,u,D[J]),u+=N[J],J>3&&(ee(t,u,K>>5&8191),u+=S[J])}else ee(t,u,I[K]),u+=L[K]}return ee(t,u,I[256]),u+L[256]},oe=new C([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),le=new x(0),ce=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),ue=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=ce[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},he=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new x(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return function(e,t,n,r,a,s){var i=s.z||e.length,o=new x(r+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(r,o.length-a),c=s.l,u=7&(s.r||0);if(t){u&&(l[0]=s.r>>3);for(var h=oe[t-1],m=h>>13,f=8191&h,p=(1<<n)-1,d=s.p||new k(32768),g=s.h||new k(p+1),w=Math.ceil(n/3),y=2*w,v=function(t){return(e[t]^e[t+1]<<w^e[t+2]<<y)&p},b=new C(25e3),E=new k(288),M=new k(32),T=0,$=0,O=s.i||0,P=0,I=s.w||0,D=0;O+2<i;++O){var N=v(O),j=32767&O,R=g[N];if(d[j]=R,g[N]=j,I<=O){var V=i-O;if((T>7e3||P>24576)&&(V>423||!c)){u=ie(e,l,0,b,E,M,$,P,D,O-D,u),P=T=$=0,D=O;for(var F=0;F<286;++F)E[F]=0;for(F=0;F<30;++F)M[F]=0}var U=2,W=0,G=f,z=j-R&32767;if(V>2&&N==v(O-z))for(var q=Math.min(m,V)-1,B=Math.min(32767,O),H=Math.min(258,V);z<=B&&--G&&j!=R;){if(e[O+U]==e[O+U-z]){for(var K=0;K<H&&e[O+K]==e[O+K-z];++K);if(K>U){if(U=K,W=z,K>q)break;var J=Math.min(z,K-2),Q=0;for(F=0;F<J;++F){var Y=O-z+F&32767,ee=Y-d[Y]&32767;ee>Q&&(Q=ee,R=Y)}}}z+=(j=R)-(R=d[j])&32767}if(W){b[P++]=268435456|_[U]<<18|L[W];var te=31&_[U],ne=31&L[W];$+=A[te]+S[ne],++E[257+te],++M[ne],I=O+U,++T}else b[P++]=e[O],++E[e[O]]}}for(O=Math.max(O,I);O<i;++O)b[P++]=e[O],++E[e[O]];u=ie(e,l,c,b,E,M,$,P,D,O-D,u),c||(s.r=7&u|l[u/8|0]<<3,u-=7,s.h=g,s.p=d,s.i=O,s.w=I)}else{for(O=s.w||0;O<i+c;O+=65535){var re=O+65535;re>=i&&(l[u/8|0]=c,re=i),u=se(l,u+1,e.subarray(O,re))}s.i=i}return Z(o,0,r+X(u)+a)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,a)},me=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},fe=function(e,t){return e[t]|e[t+1]<<8},pe=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return pe(e,t)+4294967296*pe(e,t+4)},ge=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function we(e,t){return he(e,t||{},0,0)}function ye(e,t){return Q(e,{i:2},t&&t.out,t&&t.dictionary)}var ve=function(e,t,n,r){for(var a in e){var s=e[a],i=t+a,o=r;Array.isArray(s)&&(o=me(r,s[1]),s=s[0]),s instanceof x?n[i]=[s,o]:(n[i+="/"]=[new x(0),o],ve(s,i,n,r))}},be="undefined"!=typeof TextEncoder&&new TextEncoder,Ee="undefined"!=typeof TextDecoder&&new TextDecoder;try{Ee.decode(le,{stream:!0})}catch(e){}var xe=function(e){for(var t="",n=0;;){var r=e[n++],a=(r>127)+(r>223)+(r>239);if(n+a>e.length)return{s:t,r:Z(e,n-1)};a?3==a?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&a?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}};function ke(e,t){if(t){for(var n=new x(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(be)return be.encode(e);var a=e.length,s=new x(e.length+(e.length>>1)),i=0,o=function(e){s[i++]=e};for(r=0;r<a;++r){if(i+5>s.length){var l=new x(i+8+(a-r<<1));l.set(s),s=l}var c=e.charCodeAt(r);c<128||t?o(c):c<2048?(o(192|c>>6),o(128|63&c)):c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|63&c)):(o(224|c>>12),o(128|c>>6&63),o(128|63&c))}return Z(s,0,i)}function Ce(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(Ee)return Ee.decode(e);var a=xe(e),s=a.s;return(n=a.r).length&&J(8),s}var Ae=function(e,t){return t+30+fe(e,t+26)+fe(e,t+28)},Se=function(e,t,n){var r=fe(e,t+28),a=Ce(e.subarray(t+46,t+46+r),!(2048&fe(e,t+8))),s=t+46+r,i=pe(e,t+20),o=n&&4294967295==i?Me(e,s):[i,pe(e,t+24),pe(e,t+42)],l=o[0],c=o[1],u=o[2];return[fe(e,t+10),l,c,a,s+fe(e,t+30)+fe(e,t+32),u]},Me=function(e,t){for(;1!=fe(e,t);t+=4+fe(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},Te=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&J(9),t+=r+4}return t},$e=function(e,t,n,r,a,s,i,o){var l=r.length,c=n.extra,u=o&&o.length,h=Te(c);ge(e,t,null!=i?33639248:67324752),t+=4,null!=i&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(s<0&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var m=new Date(null==n.mtime?Date.now():n.mtime),f=m.getFullYear()-1980;if((f<0||f>119)&&J(10),ge(e,t,f<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>1),t+=4,-1!=s&&(ge(e,t,n.crc),ge(e,t+4,s<0?-s-2:s),ge(e,t+8,n.size)),ge(e,t+12,l),ge(e,t+14,h),t+=16,null!=i&&(ge(e,t,u),ge(e,t+6,n.attrs),ge(e,t+10,i),t+=14),e.set(r,t),t+=l,h)for(var p in c){var d=c[p],g=d.length;ge(e,t,+p),ge(e,t+2,g),e.set(d,t+4),t+=4+g}return u&&(e.set(o,t),t+=u),t};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const Oe=/.+\:/,_e=(e,t,n=!1)=>{let r=new g;for(let n of e.childNodes)1===n.nodeType&&Pe(n)===t&&r.push(n);return n?r:r.shift()},Pe=e=>e.tagName.replace(Oe,""),Ie=(e,t)=>{if(Array.isArray(t))t.forEach((t=>{Ie(e,t)}));else{let{name:n,value:r}=t;void 0!==n&&void 0!==r&&e.setAttribute(n,r)}return e},Le=e=>{if(1!==e.nodeType)return e.textContent;const{attributes:t,childNodes:n}=e,r=t.map((e=>`${e.name}="${e.value}"`)).join(" "),a=Pe(e);let s="";return n.forEach((e=>s+=Le(e))),`<${a} ${r}>${s}</${a}>`};function De(e,t,n){let r=0;for(let a of e.childNodes)t?1===a.nodeType&&Pe(a)===t&&n(a,r):n(a,r),r++}function Ne(e){const[t,n]=[new DOMParser,new XMLSerializer],r=document.implementation.createDocument(null,"",null),a=(e=>{if(!e)return null;let{tag:t,attributes:n}="string"==typeof(a=e)?{tag:a,attributes:null}:a;var a;let s=r.createElement(t.trim());return n&&void 0!==n?Ie(s,n):s})(e);return a&&r.appendChild(a),(e=>{const r=`<?xml version="1.0" encoding="utf-8" standalone="yes"?>\n${n.serializeToString(e)}`;return t.parseFromString(r,"application/xml")})(r)}function je(e,t){let{tag:n,attributes:r,value:a}="string"==typeof(s=e)?{tag:s,attributes:null,value:null}:s;var s;let i=t.createElement(n.trim());return a&&(i.textContent=`${a}`),r&&void 0!==r?Ie(i,r):i}function Re(e,t,n=null){let r=n?n instanceof Element?n:e.getElementsByTagName(n)[0]:e.childNodes[0];if(Array.isArray(t))t.forEach((t=>{Re(e,t,r)}));else{let n=(a=t)instanceof Element?a:je(t,e);r.appendChild(n)}var a;return e}class Ve{constructor(){}static getCells(e){let t=_e(e.documentElement,"sheetData"),n=new g;return De(t,"row",(e=>{De(e,"c",(e=>{n.push(e)}))})),n}static getMergedCells(e){let t=_e(e.documentElement,"mergeCells"),n=new g;return t&&De(t,"mergeCell",(function(e){n.push(e.getAttribute("ref"))})),n}static getCellValue(e){return _e(e,"v")}static getCellInlineStringValue(e){if(e.firstChild&&"is"===Pe(e.firstChild)&&e.firstChild.firstChild&&"t"===Pe(e.firstChild.firstChild))return e.firstChild.firstChild.textContent}static getDimensions(e){let t=_e(e.documentElement,"dimension");return!!t&&t.getAttribute("ref")}static getSharedStrings(e){return function(e,t,n){let r=new g;return De(e,"si",(function(e,t){r.push(function(e){const t=_e(e,"t");if(t)return t.textContent;let n="";return De(e,"r",(function(e){n+=_e(e,"t").textContent})),n}(e))})),r}(e.documentElement)}static getBaseStyles(e){let t=_e(e.documentElement,"cellStyleXfs");return t?_e(t,"xf",!0):new g}static getNumberFormats(e){let t=_e(e.documentElement,"numFmts");return t?_e(t,"numFmt",!0):new g}static getWorkbookProperties(e){return _e(e.documentElement,"workbookPr")}static getCellStyles(e){let t=_e(e.documentElement,"cellXfs");return t?_e(t,"xf",!0):new g}static getRelationships(e){return _e(e.documentElement,"Relationship",!0)}static getSheets(e){let t=_e(e.documentElement,"sheets");return t?_e(t,"sheet",!0):new g}}function Fe(e){let[t,n]=e.split(/(\d+)/);return[parseInt(n),Ge(t.trim())]}function Ue(e,t,n){let{inlineStringValue:r,inlineStringXml:a,styleId:s,styles:i,values:o,properties:l,options:c}=n;switch(t=t||"n"){case"str":e=We(e,c);break;case"inlineStr":if(!(e=r()))throw new Error(`Unsupported "inline string" cell value structure: ${a()}`);e=We(e,c);break;case"s":let n=Number(e);if(isNaN(n))throw new Error(`Invalid "shared" string index: ${e}`);if(n>=o.length)throw new Error(`An out-of-bounds "shared" string index: ${e}`);e=We(o[n],c);break;case"b":if(!/^(?:0|1)?$/g.test(e))throw new Error(`Unsupported "boolean" cell value: ${e}`);e="1"===e;break;case"z":e=void 0;break;case"e":e={0:"#NULL!",7:"#DIV/0",23:"#VALUE!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA"}[u=e]||`#ERROR_${u}`;break;case"d":if(void 0===e)break;let h=new Date(e);if(isNaN(h.valueOf()))throw new Error(`Unsupported "date" cell value: ${e}`);e=h;break;case"n":if(void 0===e)break;let m=Number(e);if(isNaN(m))throw new Error(`Invalid "numeric" cell value: ${e}`);e=function(e,t,n){const r=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],a=/^\[\$-414\]/,s=/;@$/,i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"],{dateFormat:o,smartDateParser:l}=n;if(e){let n=t[e];if(!n)throw new Error(`Cell style not found: ${e}`);let{numberFormat:c}=n||t,{id:u,template:h}=c;if(r.indexOf(parseInt(u))>=0||o&&h===o||!1!==l&&h&&(e=>{e=e.toLowerCase().replace(a,"").replace(s,"");for(let t of e.split(/\W+/))if(i.indexOf(t)<0)return!1;return!0})(h))return!0}return!1}(s(),i,c)?function(e,t){t&&t.epoch1904&&(e+=1462);return new Date(Math.round(24*(e-25569)*36e5))}(m,l):m;break;default:throw new TypeError(`Cell type not supported: ${t}`)}var u;return e||null}function We(e,t){let{trim:n}=t;return(e=!1!==n?e.trim():e)||void 0}function Ge(e){const t=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return((e,n)=>{for(let r of n)e=26*e+t.indexOf(r);return e})(0,e)}function ze(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function qe(e,t,n,r,a){let s=ze(e),i=function(e,t,n,r,a){let s=Ve.getCells(e);return s.isEmpty?s:s.map((e=>(e=>{let[s,i]=Fe(e.getAttribute("r")),o=Ve.getCellValue(e);return{row:s,column:i,value:Ue(o&&o.textContent,e.getAttribute("t"),{inlineStringValue:()=>Ve.getCellInlineStringValue(e),inlineStringXml:()=>Le(e),styleId:()=>e.getAttribute("s"),styles:n,values:t,properties:r,options:a})}})(e)))}(s,t,n,r,a),o=function(e){let t=Ve.getDimensions(e);if(t){let e=t.split(":").map(Fe).map((e=>{let[t,n]=e;return{row:t,column:n}}));return 1===e.length&&(e=[e[0],e[0]]),e}return null}(s)||function(e){const t=(e,t)=>e-t,n=n=>{let r=e.map((e=>e[n])).sort(t);return[r.shift(),r.pop()]};let[r,a]=n("row"),[s,i]=n("column");return[{row:r,column:s},{row:a,column:i}]}(i);return{cells:i,dimensions:o}}var Be=__webpack_require__(162);function He(e="",t=""){const n=e&&"worksheet"===e,r=n?"worksheets/sheet1.xml":"xl/workbook.xml",a="http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+(n?"worksheet":"officeDocument");t=n?t||"rId3":"rId1";const s=Ne({tag:"Relationships",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/relationships"}});return Re(s,je({tag:"Relationship",attributes:[{name:"Id",value:t},{name:"Type",value:a},{name:"Target",value:r}]},s),"Relationships")}function Xe(e="Sheet1",t="rId3"){const n=Ne({tag:"workbook",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return Re(n,["workbookPr",((e,t,n)=>{const r=[{name:"state",value:"visible"},{name:"name",value:e},{name:"sheetId",value:1},{name:"r:id",value:t}],a=je("sheets",n),s=je({tag:"sheet",attributes:r},n);return a.appendChild(s),a})(e||"Sheet1",t||"rId3",n),"definedNames","calcPr"],"workbook")}const Ze=(e,t)=>{const n=je("sheetData",t);return e.forEach(((e,r)=>{e=(e=>e.every((e=>(e=>!!e&&"string"!=typeof e&&"number"!=typeof e&&!(!e.type||!e.value))(e)))?e:e.map((e=>"number"==typeof e?{value:e,type:"number"}:{value:e.toString(),type:"string"})))(e),n.appendChild(((e,t,n)=>{const r=t+1,a=je({tag:"row",attributes:{name:"r",value:`${r}`}},n);return e.forEach(((e,t)=>{a.appendChild(((e,t,n,r)=>{const a=((e,t)=>{const n=e=>{if("number"!=typeof e)return"";const t=Math.floor(e/26),r=String.fromCharCode(97+e%26).toUpperCase();return 0===t?r:n(t-1)+r};return`${n(e)}${t}`})(t,n),s=je({tag:"c",attributes:(({type:e})=>{let t=new g({name:"r",value:a});return"string"===e&&t.push({name:"t",value:"inlineStr"}),t})(e)},r),i=(e=>{const[t,n]=(({type:e,value:t})=>[t,"string"===e?{tag:"is"}:{tag:"v",value:t}])(e);let a=je(n,r);return"string"===e.type&&a.appendChild(je({tag:"t",value:t},r)),a})(e);return s.appendChild(i),s})(e,t,r,n))})),a})(e,r,t))})),n},Ke=Re(Ne({tag:"Types",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/content-types"}}),[{tag:"Default",attributes:[{name:"Extension",value:"xml"},{name:"ContentType",value:"application/xml"}]},{tag:"Default",attributes:[{name:"Extension",value:"rels"},{name:"ContentType",value:"application/vnd.openxmlformats-package.relationships+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/workbook.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/worksheets/sheet1.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}]}],"Types"),Je=He(),Qe=function(e){const t=Ne({tag:"worksheet",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return Re(t,Ze(e,t),"worksheet")};function Ye(e){const{filename:t,sheetname:n,data:r}=e,{data:a,rels:s}=((e="Sheet1",t="rId3")=>({data:Xe(e,t),rels:He("worksheet")}))(n);let i=function(e,t){t||(t={});var n={},r=[];ve(e,"",n,t);var a=0,s=0;for(var i in n){var o=n[i],l=o[0],c=o[1],u=0==c.level?0:8,h=(C=ke(i)).length,m=c.comment,f=m&&ke(m),p=f&&f.length,d=Te(c.extra);h>65535&&J(11);var g=u?we(l,c):l,w=g.length,y=ue();y.p(l),r.push(me(c,{size:l.length,crc:y.d(),c:g,f:C,m:f,u:h!=i.length||f&&m.length!=p,o:a,compression:u})),a+=30+h+d+w,s+=76+2*(h+d)+(p||0)+w}for(var v=new x(s+22),b=a,E=s-a,k=0;k<r.length;++k){var C=r[k];$e(v,C.o,C,C.f,C.u,C.c.length);var A=30+C.f.length+Te(C.extra);v.set(C.c,C.o+A),$e(v,a,C,C.f,C.u,C.c.length,C.o,C.m),a+=16+A+(C.m?C.m.length:0)}return function(e,t,n,r,a){ge(e,t,101010256),ge(e,t+8,n),ge(e,t+10,n),ge(e,t+12,r),ge(e,t+16,a)}(v,a,r.length,E,b),v}({"[Content_Types].xml":et(Ke),_rels:{".rels":et(Je)},xl:{"workbook.xml":et(a),_rels:{"workbook.xml.rels":et(s)},worksheets:{"sheet1.xml":et(Qe(r))}}});(0,Be.saveAs)(new Blob([i]),`${t}.xlsx`)}function et(e){return ke(function(e){return(new XMLSerializer).serializeToString(e).replace(/\s?xmlns=""/g,"")}(e))}const tt=e=>{if(n.formatedDate.test(e[0]))return 2;let t=new g,r=new g;return e.forEach(((e,n)=>{[t[n],r[n]]=e.split(/\/|:|-/)})),t.some((e=>e>12))||r.some((e=>e>12))?t.some((e=>e>12))?1:0:t.countValue(t[0])>r.countValue(r[0])?0:1};class nt{constructor(){this.types=new g("gagal","error"),this.fileName={fname:[],ftype:"",numb:1,ext:".csv"},this.options=((e,t,n="key")=>{let r=Array.isArray(t)?t:[t];return Object.fromEntries(Object.entries(e).filter((([e,t])=>{let a="key"==n?e:t;return r.some((e=>a===e))})))})(y.default,["monthIndex","splitter"])}async import(e){if(!e)return this;this.constructFileName(e.name);const t=await((e,{xlsxFileCheck:t},{ext:n})=>t.test(e.type)&&/xlsx/.test(n)?e.arrayBuffer():e.text())(e,n,this.fileName);return t?this.readData(t):this}constructFileName(e){let[t,r]=e.split(".");const a={fname:[],ftype:"",numb:1,ext:`.${r||"csv"}`};t.replace(n.forFilename,((e,t,n,r)=>(void 0!==r&&a.fname.push(r),void 0!==t&&this.types.isOnArray(t)&&(a.ftype=t||""),void 0!==n&&(a.numb=o(n)?Number(n):1),""))),this.fileName=Object.assign({},this.fileName,a)}async readData(e){const t="string"==typeof e?e.split(/\r\n|\r|\n/):await this.handleExcel(e),r=(([e,...t])=>"string"==typeof(e=e||t[0])&&((e=>{let t=String.raw`^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*)*$`;return new RegExp(t).test(e)})(e)?",":";"))(t),a=new g,s=new g;return t.forEach((e=>{let t=(e=>(e=>{if(e.isEmpty)return!1;const t=e=>n.phonePattern.test(e);return!!e.some(((e,n)=>t(e)&&0!==n))&&(e.forEach(((r,a)=>{var s,i;e[a]=/^"(.*)"$/.test(r)?r.replace(/(^")|("$)/g,""):e[a],e[a]=t(r)?(i="string"==typeof(i=r)?i:Array.isArray(i)?i.join(""):i.toString()).replace(n.phoneValue,(function(e,t,n,r){let a=void 0!==t?t:n.replace(/(\-| )/g,"");return("8"===a.charAt(0)&&"+"!==e.charAt(0)?"62":"")+a})):o(r)?Number(r).toString():r instanceof Date?[(s=r).getDate(),s.getMonth()+1,s.getFullYear()].join("/"):e[a]})),e)})(Array.isArray(e)?e:this.toArray(e,r)))(e);if(t){a.push(t);let r=(e=>{if("string"==typeof e)return(e=n.datePattern.exec(e))?e.toString():null;let[t]=e.filter((e=>n.datePattern.test(e)));return t?t.toString():null})(e);r&&s.push(r)}})),this.options=Object.assign({},this.options,{monthIndex:!s.isEmpty&&tt(s),splitter:r||this.options.splitter}),r&&y.setOption("splitter",r),this.data=a.filter((e=>!e.isEmpty)),this}async handleExcel(e,t={}){let n=Object.assign({},{sheet:1},t);return await async function(e,t={}){t=Object.assign({},t);const n=await async function(e){if(!(e=e instanceof File||e instanceof Blob?await e.arrayBuffer():e))return{};const t=function(e,t){for(var n={},r=e.length-22;101010256!=pe(e,r);--r)(!r||e.length-r>65558)&&J(13);var a=fe(e,r+8);if(!a)return{};var s=pe(e,r+16),i=4294967295==s||65535==a;if(i){var o=pe(e,r-12);(i=101075792==pe(e,o))&&(a=pe(e,o+32),s=pe(e,o+48))}for(var l=t,c=0;c<a;++c){var u=Se(e,s,i),h=u[0],m=u[1],f=u[2],p=u[3],d=u[4],g=u[5],w=Ae(e,g);s=d,l&&!l({name:p,size:m,originalSize:f,compression:h})||(h?8==h?n[p]=ye(e.subarray(w,w+m),{out:new x(f)}):J(14,"unknown compression type "+h):n[p]=Z(e,w,w+m))}return n}(new Uint8Array(e)),n=new Map;for(let e of Object.keys(t))n.set(e,Ce(t[e]));return n}(e);return function(e,t={sheet:1}){let{sheet:n}=t;const r=t=>{if(!e.has(t))throw new Error(`"${t}" file not found inside the *.xlsx file zip archive`);return e.get(t)},a=function(e){let t=ze(e),n={sheets:{},sharedStrings:void 0,styles:void 0};const r=e=>"/"===e[0]?e.slice(1):`xl/${e}`;return Ve.getRelationships(t).forEach((e=>{let t=e.getAttribute("Target");switch(e.getAttribute("Type")){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=r(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[e.getAttribute("Id")]=r(t)}})),n}(r("xl/_rels/workbook.xml.rels")),s=a.sharedStrings?(c=r(a.sharedStrings))?Ve.getSharedStrings(ze(c)):new g:[],i=a.styles?function(e){if(!e)return{};const t=(e,t)=>{let n={};if(e.hasAttribute("numFmtId")){let r=e.getAttribute("numFmtId");n.numberFormat=t[r]??{id:r}}return n};let n=ze(e),r=Ve.getBaseStyles(n).map(t),a=Ve.getNumberFormats(n).map((e=>({id:e.getAttribute("numFmtId"),template:e.getAttribute("formatCode")}))).reduce(((e,t)=>(e[t.id]=t,e)),[]);return Ve.getCellStyles(n).map((e=>e.hasAttribute("xfId")?Object.assign({},r[e.xfId],t(e,a)):t(e,a)))}(r(a.styles)):{},o=function(e){let t=ze(e),n=Ve.getWorkbookProperties(t),r={};return n&&"1"===n.getAttribute("date1904")&&(r.epoch1904=!0),r.sheets=new g,Ve.getSheets(t).forEach((e=>{e.getAttribute("name")&&r.sheets.push({id:e.getAttribute("sheetId"),name:e.getAttribute("name"),relationId:e.getAttribute("r:id")})})),r}(r("xl/workbook.xml")),l=function(e,t){if("number"==typeof e){let{relationId:n}=t[e-1];return n}for(let{name:n,relationId:r}of t)if(n===e)return r}(n,o.sheets);var c;if(!l||!a.sheets[l])throw function(e,t){const n=t.map((({name:e},t)=>`"${e}" (#${t+1})`)).join(", ");return new Error(`Sheet ${"number"==typeof e?`#${e}`:`"${e}"`} not found in the *.xlsx file.`.concat(t?` Available sheets: ${n}."`:""))}(n,o.sheets);const u=function(e,t){let{dimensions:n,cells:r}=e,{transformData:a}=t;if(r.isEmpty)return[];let[s,i]=n,{row:o,column:l}=i,c=new g(o);for(let{row:e,column:t,value:n}of r)e-=1,t-=1,t<l&&e<o&&(c[e]||(c[e]=new g),c[e][t]=n);return a?a(c):c}(qe(r(a.sheets[l]),s,i,o,t),t);return u}(n,t)}(e,n)}toArray(e,t=","){let n=new g;return e.replace(((e=",",t="")=>{let n=","==e?`${e};`:e,r=String.raw`(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^${n}"\s\\]*(?:\s+[^${n}"\s\\]+)*))\s*(?:${e}|$)`;return t?new RegExp(r,t):new RegExp(r)})(t,"g"),((e,...t)=>(t.forEach(((e,r)=>{if(r>=t.length-2)return;const{rgx:a,val:s}=(e=>({rgx:[/\\'/g,/\\"/g,/^['"]?(.*)['"]?$/][e],val:["'",'"',"$1"][e]}))(r);""===e&&n.length++,e&&n.push(e.replace(a,s))})),""))),/,\s*$/.test(e)&&n.push(""),n}export(e,t){const{splitter:n}=this.options,r=(e=>{let{fname:t}=this.fileName;return`${t.join("_")}_${e}${(()=>{let{ftype:t,numb:n}=this.fileName;return e!==t?"":`_${n+1}`})()}`})(e);return nt.createFile(r,t,n)}static createFile(e,t,n=","){const r=((e,t)=>{const n=e=>{let t=(e=e?e instanceof Date?e.toLocaleString():e.toString():"").replace(/"/g,'""');return t.search(/("|,|\n)/g)>=0&&(t=`"${t}"`),t};let r="";return e.forEach((e=>r+=(e=>{let r=t||",";return`${e.map(n).join(r)}\n`})(e))),new Blob([r],{type:"text/csv;charset=utf-8;"})})(t,n);return{fileUrl:URL.createObjectURL(r),fileName:`${e}`}}static exportToXlsx(e,t){return function(e,t,n){return Ye({filename:t,sheetname:t,data:e})}(t,e)}}const rt=new nt;class at{static current(e){y.debug&&console.log("test",e)}}const st=new class{constructor(){this.src="",this.rgx={lt:/</g,gt:/>/g,escape:/\\([\\\|`*_{}\[\]()#+\-~])/g,format:/(^|[^A-Za-z\d\\])(([*])|(_)|(~)|`)(\2?)([^<]*?)\2\6(?!\2)(?=\W|_|$)/g,link:/(?:(http(?:s)?)?:\/\/)?((?:([a-z\d-]+?)\.([\.a-z]{2,}?))|((?:[\.\d]{1,3}?){4}?))(\:\d+)?((?:\/[-a-z\d%_.~+]*?)*?)(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?(?=$|\s|\n|<)/gi,para:/(?=^|\n)(\s+)*([^<]+?)[\n\s]*(?=<|\n|$)/g},this.plain=!1}element(t,n,r={}){return e.createElement(Object.assign({tag:t,html:n},r)).outerHTML}raw(e){return e.replace(this.rgx.escape,"$1")}highlight(e){let{format:t}=this.rgx;return this.plain?e:e.replace(t,((e,t,n,r,a,s,i,o)=>{const l=((e,t,n,r)=>r?"code":e?"strong":t?"em":n?"s":"")(r,a,s,i);return o=i?o.replace(/`/g,""):o,`${t}${this.element(l,this.highlight(o))}`}))}link(){let{link:e}=this.rgx;return this.src=this.src.replace(e,((e,...t)=>{let[n,r]=t;return this.element("a",e,{href:e,title:r,alt:r,target:"_blank"})})),this}#e(){let{para:e}=this.rgx;return this.src=this.src.replace(e,((e,t,n)=>`${t=t?t.replace(/\n/,"<br/>"):""}${this.element("div",this.raw(this.highlight(n)))}`)),this}#t(){return this.src=this.src.trim(),this.src}toHtml(e,t=!1){const{lt:n,gt:r}=this.rgx;return this.src=`${e}`,this.plain=t,this.src=this.src.replace(n,"&lt;").replace(r,"&gt;"),this.#e().link().#t()}};class it{constructor(){this.data=new g}get count(){return this.data.length}add(e){return this.data.push(e),this}}const ot=new class{constructor(){this.sukses=new it,this.gagal=new it,this.error=new it}reset(){for(let e in this)this[e]=new it;return this}createData(e){return this.hasOwnProperty(e)?this[e]:new it}success(e){this.sukses.add(e)}fail(e,t=1){t?this.error.add(e):this.gagal.add(e)}},lt=new class{constructor(){this.timer=!1,this.time=null,this.fn=null}get isRunning(){return!1!==this.timer}set(e,t){this.time=e,this.fn=t}start(e=null){this.isRunning||(this.timer=setInterval(this.fn,this.time)),e&&"function"==typeof e&&e(!0)}break(e=null){this.isRunning&&(clearInterval(this.timer),this.timer=!1),e&&"function"==typeof e&&e(!1)}stop(e=null){this.fn=null,this.time=null,this.break(e)}},ct=new class{constructor(){this.currentIndex=0,this.queue=new g,this.stock=new g,this.offset=0}get isEmpty(){return this.queue.isEmpty}get now(){return this.queue.isEmpty?void 0:this.queue[this.offset]}get size(){return this.queue.length-this.offset}get long(){return this.stock.length}setData(e){this.queue=e,this.stock=e}run(){if(this.queue.isEmpty)return;let e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}reset(){this.queue=new g,this.stock=new g,this.offset=0,this.currentIndex=0}reload(){this.queue=this.stock,this.currentIndex=0,this.offset=0}},ut=new class extends p{constructor(){super();const e=this.getValue("wayfu-changelog",new g);this.details=0!==e.length?new g(...e):new g}get getChanges(){const{homepage:e}=this.appInfo;return new Promise((t=>{let n={url:`${e}files/changelog.json`,onload:e=>{const{status:n,responseText:r}=e;if(200===n){let e=JSON.parse(r);e=Array.isArray(e)?e:e.changelog,t(e)}else t(200===n)}};this.request(n)}))}get Log(){return this.details}async doUpdate(e){const t=n.getVersion.exec(e)[1],{version:r,name:a,downloadURL:s}=this.appInfo;if(!((e,t)=>{const{forVersion:r}=n;if(!e||!t||0===e.length||0===t.length)return!1;if(e==t)return!0;if(r.test(e)&&r.test(t)){let n=e.includes(".")?".":"-",r=e.split(n).map((e=>o(e)?Number(e):e)),a=t.split(n).map((e=>o(e)?Number(e):e));for(let e=0;e<r.length;++e){if(a.length==e)return!0;if(o(r[e])&&o(a[e])){if(r[e]==a[e])continue;return r[e]>a[e]}{let[t,n]=[Number(/\d+/.exec(r[e])),Number(/\d+/.exec(a[e]))],[s,i]=[/[A-Za-z]/.exec(r[e]),/[A-Za-z]/.exec(a[e])];if(t==n){if(s&&i&&s[0]==i[0])continue;return s&&i?s[0]>i[0]:!!s}return t>n}}}return e>=t})(r,t)){const e=`${a} ${t} sudah tersedia, perbaharui sekarang?`;await d.confirm(e)&&(window.location.href=s)}}async checkUpdate(){const{updateURL:e}=this.appInfo,t=new Promise((t=>{const n={url:`${e}`,onload:e=>{const{status:n,responseText:r}=e;t(200===n&&r)}};this.request(n)}));return this.details=new g(...await this.getChanges),this.save(),this.doUpdate(await t),this}save(){this.setValue("wayfu-changelog",this.details)}},ht=new class extends f{constructor(){super(),this.errors={}}get errorList(){const e=new g;if(0!==Object.entries(this.errors).length)for(const t in this.errors)e.push(this.error(t));return e}validate(e){this.errors={},e=this.intoObject(e);for(let t in e)e[t].rules.forEach((e=>this[e](t)));return 0===Object.entries(this.errors).length}notEmpty(e){let[t,n]=(e=>{let[t,n]=[!1,""];return"message"===e?(t=""!==b.inputMessage,n="Silahkan Masukkan Pesan terlebih dahulu..."):"queue"===e&&(t=void 0!==ct.now,n="Silahkan Masukkan File Penerima Pesan..."),[t,n]})(e);return t||(this.errors[`${e}.isEmpty`]=n),t}belowMax(e){let{maxQueue:t}=y,{size:n}=ct;return!(n>t&&(this.errors[`${e}.overMax`]=`Blast Auto tidak boleh lebih dari ${t} Nomor!`,1))}error(e){return this.errors[e]}showError(){const t=this.errorList;if(!t.isEmpty){const n=e.createListElement(t,"ul",{classid:"wfu-reports"});d.alert(n,"[ERROR] Proses Gagal Dimulai")}}};function mt(){ct.reset(),wt()}function ft(t){return e.setElements([{elm:"#_blast-ico",props:{d:t?"M505.16405,19.29688c-1.176-5.4629-6.98736-11.26563-12.45106-12.4336C460.61647,0,435.46433,0,410.41962,0,307.2013,0,245.30155,55.20312,199.09162,128H94.88878c-16.29733,0-35.599,11.92383-42.88913,26.49805L2.57831,253.29688A28.39645,28.39645,0,0,0,.06231,264a24.008,24.008,0,0,0,24.00353,24H128.01866a96.00682,96.00682,0,0,1,96.01414,96V488a24.008,24.008,0,0,0,24.00353,24,28.54751,28.54751,0,0,0,10.7047-2.51562l98.747-49.40626c14.56074-7.28515,26.4746-26.56445,26.4746-42.84374V312.79688c72.58882-46.3125,128.01886-108.40626,128.01886-211.09376C512.07522,76.55273,512.07522,51.40234,505.16405,19.29688ZM384.05637,168a40,40,0,1,1,40.00589-40A40.02,40.02,0,0,1,384.05637,168ZM35.68474,352.06641C9.82742,377.91992-2.94985,442.59375.57606,511.41016c69.11565,3.55859,133.61147-9.35157,159.36527-35.10547,40.28913-40.2793,42.8774-93.98633,6.31147-130.54883C129.68687,309.19727,75.97,311.78516,35.68474,352.06641Zm81.63312,84.03125c-8.58525,8.584-30.08256,12.88672-53.11915,11.69922-1.174-22.93555,3.08444-44.49219,11.70289-53.10938,13.42776-13.42578,31.33079-14.28906,43.51813-2.10352C131.60707,404.77148,130.74562,422.67188,117.31786,436.09766Z":"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"}}]),t&&e.getElement(".progress-panel")||d.progressPanel(t,dt),t}async function pt(){const e=e=>new Promise((t=>setTimeout(t,e)));if(lt.isRunning||lt.start(ft),lt.isRunning&&ct.now){let{useCaption:t,useImage:n,hasImage:r}=y,a=ct.currentIndex+=1,s=ct.run(),i=b.setData(s),o="";switch(wt(a,i.phone),await e(500),o=await(async e=>!1!==("caption"!==e&&n&&r?await window.WAPI.openChat(i.phone):await i.sendText())?"SUCCESS":"ERROR")(t),await e(100),"SUCCESS"===o&&(o=n&&r?await i.sendImg()?"SUCCESS":"FAILED":o),await e(400),o){case"SUCCESS":ot.success(s);break;case"FAILED":ot.fail(s,0);break;case"ERROR":ot.fail(s)}await e(3500)}else gt()}async function dt(){lt.break(ft),ct.now&&await d.confirm("Stop Proses?")?gt():pt()}function gt(){v.isPremium||v.updateTrial("update"),lt.stop(ft),async function(){ct.isEmpty&&(e.setElement("#getFile",{value:""}),mt());const t=t=>{const{count:n,data:a}=ot.createData(t),{downloadBtnSvg:s}=r;if(a.isEmpty)return n;const{fileName:i}=rt.export(t,a),o=e.createSVGElement(s,{viewBox:"0 0 512 512"}),l=e.createElement({tag:"a",title:`Download "${i}"`,classid:"wfu-export-csv",href:"#"});return l.appendChild(o),l.dataset.reportType=t,`${n} `+l.outerHTML};let n=e.createListElement([`SUKSES  = ${t("sukses")}`,`GAGAL   = ${t("gagal")}`,`ERROR   = ${t("error")}`],"ul",{classid:"wfu-reports"});if(d.alert(n,"[REPORT] Kirim Pesan Otomatis Selesai."),await e.hasElement(".wfu-reports a[data-report-type]")){function a(e){let t=(e.currentTarget||e.target).dataset.reportType,{data:n}=ot.createData(t),{fileName:r}=rt.export(t,n);return yt(n,r)}e.getElement(".wfu-reports a[data-report-type]",!0).forEach((t=>e.onEvent(t,"click",a)))}v.isPremium||v.showAlert(v.isTrial?3:(e.getElement("#auto").click(),4),!0),window.WAPI.Chat.clearAllDraft()}()}function wt(t=.5,n=null){let{size:r,isEmpty:a}=ct,s=a?"none":"inline-block",i=a?"":`Data: Loaded, ${r} Nomor`;if(e.setElements([{elm:"#_file-info",props:{title:i,style:`display:${s}`}},{elm:"span.curPhone",props:{text:`+${n||""}`}},{elm:"#_data-count",props:{text:r}}]),a){let t=e.getElement("#_mode");t.checked&&t.click(),e.setElement(t,{disabled:a})}!function(t,n){let r=t.long||100,a=n/r*100;n>=1&&e.setElements([{elm:".waBar",props:{title:`${n}/${r}`}},{elm:"span.curNumb",props:{text:`${n}/${r}`}}]),e.setElementStyle(".waBar",{width:`${a}%`})}(ct,t)}async function yt(t,n){const a=t=>e.createElement({tag:"div",classid:t});function s(e){const{id:t,value:n}=e.currentTarget||e.target;"fileType"===t&&y.setOption(t,n)}function i(e){const{id:t,checked:n}=e.currentTarget||e.target;if("set_fileType"!==t)return;let{fileType:r}=y;y.setOption("exportType",n?r:"ask")}let{fileUrl:o,fileName:l}=nt.createFile(n,t),{exportType:c}=y;if("ask"===c){if(!await d.confirm((t=>{const n=a("wfu-options"),o=((t,{fileType:n},{checksSvg:r})=>{const i=["csv","xlsx"],o=a("row"),l=(()=>{let n=a("_label"),r=e.createLabelElement({id:t,text:"Simpan file sebagai"});return n.appendChild(r),n})(),c=(()=>{let o=a("_input"),l=e.createLabelElement({id:t,classid:"select"}),c=e.createSelectElement({id:t},i,{change:s}),u=e.createSVGElement(r,{viewBox:"0 0 10 6"});return c.value=n,l.append(c,u),o.appendChild(l),o})();return o.append(l,c),o})(t,y,r),l=(t=>{const n=a("row right"),r=e.createCheckElement({id:`set_${t}`,classid:"_input checks"},{change:i}),s=e.createLabelElement({id:`set_${t}`,classid:"_label",text:"Simpan pengaturan"});return n.append(r,s),n})(t);return n.append(o,l),n})("fileType"),`Download "${n}"`))return;c=y.fileType}return"xlsx"===c?nt.exportToXlsx(n,t):e.createElement({tag:"a",href:o,download:`${l}`}).click()}const vt=new class{constructor(){}async runTasks(e){if(!await v.check())return;if(await async function(){if(0!==ct.currentIndex&&ct.now)return!(await d.confirm(`Lanjutkan Proses dari data ke-${ct.currentIndex+1}?`)||await d.confirm("Proses ulang dari awal?")&&(ct.reload(),wt(),1));const e=ht.validate({message:{rules:["notEmpty"]},queue:{rules:["notEmpty","belowMax"]}});return ht.showError(),!e}())return;const{useImage:t}=y,n=t?6e3:5500;ot.reset(),lt.set(n,(()=>pt())),pt()}tabMenu(t){const n=t.currentTarget||t.target,r=n.value,a=e.getElement("#wayfuPanel .menus",!0);e.setElements([{elm:a,props:{removeClass:"active"}},{elm:n,props:{addClass:"active"}}]).setElementsStyle([{elm:"#wayfuPanel .menu-content",props:{display:"none"}},{elm:`#${r}`,props:{display:"block"}}]),y.setOption("activeTab",Array.from(a).indexOf(n))}textPreview(t){let n=t.currentTarget||t.target,r=e.getElement("#wayfuPanel textarea",!0),a=n.checked;r.forEach((t=>{const n="message"===t.id?"msgPreview":"captPreview",r=((e,{id:t})=>{let n=b["input"+("message"===t?"Message":"Caption")];return e?(b.setData(ct.now),n=b.subtitute(n),st.toHtml(n,!e)):""})(a,t),s=((e,{id:t})=>{if("message"===t)return!e;const{useCaption:n}=y;return n?!e:n})(a,t);e.setElement(`#${n}`,{html:r}).setElementStyle(`#${n}`,{display:s?"none":"block"}).setElementStyle(t,{display:s?"block":"none"})}))}updateText(e){const{id:t,value:n,innerText:r}=e.target||e.currentTarget,a=(e=>{let t=`${e}`.match(/[A-Za-z]+/g);return t?(t.forEach(((e,n)=>t[n]=h(e))),`input${t.join()}`):`input${h(e)}`})(t);b.setProperties({[a]:n||r},!1)}async useImage(t){const n="caption"===y.useCaption,r=t.currentTarget||t.target,a=!!n&&r.checked,s=n?"":"Caption menggunakan pesan",i=r.dataset.captId;e.setElements([{elm:`#${r.value}`,props:{disabled:!r.checked}},{elm:`#${i}`,props:{disabled:!a,title:s}},{elm:"#useCaption",props:{disabled:!r.checked}}]),y.setOption("useImage",r.checked)}async loadData(t){const n=t.currentTarget||t.target,[r]=n.files,a=e.getElement("#_mode"),s=await(async e=>{if(!e)return null;try{return await rt.import(e)}catch(e){return d.alert("[ERROR] File .xlsx penerima tidak valid!"),console.error(e),null}})(r);mt(),s?function(e){let t="auto"!==y.dateFormat?y.dateFormat:e.options.monthIndex||y.monthIndex,n=2==t;y.setOptions(Object.assign({},e.options,{monthIndex:t,isFormat:n})),ct.setData(e.data),wt()}(s):(e.setElement(n,{value:null}),a.checked&&a.click()),e.setElement(a,{title:s?"Mode Pesan":"Masukkan File CSV",disabled:!s})}imagePreview(t){const n=t.currentTarget||t.target,r=4*Math.pow(1024,2),a=n.dataset.value;let s=null;a?e.setElement(`#${a}`,{value:""}):(s=n.files[0],s&&s.size>r&&(d.alert("Ukuran gambar tidak boleh lebih dari 4MB"),s=null)),e.setElement("#_img-output",{src:s?URL.createObjectURL(s):""}).setElementStyle("#_deleteImg",{display:s?"block":"none"}),b.setProperties({imageFile:s}),y.setOptions({hasImage:!!s,imageFile:s})}toggleApp(t){const n=t.currentTarget||t.target,{active:r}=window.WAPI.WebClassesV2,a=n.classList.toggle("active"),s=(t=>{let n=t.getAttribute("value")||t.dataset.target;return e.getElement(`#${n}`)})(n);s.style.height=s.style.height?null:`${s.scrollHeight}px`,n.classList.toggle(r);let i=s.style.height?"unset":"collapse";e.setElementStyle("#wayfuPanel",{visibility:i}),y.setOption("openPanel",a)}inputRange(t){const n=t.currentTarget||t.target,{id:r,value:a}=n;e.setElements([{elm:n,props:{max:"maxQueue"===r?y.queueLimit:y.bpLimit}},{elm:e.getElement("output",n.parentElement),props:{text:a}}]),y.setOption(r,a)}inputChecks(e){const{id:t,value:n}=e.currentTarget||e.target;y.setOption(t,n)}inputSelects(t){const{id:n,value:r}=t.currentTarget||t.target;switch(n){case"themeColor":!function(t,n){e.setElementStyle("#wayfuPanel",{backgroundColor:n}),y.setOption(t,n)}(n,r);break;case"dateFormat":!function(t){if(o(t))t=2!==Number(t)?t:0,y.setOptions({isFormat:2===t,monthIndex:t,dateFormat:t});else{y.setOptions({isFormat:!1,dateFormat:t});const n=e.getElement("#getFile");ct.isEmpty&&""===n.value||(e.setElement(n,{value:""}),d.alert("Untuk opsi <strong>Deteksi Otomatis</strong>, Silahkan masukkan ulang file penerima pesan.","[WARNING] Masukkan ulang CSV"),mt())}}(r);break;case"useCaption":!async function(t,n){let r="caption"!==n;r&&(r="caption"!==(n=await d.confirm("Mengubah Pesan menjadi Caption akan menaikan potensi Banned dari WhatsApp. Apa Anda Yakin?")?n:"caption")),e.setElement("#_caption",{disabled:r,title:r?"Caption menggunakan pesan":""}),y.setOption(t,n)}(n,r);break;case"exportType":!async function(t,n){y.setOption(t,n);let r=await e.hasElement("span.wfu-link");if(r){let t=(({title:e})=>e.replace(/(.*)\.[^.]+(["]+)$/g,(function(e,t,r){return`${t}.${n+r}`})))(r);e.setElement(r,{title:t})}}(n,r)}}changeLog(e){}async checkChat(t){const{chatHeader:n,menu:a,menuDefault:s,item:i,button:o}=window.WAPI.WebClassesV2,l=e.getElement(`.${n} .${a}.${s}`),c=e.getElement("span[data-icon='download-alt']",l);if(null!==E.selectChat().room&&E.isGroup){let{groupMetadata:n}=E,{subject:a,participants:s}=n,u=new g;for(const{contact:e}of s.getModelsArray()){let{id:{user:t},name:n,pushname:r}=e.serialize();u.push([r||n||t,t])}let h=(t=>{let n=e.createElement({tag:"div",classId:o,role:"button","data-tab":"6",tabindex:"0","aria-disabled":!1,html:t.outerHTML});return e.createElement({tag:"div",classId:i,html:n.outerHTML})})((t=>{let n=e.createSVGElement(r.groupDownloadBtnSvg,{width:"24",height:"24"});return e.createElement({tag:"span",title:`Download "${t}"`,"data-testid":"download-alt","data-icon":"download-alt",classid:"wfu-link",html:n.outerHTML})})(a));if(c){if(c&&t.target===c&&await v.check())return yt(u,a)}else l.insertBefore(h,l.firstChild)}}};const bt=async e=>{if(!window.WAPI||!window.WAPI.Msg){function t(e){console.log(e);for(let t in e.m)"object"==typeof e(t)&&null!==e(t)&&i.forEach((n=>{if(!n.conditions||n.foundedModule)return;let r=n.conditions(e(t));null!==r&&(n.foundedModule=r)}));let t=i.find((e=>"Store"===e.id)),r=t.foundedModule?t.foundedModule:{};return i.forEach((e=>{"Store"!==e.id&&e.foundedModule&&(r[e.id]=e.foundedModule)})),function(e){let{WebClasses2:t,WebClasses3:r,WebClasses4:a,...s}=e,i=Object.assign({},t,r,a);return Object.assign(s,{WebClassesV2:i}),Object.defineProperties(s.Chat.constructor.prototype,{findImpl:{value:async function(e,t){let n=await(async t=>{if("string"==typeof t){let t=await s.WapQuery.queryPhoneExists(e);return t?t.wid:null}return t})(e);if(!n)return null;let r=this.get(n);return r||([r]=this.add({createLocally:!0,id:n},{merge:!0})),r}},clearAllDraft:{value:function(){for(let t of this.getModelsArray())(void 0!==(e=t).draftMessage&&""!==e.draftMessage.text||e.hasDraftMessage)&&t.clearDraft();var e}}}),Object.defineProperties(s.Chat.modelClass.prototype,{open:{value:async function(){let{Cmd:e}=s;await e.openChatAt(this)},enumerable:!0},clearDraft:{value:function(){return this.setComposeContents({text:"",timestamp:Date.now()}),this},enumerable:!0}}),Object.defineProperties(s,{Me:{get:function(){return this.Contact.getMeContact()},enumerable:!0},SendImgToChat:{value:function(e,t,n="",r=!1){return!(!e||!t)&&new Promise((a=>{this.Chat.find(`${e}@c.us`).then((e=>{let s=new this.MediaCollection(e);s.processAttachments([{file:t}],e,e).then((()=>{let[t]=s.getModelsArray();t.sendToChat(e,{caption:n}),a(!r||e)})).catch((e=>(console.log(e),a(!1))))})).catch((e=>(console.log(e),a(!1))))}))},enumerable:!0},composeAndSendMsgToChat:{value:function(e,t,n=!1){const{ComposeBox:r}=this;return new Promise((a=>{this.Chat.find(`${e}@c.us`).then((async e=>{e.active||await e.open(),await new Promise((e=>setTimeout(e,500))),await r.paste(e,t),await r.send(e),a(!n||e)})).catch((e=>(console.log(e),a(!1))))}))},enumerable:!0},openChat:{value:async function(e){const{Chat:t}=this;let r;e=(({phone:e},t)=>e.test(t)?t:`${t}@c.us`)(n,e);try{r=await t.find(e)}catch(e){}return!!r&&await r.open()},enumerable:!0}}),window.WAPI=Object.keys(s).sort().reduce(((e,t)=>(e[t]=s[t],e)),{}),window.WAPI}(r)}const r=`parasite${Date.now()}`,a=(e=>{for(let t of Object.keys(e))if(/[^|]?webpack./g.test(t))return t;return null})(e),s=await(async(e,t)=>new Promise((n=>{const r=()=>{e.__debug?e.__debug.modulesMap?.WAWebUserPrefsMeUser?n("meta"):setTimeout(r,200):e[t]&&Array.isArray(e[t])&&e[t].every((e=>Array.isArray(e)&&e.length>0))?n("webpack"):setTimeout(r,200)};r()})))(e,a);if(console.log(s),a&&"object"==typeof e[a])e[a].push([[r],{},e=>t(e)]);else if("meta"===s){let o=(e=>{const t=t=>{try{return e.ErrorGuard.skipGuardGlobal(!0),e.importNamespace(t)}catch(e){}return null};return Object.defineProperty(t,"m",{get:()=>{const t={};return Object.keys(e.require("__debug").modulesMap).filter((e=>e.includes("WA"))).forEach((e=>{t[e]={default:modulesMap[e].defaultExport,factory:modulesMap[e].factory}})),t}}),t})(e);console.log(o),t(o)}else console.error("Failed to load WAPI Module!")}};class Et extends p{constructor(e){super(),this.initialize(e)}async initialize(e){await bt(e),this.registerPanel(),this.registerUser(),this.registerOptions(),this.onLoadView()}registerPanel(){E.init();const t=this.getResource("pnl"),n=this.getResource("css"),s=this.getResource("ico","url");!function(t,n,s){const{name:i,version:o,icon:l}=s;e.createElement({tag:"header",id:"wayfuPanel",after:"header",html:t.replace(/VERSION/,o).replace(/WA_VERSION/,window.WAPI.Debug.VERSION)}),e.addStyle(n,{id:"wayfuStyle"}).setElement("img.appIco",{src:l}),function(t){const{menu:n,menuDefault:a,item:s,button:i}=window.WAPI.WebClassesV2,o=e.getElement(`header .${n}.${a} span`);o.insertBefore((t=>{const n=(()=>{let t=e.createSVGElement(r.wayFuSvg,{width:"24",height:"24",viewBox:"0 0 128 128",class:"wayfu-app-icon"});return e.createElement({tag:"span","data-testid":"wayfu-app","data-icon":"wayfu-app",html:t.outerHTML})})(),a=e.createElement({tag:"div",classid:i,role:"button","data-tab":"2",tabindex:"0","aria-disabled":!1,title:`${t}`,"aria-label":`${t}`,html:n.outerHTML});return e.createElement({tag:"div",id:"wayfuToggle",classid:s,"data-testid":"menu-bar-wayfu-app","data-target":"wayfuPanel",html:a.outerHTML})})(t),o.firstChild)}(i),a.forEach((t=>{const{element:n,type:r,event:a}=t;e.getElement(n||document,!0).forEach((t=>{e.onEvent(t,r,(function(e){let t=vt[a];if("function"==typeof t)return t(e)}))}))})),window.addEventListener("click",(function(e){at.current(e)}))}(t,n,Object.assign({},this.appInfo,{icon:s}))}registerUser(){v.init().gettingData()}registerOptions(){y.init()}async onLoadView(){e.setElementStyle("#wayfuPanel",{"background-color":y.themeColor}).setElement("input#getFile",{accept:[".txt",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].join(",")}),e.getElement("#wayfuPanel .menus",!0)[y.activeTab||0].click(),y.openPanel?e.getElement("#wayfuToggle").click():e.setElementStyle("#wayfuPanel",{visibility:"collapse"}),window.WAPI.Chat.clearAllDraft(),ut.checkUpdate()}debug(e){if(e="boolean"!=typeof e||e,y.setOption("debug",e),e)Object.assign(Et.prototype,{message:b,options:y,user:v,chat:E,csvFile:rt},window.WAPI);else for(let e of["message","options","user","chat","csvFile",...Object.keys(window.WAPI)])delete Et.prototype[e];return this}}!async function t(){await e.hasElement("div.two")?unsafeWindow.WayFu=new Et(unsafeWindow):await t()}()})();