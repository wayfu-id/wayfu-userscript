// ==UserScript==
// @name         WayFu - Easy Follow Up
// @description  WhatsApp Easy Follow Up.
// @date         2025-09-03
// @copyright    2018, Rizal Nurhidayat (https://github.com/rzlnhd)
// @license      CC BY-NC-ND 4.0; https://creativecommons.org/licenses/by-nc-nd/4.0/
// @icon         https://wayfu.id/v4/assets/wayfu-icon.webp
// @homepage     https://wayfu.id/
// @supportURL   https://wayfu.id/
// @version      4.7.0
// @author       Rizal Nurhidayat (https://github.com/rzlnhd)
// @match        https://web.whatsapp.com/*
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_xmlhttpRequest
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_log
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @grant        GM_info
// @grant        GM_notification
// @connect      wayfu.id
// @connect      raw.githubusercontent.com
// @updateURL    https://wayfu.id/v4/update.meta.js
// @downloadURL  https://wayfu.id/v4/wayfu-install.user.js
// @require      https://cdn.jsdelivr.net/npm/pdfjs-dist@2.16.105/build/pdf.min.js
// @require      https://cdn.jsdelivr.net/npm/pdfjs-dist@2.16.105/build/pdf.worker.min.js
// @resource ico https://wayfu.id/v4/assets/wayfu-icon.webp
// @resource pnl https://wayfu.id/v4/assets/wayfu-view.html
// @resource clr https://wayfu.id/v4/assets/wayfu-colors.json
// @resource css https://wayfu.id/v4/assets/wayfu-style.min.css
// ==/UserScript==

var __webpack_modules__={213:function(e,t,n){var a,r;void 0===(r="function"==typeof(a=function(){"use strict";function t(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){o(a.response,t,n)},a.onerror=function(){console.error("could not download file")},a.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,n,i){var o=s.URL||s.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):a(l.href)?t(e,n,i):r(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),n);else if(a(e))t(e,n,s);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){r(i)}))}}:function(e,n,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,a);var o="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var h=s.URL||s.webkitURL,p=h.createObjectURL(e);r?r.location=p:location.href=p,r=null,setTimeout((function(){h.revokeObjectURL(p)}),4e4)}});s.saveAs=o.saveAs=o,e.exports=o})?a.apply(t,[]):a)||(e.exports=r)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__={};(()=>{"use strict";const e=new class{constructor(){}getElement(e,t,n){let[a,r]=((e,t)=>"boolean"==typeof e?[null,e]:e?[this.getElement(e),t??!1]:[null,!1])(t,n);return"string"==typeof e?(e=e.trim(),a=a&&a instanceof HTMLElement?a:document,r?a.querySelectorAll(e):a.querySelector(e)):e instanceof HTMLElement||e instanceof NodeList?e:void 0}getParents(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});let n=[],a=this.getElement(e);for(;a&&a!==document;a=a.parentNode)t?a.matches(t)&&n.push(a):n.push(a);return n}createElement(e){let t,n,a;for(const r in e)if(e.hasOwnProperty(r))switch(r){case"tag":n=document.createElement(e[r]);break;case"text":a="innerText"in document?"innerText":"textContent",n[a]=e[r];break;case"html":n.innerHTML=e[r];break;case"classid":if("array"==typeof e[r])for(let t of e[r])n.classList.add(t);else"string"==typeof e[r]&&(n.className=e[r]);break;case"append":t=this.getElement(e[r]),t.appendChild(n);break;case"prepend":t=this.getElement(e[r]),t.childNodes.length&&t.insertBefore(n,t.childNodes[0]),t.appendChild(n);break;case"before":t=this.getElement(e[r]),t.parentNode.insertBefore(n,t);break;case"after":t=this.getElement(e[r]),t.parentNode.insertBefore(n,t.nextSibling);break;case"replace":t=this.getElement(e[r]),t.parentNode.replaceChild(n,t);break;case"event":for(const t in e.event)e.event.hasOwnProperty(t)&&this.onEvent(n,t,e.event[t]);break;case"callback":e[r](n);break;default:n.setAttribute(r,e[r])}return n}createElements(e,t){let n=t?t instanceof window.HTMLElement?t:"object"==typeof t&&null!=t.tag?this.createElement(t):null:"string"==typeof t?this.getElement(t):null;if(Array.isArray(e))for(let t of e)("object"==typeof t||t.tag)&&(n&&(t.append=n),this.createElement(t));return n||this}createListElement(e,t="ol",n={}){let a=this.createElement(Object.assign({tag:t},n));return Array.isArray(e)&&e.forEach((e=>{if("object"==typeof e){let n=this.createElement({tag:"li",html:e.title,append:a});Array.isArray(e.content)&&this.createListElement(e.content,t||"ol",{append:n})}else"string"==typeof e&&this.createElement({tag:"li",html:e,append:a})})),a}createSelectElement(e,t,n){const{id:a,classid:r}=e,s=this.createElement({tag:"select",id:a,classid:r});if(s.append(...(e=>e.map((e=>this.createElement({tag:"option",value:e,text:e}))))(t)),n)for(let e in n)this.onEvent(s,e,n[e]);return s}createCheckElement(e,t){const{id:n,classid:a}=e,r=this.createElement({tag:"input",type:"checkbox",id:n,name:n,classid:a});if(t)for(let e in t)this.onEvent(r,e,t[e]);return r}createLabelElement(e){const{id:t,classid:n,text:a}=e;return this.createElement({tag:"label",for:t,classid:n,text:a})}createSVGElement(e,t={}){const n=(e,t)=>{let n=document.createElementNS("http://www.w3.org/2000/svg",e),a=e=>`-${e.toLocaleLowerCase()}`;for(let e in t){let r="viewBox"===e?e:e.replace(/[A-Z]/g,a);n.setAttributeNS(null,r,t[e])}return n},a=n("svg",t);return(Array.isArray(e)?e:[e]).forEach((e=>{const{type:t,data:r}=e;a.appendChild(n(t,r))})),a}setElementStyle(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"zIndex":e.style.zIndex=t[n];break;case"margin":e.style.margin=t[n];break;case"padding":e.style.padding=t[n];break;case"display":e.style.display=t[n];break;default:e.style[n]=t[n]}return this}setElementsStyle(e,t){return Array.isArray(e)?e.forEach((e=>{this.setElementStyle(e.elm,e.props)})):"string"==typeof e&&this.getElement(e,!0).forEach((e=>{this.setElementStyle(e,t)})),this}setElement(e,t){const n=e instanceof window.HTMLElement?[e]:this.getElement(e,!0);let a;if(n&&0!==n.length&&n[0])for(const e of n)for(const n in t)if(t.hasOwnProperty(n))switch(n){case"text":a="innerText"in document?"innerText":"textContent",e[a]=t[n];break;case"html":e.innerHTML=t[n];break;case"class":e.className=t[n];break;case"addClass":e.classList.add(t[n]);break;case"removeClass":e.classList.remove(t[n]);break;case"toggleClass":e.classList.toggle(t[n]);break;case"disabled":e.disabled=t[n];break;case"value":e.value=t[n];break;case"dispatch":e.dispatchEvent(t[n]);break;case"readonly":case"readOnly":e.readOnly=t[n];break;default:e.setAttribute(n,t[n])}return this}setElements(e=[]){return Array.isArray(e)&&e.forEach((e=>{this.setElement(e.elm,e.props)})),this}hasElement(e,t=10){return new Promise((n=>{let a=setInterval((()=>{let r=this.getElement(e);r&&(n(r),clearInterval(a)),(t-=!1)&&(n(!1),clearInterval(a))}),1e3)}))}insertElement(e,t){return this.getElement(t||"body").appendChild(this.getElement(e)),this}removeElement(e,t){return this.getElement(t||"body").removeChild(this.getElement(e)),t||this}onEvent(e,t,n,a=!1){let r=this.getElement(e);return window.addEventListener&&(r||window).addEventListener(t,n,a),this}eventFire(e,t,n,a={bubbles:!0,composed:!0}){return this.setElement(e,{text:n||"",dispatch:t?new InputEvent(t,a):new MouseEvent("mousedown",a)}),this}addStyle(e,t={}){const n={tag:"style",html:e,append:"head"};return this.createElement(Object.assign({},n,t)),this}};class t extends Date{addDays(e){let n=new t(this.valueOf());return n.setDate(n.getDate()+e),n}addMonths(e){let n=new t(this.valueOf());return n.setMonth(n.getMonth()+Number(e)),n}}const n={forVersion:/^\d+(?:(?:\.|-)\d+[A-Za-z]?)*$/,getVersion:/(?:@version\s*(\d+(?:(?:\.|-)\d+[A-Za-z]?)*))/,phonePattern:/^(?:[\+\d]?[\- \d]{10,})(?:\s|$)/,phoneValue:/^[0\+]*(?:(\d{9,})|([\d]{1,3}(?:[\- ]?[\d]{2,})+))(\s|$)/,datePattern:/\d{1,4}[\/|-|:]\d{1,2}[\/|-|:]\d{2,4}/,formatedDate:/^\d{4}[\/|-|:]\d{1,2}[\/|-|:]\d{1,2}$/,forFilename:/(?!\s*$)\s*(?:(gagal|error)|(?:\(?([0-9]*)\)?)|([^_]*))(?:_|\s|$)/g,xlsxFileCheck:/^app.*\/vnd\.open[^\.]*(?:[^]*\.sheet)$/,phone:/^[0-9]*@c\.us$/},a={downloadBtnSvg:{type:"path",data:{fill:"currentColor",d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"}},checksSvg:{type:"polyline",data:{points:"1 1 5 5 9 1"}},groupDownloadBtnSvg:[{type:"path",data:{fill:"currentColor",d:"M18.948 11.112C18.511 7.67 15.563 5 12.004 5c-2.756 0-5.15 1.611-6.243 4.15-2.148.642-3.757 2.67-3.757 4.85 0 2.757 2.243 5 5 5h1v-2h-1c-1.654 0-3-1.346-3-3 0-1.404 1.199-2.757 2.673-3.016l.581-.102.192-.558C8.153 8.273 9.898 7 12.004 7c2.757 0 5 2.243 5 5v1h1c1.103 0 2 .897 2 2s-.897 2-2 2h-2v2h2c2.206 0 4-1.794 4-4a4.008 4.008 0 0 0-3.056-3.888z"}},{type:"path",data:{fill:"currentColor",d:"M13.004 14v-4h-2v4h-3l4 5 4-5z"}}],wayFuSvg:[{type:"path",data:{class:"fill0",d:"M84 3c1,0 2,1 3,1 7,3 13,8 19,13 5,5 10,12 13,19 3,7 4,15 4,23 0,6 0,11 -2,16 -1,5 -3,10 -5,14l8 31 -32 -8c-4,3 -9,4 -14,6 -4,1 -9,1 -14,1l0 0c-6,0 -11,0 -16,-2l2 -5c1,1 2,1 3,1 3,1 7,1 11,1 2,0 4,0 6,0 3,-1 5,-1 7,-2 2,0 4,-1 7,-2 2,-1 4,-1 6,-3l1 -1 3 1 22 6 -6 -22 0 -2 1 -2c1,-2 2,-4 3,-7 1,-2 2,-4 2,-6 1,-3 1,-5 2,-7 0,-3 0,-5 0,-8 0,-3 0,-7 -1,-11 -1,-3 -2,-6 -3,-10l0 0c-2,-3 -3,-6 -5,-9 -2,-3 -4,-6 -7,-8 -2,-3 -5,-5 -8,-7 -3,-2 -6,-3 -9,-5l0 0c-1,0 -1,0 -1,0l0 -6zm-29 68c-1,-2 -3,-3 -4,-5 -3,-3 -6,-6 -9,-10 -17,-20 4,-40 20,-51 -6,1 -12,2 -19,5 -13,4 -25,14 -30,30 -1,1 -1,1 -1,2 -4,16 -3,29 2,39 5,13 15,22 22,26l19 -36zm7 -1c-5,-5 -10,-10 -16,-17 -20,-25 33,-51 33,-51 -15,-5 -61,-1 -72,38 -13,45 20,70 31,74l24 -44z"}},{type:"path",data:{class:"fill1",d:"M93 126l-1 0c0,0 0,0 0,1 -5,1 -9,1 -14,1l0 0c-5,0 -10,-1 -15,-2l1 0 0 0c5,0 10,0 14,-2 5,-1 10,-3 14,-5l12 3c-3,2 -7,3 -11,4l0 0zm-14 -116l0 -4c0,0 -2,1 -6,3 -11,7 -34,22 -31,38 2,-19 37,-37 37,-37z"}},{type:"path",data:{class:"fill2",fillRule:"nonzero",d:"M62 84l0 -8 -24 44c-9,-2 -32,-19 -34,-50 -2,35 25,55 34,58l24 -44z"}}]},r=[{element:"#wayfuPanel .menus",type:"click",event:"tabMenu"},{element:"#wayfuPanel textarea",type:"input",event:"updateText"},{element:"#_mode",type:"click",event:"textPreview"},{element:"#useImage",type:"click",event:"useImage"},{element:"#getFile",type:"change",event:"loadData"},{element:"#imgFile",type:"change",event:"imagePreview"},{element:"#_deleteImg",type:"click",event:"imagePreview"},{element:"#wayfuToggle",type:"click",event:"toggleApp"},{element:"._input input[type='range']",type:"input",event:"inputRange"},{element:"._input input[type='checkbox']",type:"change",event:"inputChecks"},{element:"._input select",type:"change",event:"inputSelects"},{element:"#_blast",type:"click",event:"runTasks"},{element:"div#app",type:"click",event:"checkChat"}],s={year:"numeric",month:"long",day:"numeric"},i=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"ComposeBox",conditions:e=>e.ComposeBoxActions?e.ComposeBoxActions:null},{id:"OpaqueData",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.formData?e.default:null},{id:"MediaPrep",conditions:e=>e.prepRawMedia?e:null},{id:"WebClasses",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chat&&e.default.active?e.default:null},{id:"WebClasses2",conditions:e=>e.default&&"object"==typeof e.default&&e.default.item&&!e.default.action?e.default:null},{id:"WebClasses3",conditions:e=>e.default&&"object"==typeof e.default&&e.default.chatHeader?e.default:null},{id:"WebClasses4",conditions:e=>e.default&&"object"==typeof e.default&&e.default.sendButtonContainer?e.default:null},{id:"WebClasses5",conditions:e=>e.default&&"object"==typeof e.default&&e.default.app&&e.default.paneOne?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments?e.default:null},{id:"Debug",conditions:e=>e.Debug?e.Debug:null},{id:"WapQuery",conditions:e=>e.queryExist?e:e.default&&e.default.queryExist?e.default:null},{id:"Cmd",conditions:e=>e.Cmd?e.Cmd:null}],o=e=>"string"==typeof e?!isNaN(e)&&!isNaN(parseFloat(e)):"number"==typeof e,l=e=>new Promise((t=>{try{t(JSON.parse(e))}catch(e){t(null)}})),c=e=>{var n;return"string"==typeof e&&(e=o(e)?Number(e):"string"!=typeof(n=e)||"Invalid Date"===new Date(n).toString()||isNaN(new Date(n))?e:new t(e)),e},u=(e,t=!1)=>{let n=[];return e.split(" ").forEach((e=>{n.push(h(e))})),t?n.join(" "):n[0]},h=e=>(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1),p=(e,t=!0)=>new Date(e).toLocaleDateString("id-ID",Object.assign({},s,{weekday:t?"long":void 0}));class m{setProperties(e,t=!0){e=this.intoObject(e,t);for(let t in e)this.hasOwnProperty(t)&&(this[t]=e[t]);return this}serialize(e){if("object"==typeof e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURI(e[n]));return t.join("&")}return e.toString?e.toString():e}intoObject(e,t=!0){let n={};if(!e)return n;if("string"==typeof e?n=JSON.parse(e):Array.isArray(e)?e.forEach(((e,t)=>n[t]=e)):"object"==typeof e&&(n=e),0!==Object.keys(n).length)for(const e in n)n[e]=t?c(n[e]):n[e];return n}findObjectValue(e,t,n=2){if(!n)return null;let a=(t=t||this)[e];if(a)return a;n-=1;for(let r of Object.keys(t))t[r]&&"object"==typeof t[r]&&(a=this.findObjectValue(e,t[r],n));return a}}class d extends m{constructor(){super()}get appInfo(){return this.getInfo("script")}get managerName(){return"object"!=typeof GM_info?"function"==typeof GM_getMetadata?"Scriptish":"undefined"!=typeof GM_setValue&&"undefined"==typeof GM_getResourceText&&"undefined"==typeof GM_getResourceURL&&"undefined"==typeof GM_openInTab&&"undefined"==typeof GM_setClipboard?"NinjaKit":"Native":void 0!==GM_info.uuid?"Greasemonkey":void 0!==GM_info.scriptHandler?"Tampermonkey":void 0}getInfo(e=""){return GM_info?""===e?GM_info:this.findObjectValue(e,GM_info):null}getResource(e,t="text"){return"undefined"!=typeof GM_getResourceText&&"text"===t?GM_getResourceText(e):"undefined"!=typeof GM_getResourceURL&&"url"===t?GM_getResourceURL(e):void 0}deleteValue(e){if("undefined"!=typeof GM_deleteValue){const t=GM_listValues();for(const n of t)e&&e===n&&GM_deleteValue(n)}}setValue(e,t){"undefined"!=typeof GM_setValue&&GM_setValue(e,t)}getValue(e,t=null){if("undefined"!=typeof GM_listValues&&"undefined"!=typeof GM_getValue){const n=GM_listValues();if(0!==n.length&&n.some((t=>e===t)))return GM_getValue(e,t)}return t}request(e){e.url=e.url||this.appInfo.homepage,e.method=e.method||"GET",e.headers=e.headers||{},e.timeout=e.timeout||2e4,(e.data||"POST"==e.method)&&(e.method="POST",e.data=this.serialize(e.data||{}),e.headers=Object.assign({},e.headers,{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded"}));const t=e.onload,n=e.onerror,a=e.ontimeout,r=e.onabort;e.onload=function(e){t(e)},e.onerror=function(e){console.log(`request error: ${e.error||"unknown error"}`),n(e)},e.ontimeout=function(e){console.log(`request error: ${e.error||"timed out"}`),a(e)},e.onabort=function(e){console.log(`request error: ${e.error||"aborted"}`),r(e)},"undefined"!=typeof GM_xmlhttpRequest?GM_xmlhttpRequest(e):console.log("XHR not Allowed!")}}const f=new class{constructor(){this.contens=0,this.element=e.createElement({tag:"div",id:"wayfu-modal",classid:"wfu-modal",role:"alert"})}construct(t,n="",a=!1){return new Promise((r=>{let s=`wfu-content-${this.contens+=1}`,i=e.createElement({tag:"div",classid:"wfu-modal-container",id:s});if(n&&e.createElement({tag:"h2",text:n,append:i}),t&&(t instanceof window.HTMLElement?e.insertElement(t,i):"string"==typeof t?e.createElement({tag:"p",html:t,append:i}):"object"==typeof t&&e.createElement(Object.assign({tag:"p",append:i},t))),a){let t=e.createElement({tag:"ul",classid:"wfu-buttons",append:i}),n=[{tag:"a",classid:"wfu-btn-ok",text:"Ya",event:{click:e=>{this.closed(e),r(!0)}}},{tag:"a",classid:"wfu-modal-close",text:"Tidak",event:{click:e=>{this.closed(e),r(!1)}}}];for(let a of n){let n=e.createElement({tag:"li",append:t});e.createElement(Object.assign({},a,{append:n}))}}else e.createElement({tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace wfu-modal-close",append:i,event:{click:this.closed}});e.onEvent(window,"click",this.closed).insertElement(i,this.element),this.show()}))}async alert(e,t=""){return await this.construct(e,t)}async confirm(e,t=""){return await this.construct(e,t,!0)}progressPanel(t,n=null){if(t){let t=`wfu-content-${this.contens+=1}`,a=e.createElement({tag:"div",classid:"wfu-modal-container progress-panel",id:t}),r=[{tag:"h2",text:"Pesanmu sedang dikirim"},{tag:"div",html:"<div class='waBar'></div>",classid:"waProgress"},{tag:"p",html:"Mengirim pesan ke <span class='curPhone'></span> (<span class='curNumb'></span>)"},{tag:"a",href:"#",html:"&times;",classid:"wfu-btn-close img-replace",event:{click:n}}];a=e.createElements(r,a),e.insertElement(a,"#wayfu-modal"),this.show()}else{let t=e.getElement(".wfu-modal-container.progress-panel"),n=e.getElement(".wfu-modal-container",!0),a=e.getElement("#wayfu-modal");t&&e.removeElement(t,a),a&&0===n.length&&a.classList.remove("is-visible")}}show(){e.getElement("#wayfu-modal")||e.insertElement(this.element),e.getElement("#wayfu-modal").classList.add("is-visible")}closed(t){const n=t.target,a=e.getElement("#wayfu-modal"),r=e.getParents(n,".wfu-modal-container"),s=n.classList.contains("wfu-btn-ok");if(a&&(s||n.classList.contains("wfu-modal-close"))){0!==r.length&&e.removeElement(r[0],a);const t=e.getElement(".wfu-modal-container",!0);a&&0===t.length&&a.classList.remove("is-visible")}}};class g extends Array{get isEmpty(){return this.length<=0}get nonEmptyValue(){return this.filter((e=>!!e))}changeIndex(e,t){if(t>=this.length){let e=t-this.length+1;for(;e--;)this.push(void 0)}return this.splice(t,0,this.splice(e,1)[0]),this}countValue(e){let t=0;return this.forEach((n=>{t+=n===e?1:0})),t}isOnArray(e){return this.some((t=>e===t))}static split(e,t){let n=e.split(t);return new g(...n)}static create(e){return new g(...Array.from((t=e,Array.isArray(t)||"function"==typeof t[Symbol.iterator]?t:Object.keys(t))));var t}}class w extends d{constructor(){super(),this.default={themeColor:"var(--butterbar-connection-background)",debug:!1,hasAttc:!1,msgAttc:{file:null,type:"",sendAsHD:!1},useAttc:!1,activeTab:0,targetBp:100,maxQueue:500,dateFormat:"auto",openPanel:!0,useCaption:"caption",userType:"umum",splitter:",",monthIndex:0,isFormat:!1,alert:!0,queueLimit:1e3,bpLimit:500,exportType:"csv",fileType:"csv",imageQuality:"standard"}}init(){const e=this.getValue("wayfu-options"),t=Object.assign({},this.default,this.intoObject(e));return Object.assign(w.prototype,this.default),this.setOptions(t).colorList()}setOptions(e){if(e&&0!==Object.keys(e)){e=this.intoObject(e);for(let t in e)this.setOption(t,e[t])}return this}setOption(e,t){return t=c(t),(this.hasOwnProperty(e)||this.default.hasOwnProperty(e))&&(this[e]=t),this.fillList().save()}fillList(){return Object.entries(this).forEach((t=>{const[n,a]=t,r=e.getElement(`#${n}`);r&&("checkbox"==r.type?r.checked=a:r.value=a)})),e.getElement("._input input[type='range']",!0).forEach((t=>{e.setElements([{elm:t,props:{max:"maxQueue"==t.id?this.queueLimit:this.bpLimit,step:"maxQueue"==t.id?t.step:1}},{elm:e.getElement("output",t.parentElement),props:{text:t.value}}])})),"oriflame"===this.userType&&e.setElementStyle(".panel-options .oriflame",{display:"flex"}),this}colorList(){let t=this.getResource("clr");return t="string"==typeof t?JSON.parse(t):t,t=Array.isArray(t)?t:t.colors,t.forEach((t=>{let n={tag:"option",value:t.key,text:t.val,append:"select#themeColor"};e.createElement(n)})),this}save(){const e=new g("useImage","hasImage","imageFile","fileName","alert","bpLimit","queueLimit","debug","default"),t={};for(let n in this)this.default.hasOwnProperty(n)&&!e.isOnArray(n)&&(t[n]=this[n]);this.setValue("wayfu-options",t)}}const y=new w,v=new class extends d{constructor(){super(),this.today=new t,this.defaultOpt={method:"POST",url:`${this.appInfo.homepage}user/api`,headers:{"Content-Type":"application/json"}}}get isPremium(){return!!this.end&&this.today<this.end}get isTrial(){return!!this.expires&&this.attempt<5&&this.today<=this.expires}init(){const{id:e,name:t,pushname:n}=window.WAPI.Contact.getMeContact();return this.phone=Number(e.user)||"",this.name=t||n||"",this}gettingData(){return new Promise((e=>{let t=Object.assign({},this.defaultOpt,{data:JSON.stringify({phone:this.phone,version:this.appInfo.version}),onload:async t=>{const{status:n,responseText:a}=t;let r=null;200===n&&(r=await l(a)),v.setUser(r),e(200===n&&r)},onerror:e=>v.setUser(null),ontimeout:e=>v.setUser(null),onabort:e=>v.setUser(null)});this.request(t)}))}updateData(e){if(!e)return this;if((e=this.intoObject(e)).phone!==this.phone)return this;for(const t in e)"today"!==t&&(this[t]=e[t]);return this.end=this.reg&&this.mon?new t(this.reg).addMonths(this.mon):this.end||null,this}setUser(e){const t=e||this.getValue("wayfu-user");t&&null!=t&&""!==t&&(this.reset().updateData(t).save(),y.setOption("userType",this.type)),this.isPremium||this.isTrial?this.showAlert(this.isPremium?0:1):setTimeout((()=>{this.gettingData()}),2e4)}async check(){let e=this.isPremium||await this.tryApp();return e||this.showAlert(2,!0),e}async tryApp(){return this.expires||this.isTrial?this.isTrial:!!await f.confirm("Coba WayFu Gratis!","Apakah Anda mau mencoba 2 hari Trial?")&&await this.updateTrial()}updateTrial(e="add"){const n={version:this.appInfo.version,phone:this.phone,name:this.name,action:e},a=(e=>{let n=new t(this.today).addDays(2).toLocaleString("id-ID"),a=this.attempt+=1;return"add"===e?{expires:n}:{attempt:a}})(e);return new Promise(((e,t)=>{let r=Object.assign({},this.defaultOpt,{data:JSON.stringify(Object.assign({},n,a)),onload:async t=>{const{status:n,responseText:a}=t;let r=null;200===n&&(r=await l(a)),v.setUser(r),e(200===n&&r)},onerror:t=>e(!1),ontimeout:t=>e(!1),onabort:t=>e(!1)});this.request(r)}))}showAlert(e,t=!1){const n=[{title:`Halo kak ${u(this.name,!0)}!`,text:`Selamat menggunakan fitur Pengguna Premium.\n\n                Masa aktif Kakak berakhir hari ${p(this.end)} ya...`},{title:`Halo! Selamat Datang di ${this.appInfo.name}!`,text:`Anda dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi,\n                Masa Trial Anda berakhir hari ${p(this.expires)} ya...`},{title:`${this.appInfo.name} - Fitur Premium`,text:"Maaf, fitur ini hanya untuk Pengguna Premium. Informasi lebih lanjut, silahkan hubungi saya."},{title:`${this.appInfo.name} - Trial Mode`,text:`Saat ini Anda sedang menggunakan versi Trial. Anda masih dapat menggunakan fitur kirim otomatis sebanyak ${5-this.attempt} kali lagi.`},{title:`${this.appInfo.name} - Trial Mode`,text:"Masa Trial Anda sudah berakhir. Silahkan berlanganan untuk menggunakan fitur premium."}],{title:a,text:r}=n[e];let s=y.alert||t?(f.alert(r,a),!1):y.alert;y.setOption("alert",s)}reset(){const e=new g("attempt","type","reg","mon","end","expires");for(let t in this)this.hasOwnProperty(t)&&e.isOnArray(t)&&delete this[t];return this.init()}save(){const e=new g("name","phone","attempt","type","reg","mon","end","expires"),t={};for(let a in this)this.hasOwnProperty(a)&&e.isOnArray(a)&&(t[a]=(n=this[a])instanceof Date?n.toISOString():n);var n;this.setValue("wayfu-user",t)}},b=new class extends m{constructor(){super(),this.apiLink="api.whatsapp.com/send?phone=",this.inputMessage="",this.inputCaption="",this.msgAttc={file:null,type:"",sendAsHD:!1},this.idNumber="",this.name="",this.phone="",this.poinValue="",this.date="",this.sponsorName="",this.other=[]}setData(e){var t;return[this.idNumber,this.name,this.phone,this.poinValue,this.date,this.sponsorName,...this.other]=(t=e[2],n.phonePattern.test(t)?e:["",...e]),this}get value(){return this.inputMessage?this.subtitute(this.inputMessage):""}get encodedMsg(){const{useImage:e,hasImage:t,useCaption:n}=y,a=!e||!t||"caption"===n,r=this.inputMessage&&a?this.subtitute(this.inputMessage):"";return""!==r?encodeURIComponent(r).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"):r}get link(){return this.apiLink+this.phone+`&text=${this.encodedMsg}`}setMessage(e,t,a){const r=e=>new RegExp(String.raw`(DATA_${e})(\s|\D|$)`,"g");if("oriflame"===y.userType){for(let r=t;r<3;r++){const t=n.datePattern.test(a),s=o(a);if(0===r&&s){const t=e=>{const t=y.targetBp-Number(e);return t>0?t:0};e=e.replace(/P_BP/g,`${a} BP`).replace(/K_BP/g,`${t(a)} BP`)}else 1===r&&t?e=e.replace(/L_DAY/g,this.lastDay(a)).replace(/S_DAY/g,this.lastDay(a,!1)):2!==r||s||t||(e=e.replace(/F_INVS/g,u(a,!0)).replace(/INVS/g,u(a)))}return t>2?e.replace(r(t-2),`${a||""}$2`):e}return e.replace(r(t+1),`${a||""}$2`)}subtitute(e){if(""!==e&&null!==e){const t=[this.poinValue,this.date,this.sponsorName,...this.other],n="oriflame"===y.userType?3:0;e=(e=e.replace(/F_NAMA/g,u(this.name,!0)).replace(/NAMA/g,u(this.name))).replace(/PHONE/g,this.phone),e=""!==this.idNumber?e.replace("oriflame"===y.userType?/NO_KONS/g:/DATA_0/g,this.idNumber):e,t.forEach(((t,a)=>{e=t||a>=n?this.setMessage(e,a,t):e}))}return e}lastDay(e,n=!0){const a=y.monthIndex,r=y.default.monthIndex;let s=new t(y.isFormat||r===a?e:g.split(e,"/").changeIndex(a,r).join("/"));return s=n?s.addDays(30):s,p(s,n)}async sendImg(){const{useCaption:e}=y,t="PDF"!==this.msgAttc.type?"caption"===e?this.inputCaption:this.inputMessage:this.inputCaption;return this.msgAttc.sendAsHD="hd"==y.imageQuality,await window.WAPI.SendImgToChat(this.phone,this.msgAttc,this.subtitute(t))}async sendText(){return await window.WAPI.composeAndSendMsgToChat(this.phone,this.value)}},E=new class extends m{constructor(){super(),this.room=null,this.classId={active:"",header:""}}get isGroup(){return!!this.selected&&this.room.id.isGroup()}get groupMetadata(){return this.selected&&this.isGroup?this.room.groupMetadata:null}get contact(){return this.room?this.room.contact:null}get selected(){return!!this.room}init(){const{active:e}=window.WAPI.WebClasses,{chatHeader:t}=window.WAPI.WebClassesV2;return this.classId={active:e,header:t},this}selectChat(){return this.room=window.WAPI.Chat.getActive(),this}};var x=Uint8Array,k=Uint16Array,A=Int32Array,C=new x([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S=new x([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M=new x([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=function(e,t){for(var n=new k(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];var r=new A(n[30]);for(a=1;a<30;++a)for(var s=n[a];s<n[a+1];++s)r[s]=s-n[a]<<5|a;return{b:n,r}},T=O(C,2),P=T.b,$=T.r;P[28]=258,$[258]=28;for(var _=O(S,0),I=_.b,L=_.r,D=new k(32768),j=0;j<32768;++j){var N=(43690&j)>>1|(21845&j)<<1;N=(61680&(N=(52428&N)>>2|(13107&N)<<2))>>4|(3855&N)<<4,D[j]=((65280&N)>>8|(255&N)<<8)>>1}var R=function(e,t,n){for(var a=e.length,r=0,s=new k(t);r<a;++r)e[r]&&++s[e[r]-1];var i,o=new k(t);for(r=1;r<t;++r)o[r]=o[r-1]+s[r-1]<<1;if(n){i=new k(1<<t);var l=15-t;for(r=0;r<a;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],h=o[e[r]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)i[D[h]>>l]=c}else for(i=new k(a),r=0;r<a;++r)e[r]&&(i[r]=D[o[e[r]-1]++]>>15-e[r]);return i},F=new x(288);for(j=0;j<144;++j)F[j]=8;for(j=144;j<256;++j)F[j]=9;for(j=256;j<280;++j)F[j]=7;for(j=280;j<288;++j)F[j]=8;var V=new x(32);for(j=0;j<32;++j)V[j]=5;var W=R(F,9,0),U=R(F,9,1),G=R(V,5,0),q=R(V,5,1),z=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},B=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(7&t)&n},H=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},X=function(e){return(e+7)/8|0},Z=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new x(e.subarray(t,n))},Q=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],K=function(e,t,n){var a=new Error(t||Q[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,K),!n)throw a;return a},J=function(e,t,n,a){var r=e.length,s=a?a.length:0;if(!r||t.f&&!t.l)return n||new x(0);var i=!n,o=i||2!=t.i,l=t.i;i&&(n=new x(3*r));var c=function(e){var t=n.length;if(e>t){var a=new x(Math.max(2*t,e));a.set(n),n=a}},u=t.f||0,h=t.p||0,p=t.b||0,m=t.l,d=t.d,f=t.m,g=t.n,w=8*r;do{if(!m){u=B(e,h,1);var y=B(e,h+1,3);if(h+=3,!y){var v=e[(j=X(h)+4)-4]|e[j-3]<<8,b=j+v;if(b>r){l&&K(0);break}o&&c(p+v),n.set(e.subarray(j,b),p),t.b=p+=v,t.p=h=8*b,t.f=u;continue}if(1==y)m=U,d=q,f=9,g=5;else if(2==y){var E=B(e,h,31)+257,k=B(e,h+10,15)+4,A=E+B(e,h+5,31)+1;h+=14;for(var O=new x(A),T=new x(19),$=0;$<k;++$)T[M[$]]=B(e,h+3*$,7);h+=3*k;var _=z(T),L=(1<<_)-1,D=R(T,_,1);for($=0;$<A;){var j,N=D[B(e,h,L)];if(h+=15&N,(j=N>>4)<16)O[$++]=j;else{var F=0,V=0;for(16==j?(V=3+B(e,h,3),h+=2,F=O[$-1]):17==j?(V=3+B(e,h,7),h+=3):18==j&&(V=11+B(e,h,127),h+=7);V--;)O[$++]=F}}var W=O.subarray(0,E),G=O.subarray(E);f=z(W),g=z(G),m=R(W,f,1),d=R(G,g,1)}else K(1);if(h>w){l&&K(0);break}}o&&c(p+131072);for(var Q=(1<<f)-1,J=(1<<g)-1,Y=h;;Y=h){var ee=(F=m[H(e,h)&Q])>>4;if((h+=15&F)>w){l&&K(0);break}if(F||K(2),ee<256)n[p++]=ee;else{if(256==ee){Y=h,m=null;break}var te=ee-254;if(ee>264){var ne=C[$=ee-257];te=B(e,h,(1<<ne)-1)+P[$],h+=ne}var ae=d[H(e,h)&J],re=ae>>4;if(ae||K(3),h+=15&ae,G=I[re],re>3&&(ne=S[re],G+=H(e,h)&(1<<ne)-1,h+=ne),h>w){l&&K(0);break}o&&c(p+131072);var se=p+te;if(p<G){var ie=s-G,oe=Math.min(G,se);for(ie+p<0&&K(3);p<oe;++p)n[p]=a[ie+p]}for(;p<se;++p)n[p]=n[p-G]}}t.l=m,t.p=Y,t.b=p,t.f=u,m&&(u=1,t.m=f,t.d=d,t.n=g)}while(!u);return p!=n.length&&i?Z(n,0,p):n.subarray(0,p)},Y=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8},ee=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},te=function(e,t){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var r=n.length,s=n.slice();if(!r)return{t:le,l:0};if(1==r){var i=new x(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var p=s[0].s;for(a=1;a<r;++a)s[a].s>p&&(p=s[a].s);var m=new k(p+1),d=ne(n[u-1],m,0);if(d>t){a=0;var f=0,g=d-t,w=1<<g;for(s.sort((function(e,t){return m[t.s]-m[e.s]||e.f-t.f}));a<r;++a){var y=s[a].s;if(!(m[y]>t))break;f+=w-(1<<d-m[y]),m[y]=t}for(f>>=g;f>0;){var v=s[a].s;m[v]<t?f-=1<<t-m[v]++-1:++a}for(;a>=0&&f;--a){var b=s[a].s;m[b]==t&&(--m[b],++f)}d=t}return{t:new x(m),l:d}},ne=function(e,t,n){return-1==e.s?Math.max(ne(e.l,t,n+1),ne(e.r,t,n+1)):t[e.s]=n},ae=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new k(++t),a=0,r=e[0],s=1,i=function(e){n[a++]=e},o=1;o<=t;++o)if(e[o]==r&&o!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(r),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(r);s=1,r=e[o]}return{c:n.subarray(0,a),n:t}},re=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[a]*t[a];return n},se=function(e,t,n){var a=n.length,r=X(t+2);e[r]=255&a,e[r+1]=a>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var s=0;s<a;++s)e[r+s+4]=n[s];return 8*(r+4+a)},ie=function(e,t,n,a,r,s,i,o,l,c,u){Y(t,u++,n),++r[256];for(var h=te(r,15),p=h.t,m=h.l,d=te(s,15),f=d.t,g=d.l,w=ae(p),y=w.c,v=w.n,b=ae(f),E=b.c,x=b.n,A=new k(19),O=0;O<y.length;++O)++A[31&y[O]];for(O=0;O<E.length;++O)++A[31&E[O]];for(var T=te(A,7),P=T.t,$=T.l,_=19;_>4&&!P[M[_-1]];--_);var I,L,D,j,N=c+5<<3,U=re(r,F)+re(s,V)+i,q=re(r,p)+re(s,f)+i+14+3*_+re(A,P)+2*A[16]+3*A[17]+7*A[18];if(l>=0&&N<=U&&N<=q)return se(t,u,e.subarray(l,l+c));if(Y(t,u,1+(q<U)),u+=2,q<U){I=R(p,m,0),L=p,D=R(f,g,0),j=f;var z=R(P,$,0);for(Y(t,u,v-257),Y(t,u+5,x-1),Y(t,u+10,_-4),u+=14,O=0;O<_;++O)Y(t,u+3*O,P[M[O]]);u+=3*_;for(var B=[y,E],H=0;H<2;++H){var X=B[H];for(O=0;O<X.length;++O){var Z=31&X[O];Y(t,u,z[Z]),u+=P[Z],Z>15&&(Y(t,u,X[O]>>5&127),u+=X[O]>>12)}}}else I=W,L=F,D=G,j=V;for(O=0;O<o;++O){var Q=a[O];if(Q>255){ee(t,u,I[257+(Z=Q>>18&31)]),u+=L[Z+257],Z>7&&(Y(t,u,Q>>23&31),u+=C[Z]);var K=31&Q;ee(t,u,D[K]),u+=j[K],K>3&&(ee(t,u,Q>>5&8191),u+=S[K])}else ee(t,u,I[Q]),u+=L[Q]}return ee(t,u,I[256]),u+L[256]},oe=new A([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),le=new x(0),ce=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,a=9;--a;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),ue=function(){var e=-1;return{p:function(t){for(var n=e,a=0;a<t.length;++a)n=ce[255&n^t[a]]^n>>>8;e=n},d:function(){return~e}}},he=function(e,t,n,a,r){if(!r&&(r={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new x(s.length+e.length);i.set(s),i.set(e,s.length),e=i,r.w=s.length}return function(e,t,n,a,r,s){var i=s.z||e.length,o=new x(a+i+5*(1+Math.ceil(i/7e3))+r),l=o.subarray(a,o.length-r),c=s.l,u=7&(s.r||0);if(t){u&&(l[0]=s.r>>3);for(var h=oe[t-1],p=h>>13,m=8191&h,d=(1<<n)-1,f=s.p||new k(32768),g=s.h||new k(d+1),w=Math.ceil(n/3),y=2*w,v=function(t){return(e[t]^e[t+1]<<w^e[t+2]<<y)&d},b=new A(25e3),E=new k(288),M=new k(32),O=0,T=0,P=s.i||0,_=0,I=s.w||0,D=0;P+2<i;++P){var j=v(P),N=32767&P,R=g[j];if(f[N]=R,g[j]=N,I<=P){var F=i-P;if((O>7e3||_>24576)&&(F>423||!c)){u=ie(e,l,0,b,E,M,T,_,D,P-D,u),_=O=T=0,D=P;for(var V=0;V<286;++V)E[V]=0;for(V=0;V<30;++V)M[V]=0}var W=2,U=0,G=m,q=N-R&32767;if(F>2&&j==v(P-q))for(var z=Math.min(p,F)-1,B=Math.min(32767,P),H=Math.min(258,F);q<=B&&--G&&N!=R;){if(e[P+W]==e[P+W-q]){for(var Q=0;Q<H&&e[P+Q]==e[P+Q-q];++Q);if(Q>W){if(W=Q,U=q,Q>z)break;var K=Math.min(q,Q-2),J=0;for(V=0;V<K;++V){var Y=P-q+V&32767,ee=Y-f[Y]&32767;ee>J&&(J=ee,R=Y)}}}q+=(N=R)-(R=f[N])&32767}if(U){b[_++]=268435456|$[W]<<18|L[U];var te=31&$[W],ne=31&L[U];T+=C[te]+S[ne],++E[257+te],++M[ne],I=P+W,++O}else b[_++]=e[P],++E[e[P]]}}for(P=Math.max(P,I);P<i;++P)b[_++]=e[P],++E[e[P]];u=ie(e,l,c,b,E,M,T,_,D,P-D,u),c||(s.r=7&u|l[u/8|0]<<3,u-=7,s.h=g,s.p=f,s.i=P,s.w=I)}else{for(P=s.w||0;P<i+c;P+=65535){var ae=P+65535;ae>=i&&(l[u/8|0]=c,ae=i),u=se(l,u+1,e.subarray(P,ae))}s.i=i}return Z(o,0,a+X(u)+r)}(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,a,r)},pe=function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n},me=function(e,t){return e[t]|e[t+1]<<8},de=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},fe=function(e,t){return de(e,t)+4294967296*de(e,t+4)},ge=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function we(e,t){return he(e,t||{},0,0)}function ye(e,t){return J(e,{i:2},t&&t.out,t&&t.dictionary)}var ve=function(e,t,n,a){for(var r in e){var s=e[r],i=t+r,o=a;Array.isArray(s)&&(o=pe(a,s[1]),s=s[0]),s instanceof x?n[i]=[s,o]:(n[i+="/"]=[new x(0),o],ve(s,i,n,a))}},be="undefined"!=typeof TextEncoder&&new TextEncoder,Ee="undefined"!=typeof TextDecoder&&new TextDecoder;try{Ee.decode(le,{stream:!0})}catch(e){}var xe=function(e){for(var t="",n=0;;){var a=e[n++],r=(a>127)+(a>223)+(a>239);if(n+r>e.length)return{s:t,r:Z(e,n-1)};r?3==r?(a=((15&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a)):t+=1&r?String.fromCharCode((31&a)<<6|63&e[n++]):String.fromCharCode((15&a)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(a)}};function ke(e,t){if(t){for(var n=new x(e.length),a=0;a<e.length;++a)n[a]=e.charCodeAt(a);return n}if(be)return be.encode(e);var r=e.length,s=new x(e.length+(e.length>>1)),i=0,o=function(e){s[i++]=e};for(a=0;a<r;++a){if(i+5>s.length){var l=new x(i+8+(r-a<<1));l.set(s),s=l}var c=e.charCodeAt(a);c<128||t?o(c):c<2048?(o(192|c>>6),o(128|63&c)):c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++a))>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|63&c)):(o(224|c>>12),o(128|c>>6&63),o(128|63&c))}return Z(s,0,i)}function Ae(e,t){if(t){for(var n="",a=0;a<e.length;a+=16384)n+=String.fromCharCode.apply(null,e.subarray(a,a+16384));return n}if(Ee)return Ee.decode(e);var r=xe(e),s=r.s;return(n=r.r).length&&K(8),s}var Ce=function(e,t){return t+30+me(e,t+26)+me(e,t+28)},Se=function(e,t,n){var a=me(e,t+28),r=Ae(e.subarray(t+46,t+46+a),!(2048&me(e,t+8))),s=t+46+a,i=de(e,t+20),o=n&&4294967295==i?Me(e,s):[i,de(e,t+24),de(e,t+42)],l=o[0],c=o[1],u=o[2];return[me(e,t+10),l,c,r,s+me(e,t+30)+me(e,t+32),u]},Me=function(e,t){for(;1!=me(e,t);t+=4+me(e,t+2));return[fe(e,t+12),fe(e,t+4),fe(e,t+20)]},Oe=function(e){var t=0;if(e)for(var n in e){var a=e[n].length;a>65535&&K(9),t+=a+4}return t},Te=function(e,t,n,a,r,s,i,o){var l=a.length,c=n.extra,u=o&&o.length,h=Oe(c);ge(e,t,null!=i?33639248:67324752),t+=4,null!=i&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(s<0&&8),e[t++]=r&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var p=new Date(null==n.mtime?Date.now():n.mtime),m=p.getFullYear()-1980;if((m<0||m>119)&&K(10),ge(e,t,m<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>1),t+=4,-1!=s&&(ge(e,t,n.crc),ge(e,t+4,s<0?-s-2:s),ge(e,t+8,n.size)),ge(e,t+12,l),ge(e,t+14,h),t+=16,null!=i&&(ge(e,t,u),ge(e,t+6,n.attrs),ge(e,t+10,i),t+=14),e.set(a,t),t+=l,h)for(var d in c){var f=c[d],g=f.length;ge(e,t,+d),ge(e,t+2,g),e.set(f,t+4),t+=4+g}return u&&(e.set(o,t),t+=u),t};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const Pe=/.+\:/,$e=(e,t,n=!1)=>{let a=new g;for(let n of e.childNodes)1===n.nodeType&&_e(n)===t&&a.push(n);return n?a:a.shift()},_e=e=>e.tagName.replace(Pe,""),Ie=(e,t)=>{if(Array.isArray(t))t.forEach((t=>{Ie(e,t)}));else{let{name:n,value:a}=t;void 0!==n&&void 0!==a&&e.setAttribute(n,a)}return e},Le=e=>{if(1!==e.nodeType)return e.textContent;const{attributes:t,childNodes:n}=e,a=t.map((e=>`${e.name}="${e.value}"`)).join(" "),r=_e(e);let s="";return n.forEach((e=>s+=Le(e))),`<${r} ${a}>${s}</${r}>`};function De(e,t,n){let a=0;for(let r of e.childNodes)t?1===r.nodeType&&_e(r)===t&&n(r,a):n(r,a),a++}function je(e){const[t,n]=[new DOMParser,new XMLSerializer],a=document.implementation.createDocument(null,"",null),r=(e=>{if(!e)return null;let{tag:t,attributes:n}="string"==typeof(r=e)?{tag:r,attributes:null}:r;var r;let s=a.createElement(t.trim());return n&&void 0!==n?Ie(s,n):s})(e);return r&&a.appendChild(r),(e=>{const a=`<?xml version="1.0" encoding="utf-8" standalone="yes"?>\n${n.serializeToString(e)}`;return t.parseFromString(a,"application/xml")})(a)}function Ne(e,t){let{tag:n,attributes:a,value:r}="string"==typeof(s=e)?{tag:s,attributes:null,value:null}:s;var s;let i=t.createElement(n.trim());return r&&(i.textContent=`${r}`),a&&void 0!==a?Ie(i,a):i}function Re(e,t,n=null){let a=n?n instanceof Element?n:e.getElementsByTagName(n)[0]:e.childNodes[0];if(Array.isArray(t))t.forEach((t=>{Re(e,t,a)}));else{let n=(r=t)instanceof Element?r:Ne(t,e);a.appendChild(n)}var r;return e}class Fe{constructor(){}static getCells(e){let t=$e(e.documentElement,"sheetData"),n=new g;return De(t,"row",(e=>{De(e,"c",(e=>{n.push(e)}))})),n}static getMergedCells(e){let t=$e(e.documentElement,"mergeCells"),n=new g;return t&&De(t,"mergeCell",(function(e){n.push(e.getAttribute("ref"))})),n}static getCellValue(e){return $e(e,"v")}static getCellInlineStringValue(e){if(e.firstChild&&"is"===_e(e.firstChild)&&e.firstChild.firstChild&&"t"===_e(e.firstChild.firstChild))return e.firstChild.firstChild.textContent}static getDimensions(e){let t=$e(e.documentElement,"dimension");return!!t&&t.getAttribute("ref")}static getSharedStrings(e){return function(e){let t=new g;return De(e,"si",(function(e,n){t.push(function(e){const t=$e(e,"t");if(t)return t.textContent;let n="";return De(e,"r",(function(e){n+=$e(e,"t").textContent})),n}(e))})),t}(e.documentElement)}static getBaseStyles(e){let t=$e(e.documentElement,"cellStyleXfs");return t?$e(t,"xf",!0):new g}static getNumberFormats(e){let t=$e(e.documentElement,"numFmts");return t?$e(t,"numFmt",!0):new g}static getWorkbookProperties(e){return $e(e.documentElement,"workbookPr")}static getCellStyles(e){let t=$e(e.documentElement,"cellXfs");return t?$e(t,"xf",!0):new g}static getRelationships(e){return $e(e.documentElement,"Relationship",!0)}static getSheets(e){let t=$e(e.documentElement,"sheets");return t?$e(t,"sheet",!0):new g}}function Ve(e){let[t,n]=e.split(/(\d+)/);return[parseInt(n),Ge(t.trim())]}function We(e,t,n){let{inlineStringValue:a,inlineStringXml:r,styleId:s,styles:i,values:o,properties:l,options:c}=n;switch(t=t||"n"){case"str":e=Ue(e,c);break;case"inlineStr":if(!(e=a()))throw new Error(`Unsupported "inline string" cell value structure: ${r()}`);e=Ue(e,c);break;case"s":let n=Number(e);if(isNaN(n))throw new Error(`Invalid "shared" string index: ${e}`);if(n>=o.length)throw new Error(`An out-of-bounds "shared" string index: ${e}`);e=Ue(o[n],c);break;case"b":if(!/^(?:0|1)?$/g.test(e))throw new Error(`Unsupported "boolean" cell value: ${e}`);e="1"===e;break;case"z":e=void 0;break;case"e":e={0:"#NULL!",7:"#DIV/0",23:"#VALUE!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA"}[u=e]||`#ERROR_${u}`;break;case"d":if(void 0===e)break;let h=new Date(e);if(isNaN(h.valueOf()))throw new Error(`Unsupported "date" cell value: ${e}`);e=h;break;case"n":if(void 0===e)break;let p=Number(e);if(isNaN(p))throw new Error(`Invalid "numeric" cell value: ${e}`);e=function(e,t,n){const a=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],r=/^\[\$-414\]/,s=/;@$/,i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"],{dateFormat:o,smartDateParser:l}=n;if(e){let n=t[e];if(!n)throw new Error(`Cell style not found: ${e}`);let{numberFormat:c}=n||t,{id:u,template:h}=c;if(a.indexOf(parseInt(u))>=0||o&&h===o||!1!==l&&h&&(e=>{e=e.toLowerCase().replace(r,"").replace(s,"");for(let t of e.split(/\W+/))if(i.indexOf(t)<0)return!1;return!0})(h))return!0}return!1}(s(),i,c)?function(e,t){t&&t.epoch1904&&(e+=1462);return new Date(Math.round(24*(e-25569)*36e5))}(p,l):p;break;default:throw new TypeError(`Cell type not supported: ${t}`)}var u;return e||null}function Ue(e,t){let{trim:n}=t;return(e=!1!==n?e.trim():e)||void 0}function Ge(e){const t=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];return((e,n)=>{for(let a of n)e=26*e+t.indexOf(a);return e})(0,e)}function qe(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function ze(e,t,n,a,r){let s=qe(e),i=function(e,t,n,a,r){let s=Fe.getCells(e);return s.isEmpty?s:s.map((e=>(e=>{let[s,i]=Ve(e.getAttribute("r")),o=Fe.getCellValue(e);return{row:s,column:i,value:We(o&&o.textContent,e.getAttribute("t"),{inlineStringValue:()=>Fe.getCellInlineStringValue(e),inlineStringXml:()=>Le(e),styleId:()=>e.getAttribute("s"),styles:n,values:t,properties:a,options:r})}})(e)))}(s,t,n,a,r),o=function(e){let t=Fe.getDimensions(e);if(t){let e=t.split(":").map(Ve).map((e=>{let[t,n]=e;return{row:t,column:n}}));return 1===e.length&&(e=[e[0],e[0]]),e}return null}(s)||function(e){const t=(e,t)=>e-t,n=n=>{let a=e.map((e=>e[n])).sort(t);return[a.shift(),a.pop()]};let[a,r]=n("row"),[s,i]=n("column");return[{row:a,column:s},{row:r,column:i}]}(i);return{cells:i,dimensions:o}}var Be=__webpack_require__(213);function He(e="",t=""){const n=e&&"worksheet"===e,a=n?"worksheets/sheet1.xml":"xl/workbook.xml",r="http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+(n?"worksheet":"officeDocument");t=n?t||"rId3":"rId1";const s=je({tag:"Relationships",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/relationships"}});return Re(s,Ne({tag:"Relationship",attributes:[{name:"Id",value:t},{name:"Type",value:r},{name:"Target",value:a}]},s),"Relationships")}function Xe(e="Sheet1",t="rId3"){const n=je({tag:"workbook",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return Re(n,["workbookPr",((e,t,n)=>{const a=[{name:"state",value:"visible"},{name:"name",value:e},{name:"sheetId",value:1},{name:"r:id",value:t}],r=Ne("sheets",n),s=Ne({tag:"sheet",attributes:a},n);return r.appendChild(s),r})(e||"Sheet1",t||"rId3",n),"definedNames","calcPr"],"workbook")}const Ze=(e,t)=>{const n=Ne("sheetData",t);return e.forEach(((e,a)=>{e=(e=>e.every((e=>(e=>!!e&&"string"!=typeof e&&"number"!=typeof e&&!(!e.type||!e.value))(e)))?e:e.map((e=>"number"==typeof e?{value:e,type:"number"}:{value:e.toString(),type:"string"})))(e),n.appendChild(((e,t,n)=>{const a=t+1,r=Ne({tag:"row",attributes:{name:"r",value:`${a}`}},n);return e.forEach(((e,t)=>{r.appendChild(((e,t,n,a)=>{const r=((e,t)=>{const n=e=>{if("number"!=typeof e)return"";const t=Math.floor(e/26),a=String.fromCharCode(97+e%26).toUpperCase();return 0===t?a:n(t-1)+a};return`${n(e)}${t}`})(t,n),s=Ne({tag:"c",attributes:(({type:e})=>{let t=new g({name:"r",value:r});return"string"===e&&t.push({name:"t",value:"inlineStr"}),t})(e)},a),i=(e=>{const[t,n]=(({type:e,value:t})=>[t,"string"===e?{tag:"is"}:{tag:"v",value:t}])(e);let r=Ne(n,a);return"string"===e.type&&r.appendChild(Ne({tag:"t",value:t},a)),r})(e);return s.appendChild(i),s})(e,t,a,n))})),r})(e,a,t))})),n},Qe=Re(je({tag:"Types",attributes:{name:"xmlns",value:"http://schemas.openxmlformats.org/package/2006/content-types"}}),[{tag:"Default",attributes:[{name:"Extension",value:"xml"},{name:"ContentType",value:"application/xml"}]},{tag:"Default",attributes:[{name:"Extension",value:"rels"},{name:"ContentType",value:"application/vnd.openxmlformats-package.relationships+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/workbook.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}]},{tag:"Override",attributes:[{name:"PartName",value:"/xl/worksheets/sheet1.xml"},{name:"ContentType",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}]}],"Types"),Ke=He(),Je=function(e){const t=je({tag:"worksheet",attributes:[{name:"xmlns",value:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"},{name:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},{name:"xmlns:mv",value:"urn:schemas-microsoft-com:mac:vml"},{name:"xmlns:mx",value:"http://schemas.microsoft.com/office/mac/excel/2008/main"},{name:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},{name:"xmlns:x14",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},{name:"xmlns:x14ac",value:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},{name:"xmlns:xm",value:"http://schemas.microsoft.com/office/excel/2006/main"}]});return Re(t,Ze(e,t),"worksheet")};function Ye(e){const{filename:t,sheetname:n,data:a}=e,{data:r,rels:s}=((e="Sheet1",t="rId3")=>({data:Xe(e,t),rels:He("worksheet")}))(n);let i=function(e,t){t||(t={});var n={},a=[];ve(e,"",n,t);var r=0,s=0;for(var i in n){var o=n[i],l=o[0],c=o[1],u=0==c.level?0:8,h=(A=ke(i)).length,p=c.comment,m=p&&ke(p),d=m&&m.length,f=Oe(c.extra);h>65535&&K(11);var g=u?we(l,c):l,w=g.length,y=ue();y.p(l),a.push(pe(c,{size:l.length,crc:y.d(),c:g,f:A,m,u:h!=i.length||m&&p.length!=d,o:r,compression:u})),r+=30+h+f+w,s+=76+2*(h+f)+(d||0)+w}for(var v=new x(s+22),b=r,E=s-r,k=0;k<a.length;++k){var A=a[k];Te(v,A.o,A,A.f,A.u,A.c.length);var C=30+A.f.length+Oe(A.extra);v.set(A.c,A.o+C),Te(v,r,A,A.f,A.u,A.c.length,A.o,A.m),r+=16+C+(A.m?A.m.length:0)}return function(e,t,n,a,r){ge(e,t,101010256),ge(e,t+8,n),ge(e,t+10,n),ge(e,t+12,a),ge(e,t+16,r)}(v,r,a.length,E,b),v}({"[Content_Types].xml":et(Qe),_rels:{".rels":et(Ke)},xl:{"workbook.xml":et(r),_rels:{"workbook.xml.rels":et(s)},worksheets:{"sheet1.xml":et(Je(a))}}});(0,Be.saveAs)(new Blob([i]),`${t}.xlsx`)}function et(e){return ke(function(e){return(new XMLSerializer).serializeToString(e).replace(/\s?xmlns=""/g,"")}(e))}const tt=e=>{if(n.formatedDate.test(e[0]))return 2;let t=new g,a=new g;return e.forEach(((e,n)=>{[t[n],a[n]]=e.split(/\/|:|-/)})),t.some((e=>e>12))||a.some((e=>e>12))?t.some((e=>e>12))?1:0:t.countValue(t[0])>a.countValue(a[0])?0:1};class nt{constructor(){this.types=new g("gagal","error"),this.fileName={fname:[],ftype:"",numb:1,ext:".csv"},this.options=((e,t,n="key")=>{let a=Array.isArray(t)?t:[t];return Object.fromEntries(Object.entries(e).filter((([e,t])=>{let r="key"==n?e:t;return a.some((e=>r===e))})))})(y.default,["monthIndex","splitter"])}async import(e){if(!e)return this;this.constructFileName(e.name);const t=await((e,{xlsxFileCheck:t},{ext:n})=>t.test(e.type)&&/xlsx/.test(n)?e.arrayBuffer():e.text())(e,n,this.fileName);return t?this.readData(t):this}constructFileName(e){let[t,a]=e.split(".");const r={fname:[],ftype:"",numb:1,ext:`.${a||"csv"}`};t.replace(n.forFilename,((e,t,n,a)=>(void 0!==a&&r.fname.push(a),void 0!==t&&this.types.isOnArray(t)&&(r.ftype=t||""),void 0!==n&&(r.numb=o(n)?Number(n):1),""))),this.fileName=Object.assign({},this.fileName,r)}async readData(e){const t="string"==typeof e?e.split(/\r\n|\r|\n/):await this.handleExcel(e),a=(([e,...t])=>"string"==typeof(e=e||t[0])&&((e=>{let t=String.raw`^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,;"\s\\]*(?:\s+[^,;"\s\\]+)*)\s*)*$`;return new RegExp(t).test(e)})(e)?",":";"))(t),r=new g,s=new g;return t.forEach((e=>{let t=(e=>(e=>{if(e.isEmpty)return!1;const t=e=>n.phonePattern.test(e);return!!e.some(((e,n)=>t(e)&&0!==n))&&(e.forEach(((a,r)=>{var s,i;e[r]=/^"(.*)"$/.test(a)?a.replace(/(^")|("$)/g,""):e[r],e[r]=t(a)?(i="string"==typeof(i=a)?i:Array.isArray(i)?i.join(""):i.toString()).replace(n.phoneValue,(function(e,t,n,a){let r=void 0!==t?t:n.replace(/(\-| )/g,"");return("8"===r.charAt(0)&&"+"!==e.charAt(0)?"62":"")+r})):o(a)?Number(a).toString():a instanceof Date?[(s=a).getDate(),s.getMonth()+1,s.getFullYear()].join("/"):e[r]})),e)})(Array.isArray(e)?e:this.toArray(e,a)))(e);if(t){r.push(t);let a=(e=>{if("string"==typeof e)return(e=n.datePattern.exec(e))?e.toString():null;let[t]=e.filter((e=>n.datePattern.test(e)));return t?t.toString():null})(e);a&&s.push(a)}})),this.options=Object.assign({},this.options,{monthIndex:!s.isEmpty&&tt(s),splitter:a||this.options.splitter}),a&&y.setOption("splitter",a),this.data=r.filter((e=>!e.isEmpty)),this}async handleExcel(e,t={}){let n=Object.assign({},{sheet:1},t);return await async function(e,t={}){t=Object.assign({},t);const n=await async function(e){if(!(e=e instanceof File||e instanceof Blob?await e.arrayBuffer():e))return{};const t=function(e,t){for(var n={},a=e.length-22;101010256!=de(e,a);--a)(!a||e.length-a>65558)&&K(13);var r=me(e,a+8);if(!r)return{};var s=de(e,a+16),i=4294967295==s||65535==r;if(i){var o=de(e,a-12);(i=101075792==de(e,o))&&(r=de(e,o+32),s=de(e,o+48))}for(var l=t,c=0;c<r;++c){var u=Se(e,s,i),h=u[0],p=u[1],m=u[2],d=u[3],f=u[4],g=u[5],w=Ce(e,g);s=f,l&&!l({name:d,size:p,originalSize:m,compression:h})||(h?8==h?n[d]=ye(e.subarray(w,w+p),{out:new x(m)}):K(14,"unknown compression type "+h):n[d]=Z(e,w,w+p))}return n}(new Uint8Array(e)),n=new Map;for(let e of Object.keys(t))n.set(e,Ae(t[e]));return n}(e);return function(e,t={sheet:1}){let{sheet:n}=t;const a=t=>{if(!e.has(t))throw new Error(`"${t}" file not found inside the *.xlsx file zip archive`);return e.get(t)},r=function(e){let t=qe(e),n={sheets:{},sharedStrings:void 0,styles:void 0};const a=e=>"/"===e[0]?e.slice(1):`xl/${e}`;return Fe.getRelationships(t).forEach((e=>{let t=e.getAttribute("Target");switch(e.getAttribute("Type")){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=a(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=a(t);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[e.getAttribute("Id")]=a(t)}})),n}(a("xl/_rels/workbook.xml.rels")),s=r.sharedStrings?(c=a(r.sharedStrings))?Fe.getSharedStrings(qe(c)):new g:[],i=r.styles?function(e){if(!e)return{};const t=(e,t)=>{let n={};if(e.hasAttribute("numFmtId")){let a=e.getAttribute("numFmtId");n.numberFormat=t[a]??{id:a}}return n};let n=qe(e),a=Fe.getBaseStyles(n).map(t),r=Fe.getNumberFormats(n).map((e=>({id:e.getAttribute("numFmtId"),template:e.getAttribute("formatCode")}))).reduce(((e,t)=>(e[t.id]=t,e)),[]);return Fe.getCellStyles(n).map((e=>e.hasAttribute("xfId")?Object.assign({},a[e.xfId],t(e,r)):t(e,r)))}(a(r.styles)):{},o=function(e){let t=qe(e),n=Fe.getWorkbookProperties(t),a={};return n&&"1"===n.getAttribute("date1904")&&(a.epoch1904=!0),a.sheets=new g,Fe.getSheets(t).forEach((e=>{e.getAttribute("name")&&a.sheets.push({id:e.getAttribute("sheetId"),name:e.getAttribute("name"),relationId:e.getAttribute("r:id")})})),a}(a("xl/workbook.xml")),l=function(e,t){if("number"==typeof e){let{relationId:n}=t[e-1];return n}for(let{name:n,relationId:a}of t)if(n===e)return a}(n,o.sheets);var c;if(!l||!r.sheets[l])throw function(e,t){const n=t.map((({name:e},t)=>`"${e}" (#${t+1})`)).join(", ");return new Error(`Sheet ${"number"==typeof e?`#${e}`:`"${e}"`} not found in the *.xlsx file.`.concat(t?` Available sheets: ${n}."`:""))}(n,o.sheets);const u=function(e,t){let{dimensions:n,cells:a}=e,{transformData:r}=t;if(a.isEmpty)return[];let[s,i]=n,{row:o,column:l}=i,c=new g(o);for(let{row:e,column:t,value:n}of a)e-=1,t-=1,t<l&&e<o&&(c[e]||(c[e]=new g),c[e][t]=n);return r?r(c):c}(ze(a(r.sheets[l]),s,i,o,t),t);return u}(n,t)}(e,n)}toArray(e,t=","){let n=new g;return e.replace(((e=",",t="")=>{let n=","==e?`${e};`:e,a=String.raw`(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^${n}"\s\\]*(?:\s+[^${n}"\s\\]+)*))\s*(?:${e}|$)`;return t?new RegExp(a,t):new RegExp(a)})(t,"g"),((e,...t)=>(t.forEach(((e,a)=>{if(a>=t.length-2)return;const{rgx:r,val:s}=(e=>({rgx:[/\\'/g,/\\"/g,/^['"]?(.*)['"]?$/][e],val:["'",'"',"$1"][e]}))(a);""===e&&n.length++,e&&n.push(e.replace(r,s))})),""))),/,\s*$/.test(e)&&n.push(""),n}export(e,t){const{splitter:n}=this.options,a=(e=>{let{fname:t}=this.fileName;return`${t.join("_")}_${e}${(()=>{let{ftype:t,numb:n}=this.fileName;return e!==t?"":`_${n+1}`})()}`})(e);return nt.createFile(a,t,n)}static createFile(e,t,n=","){const a=((e,t)=>{const n=e=>{let t=(e=e?e instanceof Date?e.toLocaleString():e.toString():"").replace(/"/g,'""');return t.search(/("|,|\n)/g)>=0&&(t=`"${t}"`),t};let a="";return e.forEach((e=>a+=(e=>{let a=t||",";return`${e.map(n).join(a)}\n`})(e))),new Blob([a],{type:"text/csv;charset=utf-8;"})})(t,n);return{fileUrl:URL.createObjectURL(a),fileName:`${e}`}}static exportToXlsx(e,t){return function(e,t){return Ye({filename:t,sheetname:t,data:e})}(t,e)}}const at=new nt;class rt{static current(e){y.debug&&console.log("test",e)}}const st=new class{constructor(){this.src="",this.rgx={lt:/</g,gt:/>/g,escape:/\\([\\\|`*_{}\[\]()#+\-~])/g,format:/(^|[^A-Za-z\d\\])(([*])|(_)|(~)|`)(\2?)([^<]*?)\2\6(?!\2)(?=\W|_|$)/g,link:/(?:(http(?:s)?)?:\/\/)?((?:([a-z\d-]+?)\.([\.a-z]{2,}?))|((?:[\.\d]{1,3}?){4}?))(\:\d+)?((?:\/[-a-z\d%_.~+]*?)*?)(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?(?=$|\s|\n|<)/gi,para:/(?=^|\n)(\s+)*([^<]+?)[\n\s]*(?=<|\n|$)/g},this.plain=!1}element(t,n,a={}){return e.createElement(Object.assign({tag:t,html:n},a)).outerHTML}raw(e){return e.replace(this.rgx.escape,"$1")}highlight(e){let{format:t}=this.rgx;return this.plain?e:e.replace(t,((e,t,n,a,r,s,i,o)=>{const l=((e,t,n,a)=>a?"code":e?"strong":t?"em":n?"s":"")(a,r,s,i);return o=i?o.replace(/`/g,""):o,`${t}${this.element(l,this.highlight(o))}`}))}link(){let{link:e}=this.rgx;return this.src=this.src.replace(e,((e,...t)=>{let[n,a]=t;return this.element("a",e,{href:e,title:a,alt:a,target:"_blank"})})),this}#e(){let{para:e}=this.rgx;return this.src=this.src.replace(e,((e,t,n)=>`${t=t?t.replace(/\n/,"<br/>"):""}${this.element("div",this.raw(this.highlight(n)))}`)),this}#t(){return this.src=this.src.trim(),this.src}toHtml(e,t=!1){const{lt:n,gt:a}=this.rgx;return this.src=`${e}`,this.plain=t,this.src=this.src.replace(n,"&lt;").replace(a,"&gt;"),this.#e().link().#t()}};class it{constructor(){this.data=new g}get count(){return this.data.length}add(e){return this.data.push(e),this}}const ot=new class{constructor(){this.sukses=new it,this.gagal=new it,this.error=new it}reset(){for(let e in this)this[e]=new it;return this}createData(e){return this.hasOwnProperty(e)?this[e]:new it}success(e){this.sukses.add(e)}fail(e,t=1){t?this.error.add(e):this.gagal.add(e)}},lt=new class{constructor(){this.timer=!1,this.time=null,this.fn=null}get isRunning(){return!1!==this.timer}set(e,t){this.time=e,this.fn=t}start(e=null){this.isRunning||(this.timer=setInterval(this.fn,this.time)),e&&"function"==typeof e&&e(!0)}break(e=null){this.isRunning&&(clearInterval(this.timer),this.timer=!1),e&&"function"==typeof e&&e(!1)}stop(e=null){this.fn=null,this.time=null,this.break(e)}},ct=new class{constructor(){this.currentIndex=0,this.queue=new g,this.stock=new g,this.offset=0}get isEmpty(){return this.queue.isEmpty}get now(){return this.queue.isEmpty?void 0:this.queue[this.offset]}get size(){return this.queue.length-this.offset}get long(){return this.stock.length}setData(e){this.queue=e,this.stock=e}run(){if(this.queue.isEmpty)return;let e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}reset(){this.queue=new g,this.stock=new g,this.offset=0,this.currentIndex=0}reload(){this.queue=this.stock,this.currentIndex=0,this.offset=0}},ut=new class extends d{constructor(){super();const e=this.getValue("wayfu-changelog",new g);this.details=0!==e.length?new g(...e):new g}get getChanges(){const{homepage:e}=this.appInfo;return new Promise((t=>{let n={url:`${e}files/changelog.json`,onload:e=>{const{status:n,responseText:a}=e;if(200===n){let e=JSON.parse(a);e=Array.isArray(e)?e:e.changelog,t(e)}else t(200===n)}};this.request(n)}))}get Log(){return this.details}async doUpdate(e){const t=n.getVersion.exec(e)[1],{version:a,name:r,downloadURL:s}=this.appInfo;if(!((e,t)=>{const{forVersion:a}=n;if(!e||!t||0===e.length||0===t.length)return!1;if(e==t)return!0;if(a.test(e)&&a.test(t)){let n=e.includes(".")?".":"-",a=e.split(n).map((e=>o(e)?Number(e):e)),r=t.split(n).map((e=>o(e)?Number(e):e));for(let e=0;e<a.length;++e){if(r.length==e)return!0;if(o(a[e])&&o(r[e])){if(a[e]==r[e])continue;return a[e]>r[e]}{let[t,n]=[Number(/\d+/.exec(a[e])),Number(/\d+/.exec(r[e]))],[s,i]=[/[A-Za-z]/.exec(a[e]),/[A-Za-z]/.exec(r[e])];if(t==n){if(s&&i&&s[0]==i[0])continue;return s&&i?s[0]>i[0]:!!s}return t>n}}}return e>=t})(a,t)){const e=`${r} ${t} sudah tersedia, perbaharui sekarang?`;await f.confirm(e)&&(window.location.href=s)}}async checkUpdate(){const{updateURL:e}=this.appInfo,t=new Promise((t=>{const n={url:`${e}`,onload:e=>{const{status:n,responseText:a}=e;t(200===n&&a)}};this.request(n)}));return this.details=new g(...await this.getChanges),this.save(),this.doUpdate(await t),this}save(){this.setValue("wayfu-changelog",this.details)}},ht=new class extends m{constructor(){super(),this.errors={}}get errorList(){const e=new g;if(0!==Object.entries(this.errors).length)for(const t in this.errors)e.push(this.error(t));return e}validate(e){this.errors={},e=this.intoObject(e);for(let t in e)e[t].rules.forEach((e=>this[e](t)));return 0===Object.entries(this.errors).length}notEmpty(e){let[t,n]=(e=>{let[t,n]=[!1,""];return"message"===e?(t=""!==b.inputMessage,n="Silahkan Masukkan Pesan terlebih dahulu..."):"queue"===e&&(t=void 0!==ct.now,n="Silahkan Masukkan File Penerima Pesan..."),[t,n]})(e);return t||(this.errors[`${e}.isEmpty`]=n),t}belowMax(e){let{maxQueue:t}=y,{size:n}=ct;return!(n>t&&(this.errors[`${e}.overMax`]=`Blast Auto tidak boleh lebih dari ${t} Nomor!`,1))}error(e){return this.errors[e]}showError(){const t=this.errorList;if(!t.isEmpty){const n=e.createListElement(t,"ul",{classid:"wfu-reports"});f.alert(n,"[ERROR] Proses Gagal Dimulai")}}};function pt(){ct.reset(),wt()}function mt(t){return e.setElements([{elm:"#_blast-ico",props:{d:t?"M505.16405,19.29688c-1.176-5.4629-6.98736-11.26563-12.45106-12.4336C460.61647,0,435.46433,0,410.41962,0,307.2013,0,245.30155,55.20312,199.09162,128H94.88878c-16.29733,0-35.599,11.92383-42.88913,26.49805L2.57831,253.29688A28.39645,28.39645,0,0,0,.06231,264a24.008,24.008,0,0,0,24.00353,24H128.01866a96.00682,96.00682,0,0,1,96.01414,96V488a24.008,24.008,0,0,0,24.00353,24,28.54751,28.54751,0,0,0,10.7047-2.51562l98.747-49.40626c14.56074-7.28515,26.4746-26.56445,26.4746-42.84374V312.79688c72.58882-46.3125,128.01886-108.40626,128.01886-211.09376C512.07522,76.55273,512.07522,51.40234,505.16405,19.29688ZM384.05637,168a40,40,0,1,1,40.00589-40A40.02,40.02,0,0,1,384.05637,168ZM35.68474,352.06641C9.82742,377.91992-2.94985,442.59375.57606,511.41016c69.11565,3.55859,133.61147-9.35157,159.36527-35.10547,40.28913-40.2793,42.8774-93.98633,6.31147-130.54883C129.68687,309.19727,75.97,311.78516,35.68474,352.06641Zm81.63312,84.03125c-8.58525,8.584-30.08256,12.88672-53.11915,11.69922-1.174-22.93555,3.08444-44.49219,11.70289-53.10938,13.42776-13.42578,31.33079-14.28906,43.51813-2.10352C131.60707,404.77148,130.74562,422.67188,117.31786,436.09766Z":"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"}}]),t&&e.getElement(".progress-panel")||f.progressPanel(t,ft),t}async function dt(){const e=e=>new Promise((t=>setTimeout(t,e)));if(lt.isRunning||lt.start(mt),lt.isRunning&&ct.now){let{useCaption:t,useAttc:n,hasAttc:a,msgAttc:{type:r}}=y,s=ct.currentIndex+=1,i=ct.run(),o=b.setData(i),l="";switch(wt(s,o.phone),await e(500),l=await(async e=>!1!==("caption"!==e&&n&&a&&"PDF"!==r?await window.WAPI.openChat(o.phone):await o.sendText())?"SUCCESS":"ERROR")(t),await e(100),"SUCCESS"===l&&(l=n&&a?await o.sendImg()?"SUCCESS":"FAILED":l),await e(400),l){case"SUCCESS":ot.success(i);break;case"FAILED":ot.fail(i,0);break;case"ERROR":ot.fail(i)}await e(3500)}else gt()}async function ft(){lt.break(mt),ct.now&&await f.confirm("Stop Proses?")?gt():dt()}function gt(){v.isPremium||v.updateTrial("update"),lt.stop(mt),async function(){ct.isEmpty&&(e.setElement("#getFile",{value:""}),pt());const t=t=>{const{count:n,data:r}=ot.createData(t),{downloadBtnSvg:s}=a;if(r.isEmpty)return n;const{fileName:i}=at.export(t,r),o=e.createSVGElement(s,{viewBox:"0 0 512 512"}),l=e.createElement({tag:"a",title:`Download "${i}"`,classid:"wfu-export-csv",href:"#"});return l.appendChild(o),l.dataset.reportType=t,`${n} `+l.outerHTML};let n=e.createListElement([`SUKSES  = ${t("sukses")}`,`GAGAL   = ${t("gagal")}`,`ERROR   = ${t("error")}`],"ul",{classid:"wfu-reports"});if(f.alert(n,"[REPORT] Kirim Pesan Otomatis Selesai."),await e.hasElement(".wfu-reports a[data-report-type]")){function r(e){let t=(e.currentTarget||e.target).dataset.reportType,{data:n}=ot.createData(t),{fileName:a}=at.export(t,n);return yt(n,a)}e.getElement(".wfu-reports a[data-report-type]",!0).forEach((t=>e.onEvent(t,"click",r)))}v.isPremium||v.showAlert(v.isTrial?3:(e.getElement("#auto").click(),4),!0),window.WAPI.Chat.clearAllDraft()}()}function wt(t=.5,n=null){let{size:a,isEmpty:r}=ct,s=r?"none":"inline-block",i=r?"":`Data: Loaded, ${a} Nomor`;if(e.setElements([{elm:"#_file-info",props:{title:i,style:`display:${s}`}},{elm:"span.curPhone",props:{text:`+${n||""}`}},{elm:"#_data-count",props:{text:a}}]),r){let t=e.getElement("#_mode");t.checked&&t.click(),e.setElement(t,{disabled:r})}!function(t,n){let a=t.long||100,r=n/a*100;n>=1&&e.setElements([{elm:".waBar",props:{title:`${n}/${a}`}},{elm:"span.curNumb",props:{text:`${n}/${a}`}}]),e.setElementStyle(".waBar",{width:`${r}%`})}(ct,t)}async function yt(t,n){const r=t=>e.createElement({tag:"div",classid:t});function s(e){const{id:t,value:n}=e.currentTarget||e.target;"fileType"===t&&y.setOption(t,n)}function i(e){const{id:t,checked:n}=e.currentTarget||e.target;if("set_fileType"!==t)return;let{fileType:a}=y;y.setOption("exportType",n?a:"ask")}let{fileUrl:o,fileName:l}=nt.createFile(n,t),{exportType:c}=y;if("ask"===c){if(!await f.confirm((t=>{const n=r("wfu-options"),o=((t,{fileType:n},{checksSvg:a})=>{const i=["csv","xlsx"],o=r("row"),l=(()=>{let n=r("_label"),a=e.createLabelElement({id:t,text:"Simpan file sebagai"});return n.appendChild(a),n})(),c=(()=>{let o=r("_input"),l=e.createLabelElement({id:t,classid:"select"}),c=e.createSelectElement({id:t},i,{change:s}),u=e.createSVGElement(a,{viewBox:"0 0 10 6"});return c.value=n,l.append(c,u),o.appendChild(l),o})();return o.append(l,c),o})(t,y,a),l=(t=>{const n=r("row right"),a=e.createCheckElement({id:`set_${t}`,classid:"_input checks"},{change:i}),s=e.createLabelElement({id:`set_${t}`,classid:"_label",text:"Simpan pengaturan"});return n.append(a,s),n})(t);return n.append(o,l),n})("fileType"),`Download "${n}"`))return;c=y.fileType}return"xlsx"===c?nt.exportToXlsx(n,t):e.createElement({tag:"a",href:o,download:`${l}`}).click()}const vt=new class{constructor(){}async runTasks(e){if(!await v.check())return;if(await async function(){if(0!==ct.currentIndex&&ct.now)return!(await f.confirm(`Lanjutkan Proses dari data ke-${ct.currentIndex+1}?`)||await f.confirm("Proses ulang dari awal?")&&(ct.reload(),wt(),1));const e=ht.validate({message:{rules:["notEmpty"]},queue:{rules:["notEmpty","belowMax"]}});return ht.showError(),!e}())return;const{useAttc:t,hasAttc:n}=y,a=t||n?6e3:5500;ot.reset(),lt.set(a,(()=>dt())),dt()}tabMenu(t){const n=t.currentTarget||t.target,a=n.value,r=e.getElement("#wayfuPanel .menus",!0);e.setElements([{elm:r,props:{removeClass:"active"}},{elm:n,props:{addClass:"active"}}]).setElementsStyle([{elm:"#wayfuPanel .menu-content",props:{display:"none"}},{elm:`#${a}`,props:{display:"block"}}]),y.setOption("activeTab",Array.from(r).indexOf(n))}textPreview(t){let n=t.currentTarget||t.target,a=e.getElement("#wayfuPanel textarea",!0),r=n.checked;a.forEach((t=>{const n="message"===t.id?"msgPreview":"captPreview",a=((e,{id:t})=>{let n=b["input"+("message"===t?"Message":"Caption")];return e?(b.setData(ct.now),n=b.subtitute(n),st.toHtml(n,!e)):""})(r,t),s=((e,{id:t})=>{if("message"===t)return!e;const{useCaption:n}=y;return n?!e:n})(r,t);e.setElement(`#${n}`,{html:a}).setElementStyle(`#${n}`,{display:s?"none":"block"}).setElementStyle(t,{display:s?"block":"none"})}))}updateText(e){const{id:t,value:n,innerText:a}=e.target||e.currentTarget,r=(e=>{let t=`${e}`.match(/[A-Za-z]+/g);return t?(t.forEach(((e,n)=>t[n]=h(e))),`input${t.join()}`):`input${h(e)}`})(t);b.setProperties({[r]:n||a},!1)}async useImage(t){const n="caption"===y.useCaption,a=t.currentTarget||t.target,r=!!n&&a.checked,s=n?"":"Caption menggunakan pesan",i=a.dataset.captId;e.setElements([{elm:`#${a.value}`,props:{disabled:!a.checked}},{elm:`#${i}`,props:{disabled:!r,title:s}},{elm:"#useCaption",props:{disabled:!a.checked}}]),y.setOption("useAttc",a.checked)}async loadData(t){const n=t.currentTarget||t.target,[a]=n.files,r=e.getElement("#_mode"),s=await(async e=>{if(!e)return null;try{return await at.import(e)}catch(e){return f.alert("[ERROR] File .xlsx penerima tidak valid!"),console.error(e),null}})(a);pt(),s?function(e){let t="auto"!==y.dateFormat?y.dateFormat:e.options.monthIndex||y.monthIndex,n=2==t;y.setOptions(Object.assign({},e.options,{monthIndex:t,isFormat:n})),ct.setData(e.data),wt()}(s):(e.setElement(n,{value:null}),r.checked&&r.click()),e.setElement(r,{title:s?"Mode Pesan":"Masukkan File CSV",disabled:!s})}async imagePreview(t){const n=t.currentTarget||t.target,a=n.dataset.value,r=(s=[..."%PDF"].map((e=>e.charCodeAt(0))),(e,t={offset:0})=>s.every(((n,a)=>n===e[t.offset+a])));var s;let i=null,o="",l="";if(a)n.files=[],e.setElement(`#${a}`,{value:""});else{i=n.files[0];let e=await((e,t=0,n=2)=>new Promise(((a,r)=>{const s=new FileReader;s.onload=()=>{a(s.result)},s.onerror=r,s.readAsArrayBuffer(e.slice(t,n))})))(i,0,8),t=new Uint8Array(e),a=(r(t)?100:4)*Math.pow(1024,2);i&&i.size>a&&(f.alert(`Ukuran lampiran: ${l}, tidak boleh lebih dari ${a/Math.pow(1024,2)}MB`),i=null,n.files=[]),l=i?r(t)?"PDF":"Image":"",o=i?r(t)?await(async e=>{const t=await unsafeWindow.pdfjsLib.getDocument(URL.createObjectURL(e)).promise,n=await t.getPage(1),a=n.getViewport({scale:.8}),r=document.createElement("canvas"),s=r.getContext("2d");r.height=a.height,r.width=a.width;const i={canvasContext:s,viewport:a};return await n.render(i).promise,r.toDataURL()})(i):URL.createObjectURL(i):""}e.setElement("#_img-output",{src:o}).setElementStyle("#_deleteImg",{display:i?"block":"none"}),e.setElement("#_caption",{disabled:i&&"PDF"===l||"pesan"===y.useCaption,title:i&&"PDF"===l?"Caption tidak tersedia untuk lampiran: PDF":"pesan"===y.useCaption?"Caption menggunakan pesan":""}),b.setProperties({msgAttc:{file:i,type:l,sendAsHD:"hd"==y.imageQuality}}),y.setOptions({hasAttc:!!i,msgAtc:{file:i,type:l,sendAsHD:"hd"==y.imageQuality}})}toggleApp(t){const n=t.currentTarget||t.target,{active:a}=window.WAPI.WebClassesV2,r=n.classList.toggle("active"),s=(t=>{let n=t.getAttribute("value")||t.dataset.target;return e.getElement(`#${n}`)})(n);s.style.height=s.style.height?null:`${s.scrollHeight}px`,n.classList.toggle(a);let i=s.style.height?"unset":"collapse";e.setElementStyle("#wayfuPanel",{visibility:i}),y.setOption("openPanel",r)}inputRange(t){const n=t.currentTarget||t.target,{id:a,value:r}=n;e.setElements([{elm:n,props:{max:"maxQueue"===a?y.queueLimit:y.bpLimit}},{elm:e.getElement("output",n.parentElement),props:{text:r}}]),y.setOption(a,r)}inputChecks(e){const{id:t,value:n}=e.currentTarget||e.target;y.setOption(t,n)}inputSelects(t){const{id:n,value:a}=t.currentTarget||t.target;switch(n){case"themeColor":!function(t,n){e.setElementStyle("#wayfuPanel",{backgroundColor:n}),y.setOption(t,n)}(n,a);break;case"dateFormat":!function(t){if(o(t))t=2!==Number(t)?t:0,y.setOptions({isFormat:2===t,monthIndex:t,dateFormat:t});else{y.setOptions({isFormat:!1,dateFormat:t});const n=e.getElement("#getFile");ct.isEmpty&&""===n.value||(e.setElement(n,{value:""}),f.alert("Untuk opsi <strong>Deteksi Otomatis</strong>, Silahkan masukkan ulang file penerima pesan.","[WARNING] Masukkan ulang CSV"),pt())}}(a);break;case"useCaption":!async function(t,n){let a="caption"!==n;a&&(a="caption"!==(n=await f.confirm("Mengubah Pesan menjadi Caption akan menaikan potensi Banned dari WhatsApp. Apa Anda Yakin?")?n:"caption")),e.setElement("#_caption",{disabled:a,title:a?"Caption menggunakan pesan":""}),y.setOption(t,n)}(n,a);break;case"exportType":!async function(t,n){y.setOption(t,n);let a=await e.hasElement("span.wfu-link");if(a){let t=(({title:e})=>e.replace(/(.*)\.[^.]+(["]+)$/g,(function(e,t,a){return`${t}.${n+a}`})))(a);e.setElement(a,{title:t})}}(n,a);break;case"imageQuality":!async function(e,t){y.setOption(e,t)}(n,a)}}changeLog(e){}async checkChat(t){const{item:n}=window.WAPI.WebClassesV2,r=e.getElement(`#main .${n}`),s=e.getElement("[role='button']",r);if(E.selectChat().room&&E.isGroup){let{groupMetadata:n}=E,{subject:i,participants:o}=n,l=new g;for(const{contact:e}of o.getModelsArray()){let{id:{user:t},name:n,pushname:a}=e.serialize();l.push([a||n||t,t])}let c=(t=>{let n=e.createElement({tag:s.tagName.toLocaleLowerCase(),classId:s.classList.value,role:"button","data-tab":"6",tabindex:"0","aria-disabled":!1,html:t.outerHTML});return e.createElement({tag:"div",classId:r.classList.value,html:n.outerHTML})})((t=>{let n=e.createSVGElement(a.groupDownloadBtnSvg,{width:"24",height:"24"});return e.createElement({tag:"span",title:`Download "${t}"`,"data-testid":"download-alt","data-icon":"download-alt",classid:"wfu-link",html:n.outerHTML})})(i));const u=e.getElement("span[data-icon='download-alt']",r.parentElement);if(u){if(u&&t.target===u&&await v.check())return yt(l,i)}else r.parentElement.insertBefore(c,r)}}};const bt=async e=>{if(!window.WAPI||!window.WAPI.Msg){function t(e,t={}){for(let t in e.m)"object"==typeof e(t)&&null!==e(t)&&i.forEach((n=>{if(!n.conditions||n.foundedModule)return;let a=n.conditions(e(t));null!==a&&(n.foundedModule=a)}));let a=i.find((e=>"Store"===e.id)),r=a.foundedModule?a.foundedModule:{};return i.forEach((e=>{"Store"!==e.id&&e.foundedModule&&(r[e.id]=e.foundedModule)})),function(e){let{WebClasses2:t,WebClasses3:a,WebClasses4:r,WebClasses5:s,...i}=e,o=Object.assign({},t,a,r),l=Object.assign({},s);return Object.assign(i,{WebClassesV2:o,WebClassesV3:l}),Object.defineProperties(i.Chat.constructor.prototype,{findImpl:{value:async function(e,t){let n=await(async t=>{if("string"==typeof t){let t=await i.WapQuery.queryPhoneExists(e);return t?t.wid:null}return t})(e);if(!n)return null;let a=this.get(n);return a||([a]=this.add({createLocally:!0,id:n},{merge:!0})),a}},clearAllDraft:{value:function(){for(let t of this.getModelsArray())(void 0!==(e=t).draftMessage&&""!==e.draftMessage.text||e.hasDraftMessage)&&t.clearDraft();var e}}}),Object.defineProperties(i.Chat.modelClass.prototype,{open:{value:async function(){let{Cmd:e,Msg:t}=i,n=t.byChat(this);await e.openChatAt({chat:this,msgs:n})},enumerable:!0},clearDraft:{value:function(){return this.setComposeContents({text:"",timestamp:Date.now()}),this},enumerable:!0}}),Object.defineProperties(i,{Me:{get:function(){return this.Contact.getMeContact()},enumerable:!0},SendImgToChat:{value:function(e,t,n="",a=!1){let{file:r,type:s,sendAsHD:i}=t;return!(!e||!r)&&new Promise((t=>{this.Chat.find(`${e}@c.us`).then((async e=>{let o=await this.OpaqueData.createFromData(r,r.type),l={asDocument:s&&"PDF"===s,asGif:!1,maxDimension:i?2560:1600},c=await this.MediaPrep.prepRawMedia(o,l);await c.sendToChat(e,{caption:n}),t(!a||e)})).catch((e=>(console.log(e),t(!1))))}))},enumerable:!0},composeAndSendMsgToChat:{value:function(e,t,n=!1){const{ComposeBox:a}=this;return new Promise((r=>{this.Chat.find(`${e}@c.us`).then((async e=>{e.active||await e.open(),await new Promise((e=>setTimeout(e,500))),await a.paste(e,t),await a.send(e),r(!n||e)})).catch((e=>(console.log(e),r(!1))))}))},enumerable:!0},openChat:{value:async function(e){const{Chat:t}=this;let a;e=(({phone:e},t)=>e.test(t)?t:`${t}@c.us`)(n,e);try{a=await t.find(e)}catch(e){}return!!a&&await a.open()},enumerable:!0}}),window.WAPI=Object.keys(i).sort().reduce(((e,t)=>(e[t]=i[t],e)),{}),window.WAPI}(Object.assign({},r,t))}const a=(e=>{for(let t of Object.keys(e))if(/[^|]?webpack./g.test(t))return t;return null})(e),r=await(async(e,t)=>new Promise((n=>{const a=()=>{if(e.require||e.__d){let t=e.require("__debug");t.modulesMap?.WAWebUserPrefsMeUser?n("meta"):setTimeout(a,200)}else e[t]&&Array.isArray(e[t])&&e[t].every((e=>Array.isArray(e)&&e.length>0))?n("webpack"):setTimeout(a,200)};a()})))(e,a);if("meta"===r){const s=(e=>{const t=t=>{try{return e.ErrorGuard.skipGuardGlobal(!0),e.importNamespace(t)}catch(e){}return null};return Object.defineProperty(t,"m",{get:()=>{const t={},{modulesMap:n}=e.require("__debug");return Object.keys(n).filter((e=>e.includes("WA"))).forEach((e=>{t[e]=n[e]?.factory})),t}}),t})(e),{Debug:o}=e;t(s,{Debug:o})}else if("weback"===r){const l=`parasite${Date.now()}`;e[a].push([[l],{},e=>t(e)])}else console.error("Failed to load WAPI Module!")}};class Et extends d{constructor(e){super(),this.initialize(e)}async initialize(e){await bt(e),this.registerPanel(),this.registerUser(),this.registerOptions(),this.onLoadView()}registerPanel(){E.init();const t=this.getResource("pnl"),n=this.getResource("css"),s=this.getResource("ico","url");!function(t,n,s){const{name:i,version:o,icon:l}=s,c=e.getElement("header > header")?"header > header":"header",{paneOne:u}=window.WAPI.WebClassesV3;e.createElement({tag:"header",id:"wayfuPanel",after:c,html:t.replace(/VERSION/,o).replace(/WA_VERSION/,window.WAPI.Debug.VERSION)}),e.addStyle(n,{id:"wayfuStyle"}).setElement("img.appIco",{src:l}),"header"!==c&&e.setElementStyle(`.${u} header`,{display:"grid"}),function(t){const{paneOne:n}=window.WAPI.WebClassesV3,{item:r}=window.WAPI.WebClassesV2,s=e.getElement(`.${n} header span [role='button']`),i=r?e.getElement(`.${n} header span .${r} `):s.parentElement;i.parentElement.insertBefore((t=>{const n=(()=>{let t=e.createSVGElement(a.wayFuSvg,{width:"24",height:"24",viewBox:"0 0 128 128",class:"wayfu-app-icon"});return e.createElement({tag:"span","data-testid":"wayfu-app","data-icon":"wayfu-app",html:t.outerHTML})})(),r=e.createElement({tag:s.tagName.toLocaleLowerCase(),role:"button",classid:s.classList.value,"data-tab":"2",tabindex:"0","aria-disabled":!1,title:`${t}`,"aria-label":`${t}`,html:n.outerHTML});return e.createElement({tag:"div",id:"wayfuToggle",classid:i.classList.value,"data-testid":"menu-bar-wayfu-app","data-target":"wayfuPanel",html:r.outerHTML})})(t),i)}(i),r.forEach((t=>{const{element:n,type:a,event:r}=t;e.getElement(n||document,!0).forEach((t=>{e.onEvent(t,a,(function(e){let t=vt[r];if("function"==typeof t)return t(e)}))}))})),window.addEventListener("click",(function(e){rt.current(e)}))}(t,n,Object.assign({},this.appInfo,{icon:s}))}registerUser(){v.init().gettingData()}registerOptions(){y.init()}async onLoadView(){e.setElementStyle("#wayfuPanel",{"background-color":y.themeColor}).setElement("input#getFile",{accept:[".txt",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].join(",")}).setElement("input#imgFile",{accept:["image/*","application/pdf"].join(",")}).setElement("#wayfuPanel button[value='_image']",{title:"Lampiran Pesan",text:"Lampiran"}),e.getElement("#wayfuPanel .menus",!0)[y.activeTab||0].click(),y.openPanel?e.getElement("#wayfuToggle").click():e.setElementStyle("#wayfuPanel",{visibility:"collapse"}),window.WAPI.Chat.clearAllDraft(),ut.checkUpdate()}debug(e){if(e="boolean"!=typeof e||e,y.setOption("debug",e),e)Object.assign(Et.prototype,{message:b,options:y,user:v,chat:E,csvFile:at},window.WAPI);else for(let e of["message","options","user","chat","csvFile",...Object.keys(window.WAPI)])delete Et.prototype[e];return this}}!async function t(){await e.hasElement("div.two")?(unsafeWindow.WayFu=new Et(unsafeWindow),Object.defineProperties(unsafeWindow,{pdfjsLib:{value:window.pdfjsLib}})):await t()}()})();